/*
活动名称：京东直播抽奖
环境变量：jd_live_url // 活动链接 多个用英文逗号，@，换行分割
        jd_live_threads // 控制并发线程数（正整数），默认1，最大10
        jd_live_interval // 自定义运行间隔时长（整数，单位毫秒），默认1000
        jd_live_notify // 是否推送通知（true/false），默认不推送

高并发脚本，黑号领不到奖品
活动限制IP严重，建议使用代理，谨慎使用并发

cron:1 1 1 1 *

*/

const $ = new Env('京东直播抽奖')
var iｉl='jsjiami.com.v7';const lillIi=iii1II;(function(II1il,lllI11,I1lIll,I1lIli,II1ii,IIIIII,lillII){return II1il=II1il>>0x4,IIIIII='hs',lillII='hs',function(ii1ilI,lI1ll1,iIiI1,liil1I,i11ii1){const lIli1l=iii1II;liil1I='tfi',IIIIII=liil1I+IIIIII,i11ii1='up',lillII+=i11ii1,IIIIII=iIiI1(IIIIII),lillII=iIiI1(lillII),iIiI1=0x0;const IlIliI=ii1ilI();while(!![]&&--I1lIli+lI1ll1){try{liil1I=parseInt(lIli1l(0x201,'SS)%'))/0x1*(-parseInt(lIli1l(0x244,'$lQA'))/0x2)+parseInt(lIli1l(0x1f7,'24dL'))/0x3+-parseInt(lIli1l(0x145,'gpL7'))/0x4+parseInt(lIli1l(0x14a,'dL6a'))/0x5*(-parseInt(lIli1l(0x206,'5O7B'))/0x6)+-parseInt(lIli1l(0x227,'Qssv'))/0x7*(parseInt(lIli1l(0x1e6,'QBD^'))/0x8)+parseInt(lIli1l(0x149,'(7B['))/0x9*(parseInt(lIli1l(0x24f,'Yi(a'))/0xa)+parseInt(lIli1l(0x17d,'QBD^'))/0xb;}catch(l1iII1){liil1I=iIiI1;}finally{i11ii1=IlIliI[IIIIII]();if(II1il<=I1lIli)iIiI1?II1ii?liil1I=i11ii1:II1ii=i11ii1:iIiI1=i11ii1;else{if(iIiI1==II1ii['replace'](/[gMVkInpUGeQFXTPuYrKBH=]/g,'')){if(liil1I===lI1ll1){IlIliI['un'+IIIIII](i11ii1);break;}IlIliI[lillII](i11ii1);}}}}}(I1lIll,lllI11,function(iiill1,lIli1i,IIIII1,I1lIlI,ii1ill,II1iI,llI1II){return lIli1i='\x73\x70\x6c\x69\x74',iiill1=arguments[0x0],iiill1=iiill1[lIli1i](''),IIIII1='\x72\x65\x76\x65\x72\x73\x65',iiill1=iiill1[IIIII1]('\x76'),I1lIlI='\x6a\x6f\x69\x6e',(0x16171c,iiill1[I1lIlI](''));});}(0xbc0,0xd1c2f,Iii11l,0xbe),Iii11l)&&(iｉl=0x1d7d);const jdCookie=require(lillIi(0x19f,'Odxz')),common=require(lillIi(0x1c9,'[n3H')),notify=require(lillIi(0x178,'zlbd'));console['log'](''),console['log'](lillIi(0x1ee,'5O7B')+$[lillIi(0x208,'(bkz')]+'变量说明=========='),console[lillIi(0x15f,'&tMK')](lillIi(0x163,'NwJg')),console['log']('jd_live_threads\x20//\x20控制并发线程数，默认1，最大10'),console[lillIi(0x1a2,'5O7B')](lillIi(0x25b,'9IoP')),console['log']('jd_live_notify\x20//\x20是否通知(true/false)，默认不推送'),console[lillIi(0x1b8,'iD&f')](lillIi(0x131,'l[u0')+$['name']+lillIi(0x17e,'[n3H')),console[lillIi(0x1ec,'rBgH')]('');function Iii11l(){const liil1l=(function(){return[iｉl,'KjXksMjuMTiFVaPImBUi.crnUoQHme.vB7GYFgpB==','vcajWOTgvdGE','wCkdpSkg','WRZdUbP3ngNdQCoSWRy','smktW6RdUZ1jz8kx','yH/cJJG','W4BcS05VmW','5P6g55Ys5Rsm5yML54MG5OcJ','WRiPW5vcWPxdUa','W4dcMfa','nCoTWRy','W7naWRJcH8kjWP/cTCo5q8oB','W4eTW5KwDq','iCkknb8','W6hcQCkrm3Cpea/dT8oGyCk5W7NdRg4','W4WYW4GQ','W6FcOSk6k3SldbNdPW','pbRdNZtcVWvMWP5TtSokuc0qWQDdymoaWOG2W7CbWRSyWPZcNmkdhCoCWPmZlSkhW4W','tSknj8kc','WRGQi3hcUW','tSoXB8k4mG4GW5O6WPGOnI8','WPbzWRdcONxdSXOpuSo8CvBcKWu','W711WP4tkSohWRdcK8ooWO3dPLJcHLSHEYOi','W6DXWPOEmCovWOhcTSovWPxdTW','WRVdQmo9ca','bCkYsSkexG','WOldP8klomkU','mSkkkqO','DCo0W67cOY7dKx7dGG','imoYWOe','A8k1W6BcIGf7W6CjWOy','umoPWP0','W47KURJOSQVWOkg1W6W','W64cE0yieW','ENRcH0a6','W71pWR3cISkmWPtdR8kPkmkpWPnW','wSk8tdrmgYtcM8kolu0Ck8k4achdOCkLmCkRxG','omkkma4','W5L+FqxdUmkijalcRI1VtZC','fb/cPCo7m3b3','EGtcJtGPhW','g09XW5ddMa','WPDkWRdcV2y','dmkAqG','WQFdV8kqhSkSWPi','x8k+W7FcQmk0W5JcQMpcHSkBWQ8','W5tcJuBcGSkK','d3LDWOHCrbS8xa','WRKag8oYWQRdVGtcTmo8sX0','oxZcPSoqmG','hmk3WPSSia','W7yvk8o8','W7RcVe1NiKddUCoRWPldVSkAW6NcH2/cK8ooW5WQWOS','4PQwWQdORjlLH7hLR6lKU7BLVQtOP5NNMyhNJ6pLOiZLJ7xPH5pLKPJLHyNOVyROOAtOHzBMNOO','EGlcNa','BgpcLgax','bvT2A0q','qCk0uYvuht3cIG','hCkkW67cRSoq','44cV5AAK5zgc44kE772Z','kSoPWOpcMSoyWPCW','rSkdnmkMWRmb','pqddIcJcUvSSW4i','WR5rWRtcTuVdHHaJua','iSo5WOpcLCoAWPO+sNlcVmoDCbZdIXFdOq','W6i/mCozWP0','W58HW7aAzN3dHCki','W4G9W4Kwaa','qKRdPCkDBYvyemoHW4zCWPu','FWpcMdevh2VdSa','WOSJoN3cOCoqErZcHaPLCdbcW5SP','WQZdVmoRkSksrSoL','i8k3tmkNua','hmoCA8otW7HdWOLpW4yZg8oN','4PQFW7lOHPlLR4hKUzVOV5NOORpPLR3PMjZMLRpPLihORQhNV5RPLRZORAG','8kwPImk9','yow2Vow9QUwMSq','w8ktW7FdRG','fMxcI1RcPCoXWRVdOCoNW4BdR1eWWO46WOK/W7SS','bxn1sueGlCoFsmoBW4K','vYedWOK','4PIwyUIfTEwVRUs5RUI/N+IJRoMuNEMyGEAvRUMvKEIUNUE/MEMuO+ITLq','gCkToCoJu11QW6a','kCo5WPNcU8oaWP4','eCo1WQNcOrG','CmkJW4xcSq','5P+H556a5Rwx5yI754MU5OkB','W6Cdugy0','W7LXWOmyn8oz','WODIWO7cPua','44o85Asq5zkp44cL77+v','W7vCWPBdSIS','abxcVmon','WRWyW7xdLSovW4hdRq','bSkCxq','4P2HW7VMNQRNNkZORlhMS77dNG','CZtdSark','WRzIWQvCp8oUW47cSri3','u8kDW7FdUWXsC8k7BG','WPZcK8k+WR8','W7z1WPKCkW','W5C8W5yFeSkfW7Pbix5VztzqW4m'].concat((function(){return['gwxcKGddS8k1W7ldKCo3W4JcOeKWWQCWWP83W74L','mNpcR8ovnq','W500gxy','WRWyW7tdJ8orW5hdVa','b8kkW6VcImovWR4','W6ucywitfhTwW55jvSowkSkE','W4qiW7RdOc3cPb47BCoNy14','xmkDW63dRaHu','CSkKW5ldNZ8','W4j5WPGClW','W7X6WO4tnSovWRdcRa','u8kBW7xdQIvpFSkgB8kIBCkLDMxcJGZdNwVdVvXi','aSkZlIqh','WP4JovxcVCoyrbVcLsvV','WRBdPCklk8kTWPJdPcGjW7NcLmokE8khpa','hM/cGWtcU8kMW6FdQSoKW5O','rur0uwq','iCo4WQdcQHW','hh3cO8oBkeKPWRxdKa4Ju8o0WPenW6ZcOSk0ahBOHApLR5dKUidOVANOO4dPL63PMABMLlZPLPhVV7ZPUylOR4qWl8kclG','axJcLCodfvyHWO8','kmoVWPa','gb/cQmoB','rSk0scjLislcGW','tCkxW7tdRHTexSklESk1','aSoVrwyVnmocDmk1Ea','xSkgobtcMvZdUYtcLNe','qrpdGcvB','WQqzW5RdLSoDW5tdRCkBc8kuWQ4','kCoZWPa','hrVcVmon','l1ZcMmoHea','WQyjW7hdISohWPJcP8oRh8kwWQSlWQ1dW7SMh2HTstBcPCoXo8kDWOJcKxivWPq9W67cM8kY','WRGoW6dcN0FcLNvsWQmjW7VdNgq','W64iCG','5P2z556F5REQ5yIa54US5Ocw','4P2ZW4xOHzBMNzhOVkBOOB7PG6JLIA3KUAdPLi3ORiOa','4PYNW4pOHOFMN4hOVyZOOPBPG6lLIBRKUQlPL4NORAe2','fSkTi8o0yK5GW4im','g3nSt0CS','sCkpW5BcMdG','WOfnWQdcK3VdSbO','egtcKa','g3LL','W5qMcG','AH0rWOpcM8kndbq0aNxdP8kx','WR8al3ZcNG','rSkmBbvw','emkavSkA','lCkJWRxcVrFdHwRdHSk8','ifJcVq8ggKldTq','44kP55QH5Poa6zEJ44cM77Yb','W7X6WP4AmCof','4P26WQdMN4/OGytMRjVNO5hLPAxNKz7dPq','W5pdMSozW6tdNCoHg8ojWRT5BLfxW5u','W57cKKFcOCk3qCkV','WRhdQ8kkoG','he52A30','BmoVW77cPW','i8o1WO8','W7PvxmkJ','WQaCW6JdNW','uNPWqq','wSoPWPpdNdNdNbuXWRmLW7TusSkVW7dcRa','WOjFWRVcIwq','W4JcLKpcRa','qmk6W7a','WRNcQf4','WRSRi8oMWRa','oxbSr3y','mwTvgW0','u8kDW6q','iZxcGSo8','n8kikqihW6pcQY/dVqic','WQ3dRmo5bCkCqCoL','WR/dRSkHn8kRWOddGHGsW6/cKCkEpCohCUA0VEwjOUMsHUAoSG','eSk7qSkMqW','nt7dJqpcLq','55Q/5Pgv5OMo5AwO5Ase','b8kmW6NcMCo5WQJdNa5fWQtdRW','m8kfkW','qCkYW7BcRmkpW5G','W7jXWPKYjSocWQBcVSogWPW','FCouWOtdQGO','eNJcImow','gxDvmc4','dCkkW7pcJmoWWRBdNa','FmkJW5lcLXu','W6zzWOFdIXVdKILCWP8tW5xdPKRdPa','W4eiE1uzfwqsW69Mr8oF','W6iZW6q3j8oVW7y','xJtcNdGM','WP7dUCkkgCk6','W6lcO8k9oMWn','W5BcV03cV8kJ','zLv3wMq','rComW6JcMCo1WRBdLMv2WRxdRfNcNrBdHWFcM8ojW4dcIqVcV8k2W44YW61b','qCkYW7BcRmkkW5pcIN7cL8kfWRmbWR7cTmoeWOtdMmovW6Okeq','jSoUWPlcVCoaWPm','WQ0/W47dJ8oe','smkZes9gymksla','WRNdUXSSAIhcUCkHWPZdQCkeW5dcGgy','5O+Y56s157Uq5P22eSorW6JcOCoTW7tdHCoDaSoP','k0VcKgHZmCkyBSkLwq'].concat((function(){return['W6arl8oXWO1EWQO','WRJdRmo9i8k4AG','m0bmW5xdMmor','WRpdPSo9hCkyumo5WRnz','WQOCW7hdMW','WQ4DbCoN','wSkydmktWQGD','W54QW6qTkW','w2XTANW','jNL7iXldGSkeymkooCoy','mCkoktGyW63cSq','WQxdV8knmW','FmkDW63dUWXoFSoFxSkPzmkq','B1Hzr1G','WPpdOmo/dmkICmoVWPvq','4PQnW7VOHARLRzpKUO/OVAZOORlPL77PMABMLihPLRxOR6/NVRhPL4pORy4','vSkCW7ddQHTu','FCkCW6ZdQGm','WO3cMCkTWRVdIuhcS8oKqwVdQG','u8k9dc93E8kgdCoPmr8','rmo1WOVdVbBdMW','W6iAW6W7uq','sgTCruBcMSkWW4pcUCkNWOZcHu3cOSk1WQa','W6WgEeq','pgdcImocka','CcuZWPv9','ASkZW5NcSc1nD8oJoCkkE8oBW77cGmkbiCkwcWW','g8kabbK/','F8kNW4JcOW','WRi5W4XMWONdUc/cPIddP3S','p8kgW7/cQmoF','W5ddGMddHSkJWOuTWOnEWPq','W4hKU4lNMj7MKBdMIzhLPOxMTjtLIzK','WRuBW6nJWQS','WQisW6i','WQStW7m','W6FcPmk4oLOlfcFdJ8oNz8kOW73dUMtcMvtdOHfI','Cmo1W6O','e8kusmkxp8oNWO1/WRSuW5y','lNdIMBhcIoIUREwHVowgGoAHNUw+LUAVI+EHGoEzO+wnVoMgOW','W5NcPCkLfKtdMJ3dQ2igDsL2ucC','ESkCpSkTWQC','rCosWOVdUZC','WP4JpLJcRSoFDq','44gL5O+A56EC44gL6k2H5yAp6iY85y2vW5hdKmkUud3cHG','gCkTiSoWAfjAW6qgWOKBeq4Hea','WPzzWRBcSq','iW/dGJdcMfyKW5q','WRW1iM7cTq','WOS8j0tdO8kCDbFcHYvRAIelWPu/vW','BSk2j8kqWOO','sCk3krXg','bMZcJ8oF','W7z7WOKA','W67cUSkxbNm','W4pcKe9Whq','rSkdna','WQilh8o2WQRdRG','iCkknb8LW6pcSJm','W6RcMvtcJmkM','kSoPWRRcPHO','vEIVVEAYPowLHEI2S8oN4PYxWQpMLBlLKBlLUzxMLyVMJlO','W5mYW5e7bCkEW618ba','W7q/iL5n','WRNdPCkkl8kNWOtdNG4d','pxjVlHxdGSk1EG','WQ3dVmoNlmktrG','F+ACPEEFPUEkN+AaRUEJRq','W4WawK03','xmk9fJ17BG','n8o5WOdcVCogWPidtwpcK8ox','uSoHWPhdMa','hXpcP8onhMv4fCovW4DAWPpdGr7cLSkVlJGdWQu','dcb2xuBcGmkMWRpcGSkSWPRcHvpcP8klWQyZpmoRW63dMr7cKG','WOnsWQ/cG3i','W6e3W6qf','Es/dGXDB','qComWRC','W5GwW6mxdq','tIehWOi','usVcIJCt','55Qd5Pk76zE25Rkj5PY65Ass5zk477666yc85ywn','dCoTWOdcImoE','z8kthbdcNW','lePpW5C','w3FcH0qDdCoL','8k2PK8ot','zr3cLZqu','ymkWW5NcU8ki','W4SWgNzfF8okW5ZdKCoFpW','5Awk5zgB5lQa5PUG5lU36loZ77Yx6ykX5ysv56Q65BMS','sCk6W7tcQa','xSkTW6tcRCkm','W6bnWOOmnq','WQC5W49oWPxdSblcOthdIhhcTMpcIYhdUa','r8k/vWjM','sH3dQarw','nSoZWPRcUq','FHBdIsrNjq','W7SAlmo4WP5j'];}()));}()));}());Iii11l=function(){return liil1l;};return Iii11l();};const activityUrl=(process['env'][lillIi(0x134,'5O7B')]||'')[lillIi(0x1d7,'dL6a')](/[,@\n]+/g)['map'](lli=>lli['trim']())[lillIi(0x1e2,'6hsT')](Boolean);let taskThreads=process[lillIi(0x200,'x!@b')][lillIi(0x1f1,'a^S[')]||'1';const runInterval=process[lillIi(0x1a3,'5O7B')][lillIi(0x196,'[n3H')]||lillIi(0x154,'UZ4^'),isNotify=(process[lillIi(0x142,'HaV&')][lillIi(0x170,'67gY')]||process[lillIi(0x168,'(bkz')]['jd_live_Notify'])===lillIi(0x1e8,'dL6a'),rewardMap={0x3:lillIi(0x203,'A3HS'),0xd:'[京豆🐶]',0x8:'[满减优惠券🗑️]'},run_Conf=[0x3,0xd],prize=[],cookiesArr=Object[lillIi(0x25e,'Qssv')](jdCookie)[lillIi(0x15a,'GEE8')](liIlI=>jdCookie[liIlI])['filter'](lll=>lll);function iii1II(_0x50c7f4,_0xc3f390){const _0x26143c=Iii11l();return iii1II=function(_0x4e7c5c,_0x4276bb){_0x4e7c5c=_0x4e7c5c-0x130;let _0x12376b=_0x26143c[_0x4e7c5c];if(iii1II['gttmoi']===undefined){var _0x52e954=function(_0x5f3269){const _0x814216='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x508e15='',_0x14f043='';for(let _0x3ed8f0=0x0,_0x50be2e,_0x2da8d7,_0x4e75fc=0x0;_0x2da8d7=_0x5f3269['charAt'](_0x4e75fc++);~_0x2da8d7&&(_0x50be2e=_0x3ed8f0%0x4?_0x50be2e*0x40+_0x2da8d7:_0x2da8d7,_0x3ed8f0++%0x4)?_0x508e15+=String['fromCharCode'](0xff&_0x50be2e>>(-0x2*_0x3ed8f0&0x6)):0x0){_0x2da8d7=_0x814216['indexOf'](_0x2da8d7);}for(let _0x174d65=0x0,_0x8e80fd=_0x508e15['length'];_0x174d65<_0x8e80fd;_0x174d65++){_0x14f043+='%'+('00'+_0x508e15['charCodeAt'](_0x174d65)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x14f043);};const _0x51b042=function(_0x2e34b8,_0x192383){let _0x6cfa3a=[],_0xce233=0x0,_0x266661,_0x11a92e='';_0x2e34b8=_0x52e954(_0x2e34b8);let _0x5c161c;for(_0x5c161c=0x0;_0x5c161c<0x100;_0x5c161c++){_0x6cfa3a[_0x5c161c]=_0x5c161c;}for(_0x5c161c=0x0;_0x5c161c<0x100;_0x5c161c++){_0xce233=(_0xce233+_0x6cfa3a[_0x5c161c]+_0x192383['charCodeAt'](_0x5c161c%_0x192383['length']))%0x100,_0x266661=_0x6cfa3a[_0x5c161c],_0x6cfa3a[_0x5c161c]=_0x6cfa3a[_0xce233],_0x6cfa3a[_0xce233]=_0x266661;}_0x5c161c=0x0,_0xce233=0x0;for(let _0xbfbb04=0x0;_0xbfbb04<_0x2e34b8['length'];_0xbfbb04++){_0x5c161c=(_0x5c161c+0x1)%0x100,_0xce233=(_0xce233+_0x6cfa3a[_0x5c161c])%0x100,_0x266661=_0x6cfa3a[_0x5c161c],_0x6cfa3a[_0x5c161c]=_0x6cfa3a[_0xce233],_0x6cfa3a[_0xce233]=_0x266661,_0x11a92e+=String['fromCharCode'](_0x2e34b8['charCodeAt'](_0xbfbb04)^_0x6cfa3a[(_0x6cfa3a[_0x5c161c]+_0x6cfa3a[_0xce233])%0x100]);}return _0x11a92e;};iii1II['yLDGtc']=_0x51b042,_0x50c7f4=arguments,iii1II['gttmoi']=!![];}const _0xcdc292=_0x26143c[0x0],_0x14d1b1=_0x4e7c5c+_0xcdc292,_0x497f32=_0x50c7f4[_0x14d1b1];return!_0x497f32?(iii1II['RppuGq']===undefined&&(iii1II['RppuGq']=!![]),_0x12376b=iii1II['yLDGtc'](_0x12376b,_0x4276bb),_0x50c7f4[_0x14d1b1]=_0x12376b):_0x12376b=_0x497f32,_0x12376b;},iii1II(_0x50c7f4,_0xc3f390);}!cookiesArr[0x0]&&($[lillIi(0x25d,'x!@b')]($[lillIi(0x197,'hQtH')],lillIi(0x1ac,'HaV&')),process[lillIi(0x185,'UZ4^')](0x1));!(async()=>{const illIi1=lillIi,llli1={'aGqLp':function(iIli1i){return iIli1i();}};notify[illIi1(0x1c5,'l[u0')]({'title':$[illIi1(0x155,'5O7B')]}),await llli1['aGqLp'](Main),isNotify&&notify[illIi1(0x16a,'A3HS')]()&&await notify[illIi1(0x152,'(7B[')]();})()[lillIi(0x247,'A3HS')](iI1lii=>$[lillIi(0x220,'iD&f')](iI1lii))[lillIi(0x16e,'zlbd')](()=>$['done']());async function Main(){const ii1ili=lillIi,IilIii={'CBiUB':function(iI1lil,l1lIi1){return iI1lil(l1lIi1);},'XvPmi':ii1ili(0x22d,'l[u0'),'uLuqL':ii1ili(0x239,'UZ4^'),'WOhcr':function(iIli1l,i1i1II){return iIli1l===i1i1II;},'woFbR':function(liiIIl,iil1iI){return liiIIl===iil1iI;},'vlMcM':'GuROa','cBKup':function(IlIllI,il1i1I){return IlIllI<il1i1I;},'ewYYm':function(lI1li1,iI11II){return lI1li1!==iI11II;},'edEGH':'eCYen','gKwxK':ii1ili(0x151,'Q(K5'),'RxcgB':ii1ili(0x214,'9IoP'),'uYgsv':ii1ili(0x1a9,'iD&f'),'THJfV':function(iIII1I,ilil1i){return iIII1I!==ilil1i;},'gKFXm':ii1ili(0x21d,'zlbd'),'Bnoej':function(IlIIi,IiI1l){return IlIIi!==IiI1l;},'VgXOk':function(illlII,iIII11){return illlII!==iIII11;},'yaNUY':'isUqL','rmGrh':function(IiI1i,llll1){return IiI1i(llll1);},'MjOIz':function(lil11l,i1i1Il){return lil11l>i1i1Il;},'skkCt':'TJGai'};try{if(IilIii['WOhcr'](activityUrl[ii1ili(0x13f,'Q(K5')],0x0)){if(IilIii[ii1ili(0x1ef,'qUno')](IilIii['vlMcM'],ii1ili(0x15c,'UZ4^')))IlI1l[ii1ili(0x1af,'rGYV')]=lilIil;else{console[ii1ili(0x13a,'hQtH')](ii1ili(0x218,'[csA'));return;}}const I1lIl1=[...new Set(activityUrl)];console[ii1ili(0x20e,'9p10')]('🏬\x20\x20共计\x20'+I1lIl1[ii1ili(0x204,'hQtH')]+ii1ili(0x1a0,'Qu8s'));for(let IlIIl=0x0;IilIii[ii1ili(0x17b,'5O7B')](IlIIl,I1lIl1[ii1ili(0x23b,'A3HS')]);IlIIl++){if(IilIii[ii1ili(0x1b6,'a^S[')]('VCcoS',ii1ili(0x1fc,'9p10'))){console['log']('');const lI1liI=common[ii1ili(0x25f,'f0Tm')](I1lIl1[IlIIl]);if(!lI1liI){if(IilIii[ii1ili(0x15e,'n!Am')](IilIii['edEGH'],IilIii[ii1ili(0x23a,'hQtH')]))i1l1ll[ii1ili(0x135,'x!@b')](ii1ili(0x13c,']i)d')+I1iIiI);else{console[ii1ili(0x219,'dL6a')]('['+I1lIl1[IlIIl]+ii1ili(0x1a7,'Qssv'));continue;}}$[ii1ili(0x1eb,'BiKL')]=![],$[ii1ili(0x161,'(bkz')]=I1lIl1[IlIIl],$['liveId']=common['getUrlParameter'](I1lIl1[IlIIl],'id');if(!$['liveId']){if(IilIii['WOhcr'](IilIii[ii1ili(0x259,'[n3H')],IilIii[ii1ili(0x205,'7eNd')]))try{const iI11Ii=IilIii[ii1ili(0x22b,'9p10')](li1II,IliI11);iI11Ii>0x0&&(i1l1lI[ii1ili(0x1ba,'(bkz')]=iI11Ii);}catch{I1iIii['log'](IilIii[ii1ili(0x1d3,']i)d')]);}else{console['log']('['+I1lIl1[IlIIl]+ii1ili(0x1a7,'Qssv'));continue;}}try{if(IilIii['WOhcr'](IilIii['uYgsv'],IilIii[ii1ili(0x1dd,'A3HS')])){const iIII1l=parseInt(taskThreads);iIII1l>0x0&&IilIii['THJfV'](iIII1l,0x1)&&(IilIii[ii1ili(0x215,'yqti')](IilIii[ii1ili(0x1ce,'@!lh')],'RIKoy')?iIIIIi=iii1I1:taskThreads=iIII1l);}else IIliI[ii1ili(0x153,'x!@b')](IilIii['uLuqL']);}catch{taskThreads=0x1;}taskThreads=Math['min'](taskThreads,0xa),$[ii1ili(0x21c,'f0Tm')]=null;if(runInterval){if(IilIii[ii1ili(0x191,'&tMK')](ii1ili(0x1f6,'E533'),'TlmEt'))Illl11[ii1ili(0x175,'a^S[')](''+ii1lI['data'][ii1ili(0x1fa,'A3HS')]);else try{if(IilIii['VgXOk'](IilIii[ii1ili(0x23e,'67gY')],IilIii['yaNUY'])){let il1i11='';l1lIl1=IiiIlI[ii1ili(0x130,'&tMK')]||'',Iilli1=I1l1Il[ii1ili(0x1ad,'24dL')]||llIll1[ii1ili(0x213,'UZ4^')]||0x0;Illl1l&&(il1i11=iillli[I1l1Ii]);const IlIll1=l1lIii(I11iI1)+il1i11;l1lIil[ii1ili(0x148,'9p10')](ii1ili(0x21e,'&tMK')+IlIll1),IiiIli[ii1ili(0x156,'[n3H')](IlIll1[ii1ili(0x1ab,'E533')]('[','')[ii1ili(0x14f,'rBgH')](']',''));}else{const IlIII=IilIii['rmGrh'](parseInt,runInterval);IilIii[ii1ili(0x1bf,'&4b*')](IlIII,0x0)&&($['waitTime']=IlIII);}}catch{console['log'](ii1ili(0x234,'qUno'));}}await common[ii1ili(0x235,'24dL')](taskThreads,cookiesArr,taskFnc),$[ii1ili(0x1a8,'ejbA')]=![];}else i1l1li['log'](ii1ili(0x18f,'GEE8'));}}catch(illlIi){'TJGai'===IilIii[ii1ili(0x1bc,'SS)%')]?console['log'](ii1ili(0x13d,'zlbd')+illlIi):I1l1I1=I1i111[ii1ili(0x1ae,'Yi(a')];}}async function taskFnc(IiI1I,illlIl){const liil1i=lillIi,i11ill={'MkYrN':liil1i(0x157,'[csA'),'DjSbt':function(iiili1,ill11i){return iiili1===ill11i;},'xzqOr':liil1i(0x1ea,'rBgH'),'TXsOv':function(lllill,ill11l){return lllill===ill11l;},'rMtCw':function(I1lIiI,lllili){return I1lIiI===lllili;},'uZLuT':'cRZoX','YEdVQ':'SPqAO','FncAp':liil1i(0x237,'SS)%'),'svddJ':function(IliiiI,Ill11){return IliiiI(Ill11);},'pKnDq':function(liiIII,li1i11){return liiIII>li1i11;},'KTaSr':'【提示】请先获取Cookie','qjmSf':liil1i(0x164,'9p10'),'Wmucl':liil1i(0x18e,'$gJh'),'HYgeF':liil1i(0x138,'5O7B'),'aPfGY':liil1i(0x1a4,'a^S['),'tqOBA':liil1i(0x1cd,'zlbd'),'zHzru':liil1i(0x1b1,'E533'),'zebzF':'zh-Hans-CN;q=1,\x20en-CN;q=0.9,\x20zh-Hant-CN;q=0.8','MVQPV':liil1i(0x258,'HaV&'),'RIjZl':'cors','SFaHQ':'ios_4.0.0','veQGT':liil1i(0x15d,'Q(K5'),'Mzfzh':'eGZif','DapGo':liil1i(0x171,'hQtH'),'ycnCS':function(iI11I1,il1i1l){return iI11I1<il1i1l;},'MWZnw':'uGXdP','RbMTT':function(IlIlll,IIIl1I,iil1ii){return IlIlll(IIIl1I,iil1ii);},'KstBx':function(IlIlli,il1i1i){return IlIlli>=il1i1i;},'TebEC':'lmIPO','muYtC':liil1i(0x1c4,'hQtH'),'DZtsK':liil1i(0x198,'9IoP'),'PslZz':function(lil111,i11ilI){return lil111(i11ilI);},'zkGWb':liil1i(0x186,'iD&f'),'kKUTH':liil1i(0x133,'6hsT'),'tdhPk':liil1i(0x1d1,'Q(K5'),'bUQpt':'liveLotteryPanelV1012','siYnr':function(ii1ii1,llllI){return ii1ii1!==llllI;},'sRnBO':'wwoiu','pYVDV':liil1i(0x158,'Yi(a'),'GFqjs':function(lllil1,iil1il){return lllil1+iil1il;},'awAbK':function(ilil1I,i11il1){return ilil1I-i11il1;}};if($['runEnd'])return{'runEnd':!![]};const IIIIIi=i11ill[liil1i(0x1b0,'E533')](decodeURIComponent,common[liil1i(0x24e,'hQtH')](IiI1I,i11ill['zkGWb'])),IIIIIl=notify[liil1i(0x17a,'x!@b')](illlIl,IIIIIi),I1lIil=await common['getLoginStatus'](IiI1I);if(!I1lIil&&typeof I1lIil==='boolean'){if(i11ill[liil1i(0x243,'6hsT')]===i11ill['kKUTH']){IIIIIl['fix']('账号无效'),console['log'](IIIIIl[liil1i(0x223,'x!@b')]());return;}else i1ii=0x1;}const IIIl1i=common[liil1i(0x16f,'q([5')](IIIIIi),liiII1=common['getJEC'](IIIIIi),IIIl1l=common[liil1i(0x181,'$gJh')]();let lllll='';await lllli(i11ill[liil1i(0x16d,'n!Am')]);if(!$['hasPrintActInfo']&&lllll){$[liil1i(0x248,'@!lh')]=!![];const lllilI=lllll[liil1i(0x225,'qUno')]||[];for(const ilil11 of lllilI){$['lotteryData']=ilil11[liil1i(0x184,'5O7B')]??{};let illlI1=$[liil1i(0x193,'l[u0')][liil1i(0x1f3,'a^S[')];if(illlI1){const IIIl11=ilil11[liil1i(0x132,']i)d')];switch(IIIl11){case 0x1:console[liil1i(0x143,'Q(K5')]('['+illlI1+liil1i(0x22f,'K02S')),$[liil1i(0x1c2,'$gJh')]=!![];return;case 0x3:$[liil1i(0x1be,'@!lh')]=illlI1;break;default:console[liil1i(0x135,'x!@b')]('['+illlI1+']['+IIIl11+liil1i(0x1c3,'[n3H')),$[liil1i(0x1f3,'a^S[')]=illlI1;break;}}}}if(!$[liil1i(0x1c0,'NwJg')]){IIIIIl['fix'](i11ill['tdhPk']),console['log'](IIIIIl[liil1i(0x229,'E533')]()),$['runEnd']=!![];return;}if($[liil1i(0x20f,'NwJg')])return{'runEnd':!![]};let i11ili='';await lllli(i11ill['bUQpt']);if(!$[liil1i(0x1f9,'A3HS')]&&i11ili){if(i11ill['siYnr'](i11ill[liil1i(0x1aa,'[csA')],i11ill[liil1i(0x147,'f0Tm')])){$['hasliveLotteryPane']=!![];const I1lIi1=[];let liiIIi='',lil11I=0x0;I1lIi1[liil1i(0x18b,'NwJg')]('【活动名称】：'+($[liil1i(0x167,'zlbd')][liil1i(0x1f8,'Yi(a')]||liil1i(0x166,'yqti'))),I1lIi1['push'](liil1i(0x14b,'&4b*')+$[liil1i(0x24d,'zlbd')]),I1lIi1['push']('【直播抽奖】：'+$[liil1i(0x13e,'24dL')]);const Iliii1=i11ili[liil1i(0x249,'HaV&')]||{};if(i11ill['pKnDq'](Object[liil1i(0x238,'q([5')](Iliii1)[liil1i(0x236,'x!@b')],0x0)){let iiilil='';liiIIi=Iliii1['rewardType']||'',lil11I=Iliii1[liil1i(0x257,'NwJg')]||Iliii1[liil1i(0x192,'c43]')]||0x0;lil11I&&(iiilil=rewardMap[liiIIi]);const iil1li=i11ill[liil1i(0x1d0,'dL6a')](String(lil11I),iiilil);I1lIi1[liil1i(0x1b4,'9IoP')](liil1i(0x23d,'E533')+iil1li),prize['push'](iil1li[liil1i(0x240,'5O7B')]('[','')['replace'](']',''));}const iIiIi=[...I1lIi1];iIiIi[iIiIi['length']-0x1]=iIiIi[i11ill[liil1i(0x187,'@!lh')](iIiIi[liil1i(0x182,'gpL7')],0x1)][liil1i(0x180,'D(EM')]('[','')[liil1i(0x162,'$gJh')](']','');const iil1ll=iIiIi[liil1i(0x233,'K02S')]('\x0a');console['log'](iil1ll),console['log']('');if(!run_Conf[liil1i(0x1c1,'n!Am')](liiIIi)){IIIIIl[liil1i(0x1e3,'D(EM')](liil1i(0x1da,'(7B[')),$[liil1i(0x20f,'NwJg')]=!![];return;}}else ilI1lI=IiiIll[IIlii];}if($['waitTime'])$[liil1i(0x1f0,'(bkz')]($[liil1i(0x25c,'9IoP')]);await i11ill['PslZz'](lllli,i11ill[liil1i(0x165,'rGYV')]);if($[liil1i(0x1e7,'&tMK')])$['wait']($[liil1i(0x17c,'l[u0')]);console[liil1i(0x1a5,'(7B[')](IIIIIl[liil1i(0x1de,'BiKL')]());function iil1l1(iIiIl,iiilii){const lI1lil=liil1i;try{switch(iIiIl){case i11ill[lI1lil(0x226,'$lQA')]:i11ill['DjSbt'](iiilii[lI1lil(0x1b5,'A3HS')],'0')&&i11ill[lI1lil(0x24a,'9IoP')](iiilii['subCode'],'0')&&iiilii['data']?lllll=iiilii[lI1lil(0x230,'&tMK')]:IIIIIl[lI1lil(0x241,'9p10')](i11ill[lI1lil(0x211,'rBgH')]);break;case lI1lil(0x254,'&tMK'):i11ill['DjSbt'](iiilii[lI1lil(0x246,'c43]')],'0')&&iiilii[lI1lil(0x141,'Yi(a')]==='0'&&iiilii['data']?i11ili=iiilii[lI1lil(0x24b,'&4b*')]:IIIIIl[lI1lil(0x202,'[csA')](i11ill[lI1lil(0x25a,'SS)%')]);break;case lI1lil(0x1c8,'Qssv'):i11ill[lI1lil(0x255,'(bkz')](iiilii['code'],'0')&&i11ill['DjSbt'](iiilii[lI1lil(0x22a,'$gJh')],'0')&&iiilii[lI1lil(0x1c7,'[csA')]?(['中奖'][lI1lil(0x1e5,'iD&f')](li1i1i=>iiilii[lI1lil(0x159,'rBgH')][lI1lil(0x189,'n!Am')][lI1lil(0x253,'A3HS')](li1i1i))&&(i11ill[lI1lil(0x21b,'Q(K5')](i11ill[lI1lil(0x23c,'Yi(a')],i11ill[lI1lil(0x137,'9IoP')])?iIli1I['outFlag']=!![]:IIIIIl[lI1lil(0x14c,'A3HS')](iiilii[lI1lil(0x1db,'GEE8')][lI1lil(0x1c6,'x!@b')]+'：'+prize)),['等级'][lI1lil(0x1d4,'gpL7')](illIiI=>iiilii['data']['rewardTitle'][lI1lil(0x228,'dL6a')](illIiI))&&IIIIIl[lI1lil(0x1b9,'UZ4^')](''+iiilii[lI1lil(0x16c,'9IoP')]['rewardTitle']),['擦肩'][lI1lil(0x1cf,'K02S')](lI1lli=>iiilii[lI1lil(0x1cb,'$lQA')][lI1lil(0x232,'Q(K5')]['includes'](lI1lli))&&IIIIIl['insert'](''+iiilii[lI1lil(0x1fb,'$gJh')][lI1lil(0x210,'GEE8')])):IIIIIl['fix'](lI1lil(0x13b,'Qssv'));break;}}catch(Ill1l){i11ill[lI1lil(0x1bb,'rBgH')]!==lI1lil(0x1d2,'x!@b')?console['log'](lI1lil(0x14d,'[csA')+iIiIl+'\x20请求响应\x20'+(Ill1l['message']||Ill1l)):(l1l11l[lI1lil(0x15f,'&tMK')](IilIil),l1iIi&&(l1iIl[lI1lil(0x21f,'x!@b')]=!![]));}}async function lllli(ii1iii){const i1l1iI=liil1i;if(i11ill[i1l1iI(0x20c,'gpL7')](i11ill[i1l1iI(0x1df,'f0Tm')],i11ill[i1l1iI(0x1ca,'Yi(a')])){if($[i1l1iI(0x194,'[csA')])return;let i11iil='',Ill1i=null,ii1iil=null,lllI1l=i1l1iI(0x160,'Qssv'),i11iii={};switch(ii1iii){case i11ill[i1l1iI(0x199,'K02S')]:i11iil=i1l1iI(0x1f4,'rGYV'),i11iii={'pageId':i11ill[i1l1iI(0x252,'A3HS')],'liveId':''['concat']($[i1l1iI(0x169,'GEE8')]||'')},ii1iil={'functionId':i11ill[i1l1iI(0x19b,'(bkz')]},Ill1i=common[i1l1iI(0x19a,'q([5')](await common[i1l1iI(0x172,'$lQA')](i11ill[i1l1iI(0x1d8,'GEE8')],i11iii));break;case i1l1iI(0x179,'GEE8'):i11iil=i11ill[i1l1iI(0x1b7,'QBD^')],i11iii={'lotteryId':''[i1l1iI(0x250,'&tMK')]($[i1l1iI(0x183,'$gJh')]||''),'pageId':i11ill[i1l1iI(0x1fd,'NwJg')],'shared':'1','liveId':''['concat']($['liveId']||'')},ii1iil={'functionId':i1l1iI(0x207,'f0Tm')},Ill1i=common[i1l1iI(0x217,'QBD^')](await common[i1l1iI(0x18a,'(bkz')]('liveLotteryPanelV1012',i11iii));break;case i11ill['aPfGY']:i11iil=i11ill[i1l1iI(0x173,'dL6a')],i11iii={'liveId':''['concat']($[i1l1iI(0x20b,'dL6a')]||''),'pageId':i1l1iI(0x222,'Yi(a'),'fansLevel':0x1,'eid':'','lotteryId':''['concat']($[i1l1iI(0x245,'&tMK')]||''),'plus':0x1,'token':'','nickName':IIIIIi},ii1iil={'functionId':i11ill[i1l1iI(0x1cc,'6hsT')]},Ill1i=common['queryStringToObject'](await common[i1l1iI(0x20a,'Qssv')]('liveDrawLotteryV1012',i11iii));break;default:console['log'](i1l1iI(0x242,'GEE8')+ii1iii);return;}const llI1Ii={'url':i11iil,'method':lllI1l,'headers':{'Accept':i11ill['tqOBA'],'Accept-Encoding':i11ill[i1l1iI(0x176,'rBgH')],'Accept-Language':i11ill['zebzF'],'Connection':i11ill[i1l1iI(0x251,'&tMK')],'Content-Type':'application/x-www-form-urlencoded','Cookie':IiI1I,'J-E-H':IIIl1l,'J-E-C':liiII1,'Sec-Fetch-Dest':'empty','Sec-Fetch-Mode':i11ill[i1l1iI(0x140,'q([5')],'Sec-Fetch-Site':i1l1iI(0x1a6,'9p10'),'User-Agent':IIIl1i,'x-referer-package':i1l1iI(0x231,'HaV&'),'x-rp-client':i11ill[i1l1iI(0x146,'E533')]},'params':ii1iil,'data':Ill1i,'timeout':0x7530};lllI1l===i1l1iI(0x15b,'Odxz')&&(i11ill[i1l1iI(0x1b3,'l[u0')]===i11ill[i1l1iI(0x1e9,'QBD^')]?IIli1I['fix'](i1l1iI(0x13b,'Qssv')):(delete llI1Ii[i1l1iI(0x19c,'q([5')],delete llI1Ii['headers'][i11ill[i1l1iI(0x21a,'7eNd')]]));const lllI1i=0x1;let li1i1l=0x0,II1i1=null,lI1lll=![];while(i11ill[i1l1iI(0x188,'[n3H')](li1i1l,lllI1i)){if('YxymF'==='YxymF'){const iil1lI=await common[i1l1iI(0x24c,'5O7B')](llI1Ii);if(!iil1lI[i1l1iI(0x1d5,'7eNd')]){II1i1=i1l1iI(0x1d6,'yqti')+ii1iii+'\x20请求失败\x20➜\x20'+iil1lI[i1l1iI(0x20d,'Yi(a')],li1i1l++;continue;}if(!iil1lI[i1l1iI(0x1f5,'iD&f')]){if(i11ill[i1l1iI(0x195,'qUno')](i1l1iI(0x1a1,'BiKL'),i11ill[i1l1iI(0x18d,'[n3H')])){II1i1=i1l1iI(0x22e,'zlbd')+ii1iii+i1l1iI(0x1bd,'HaV&'),li1i1l++;continue;}else{const li1i1I=i11ill[i1l1iI(0x1dc,'GEE8')](i1l1I,IiilIi);i11ill[i1l1iI(0x224,'D(EM')](li1i1I,0x0)&&(iii1Ii['waitTime']=li1i1I);}}i11ill[i1l1iI(0x1e0,'6hsT')](iil1l1,ii1iii,iil1lI[i1l1iI(0x150,'NwJg')]),lI1lll=![];break;}else iI1lll=l1lIll['data'];}i11ill[i1l1iI(0x174,'NwJg')](li1i1l,lllI1i)&&(i11ill[i1l1iI(0x19e,'zlbd')]!==i11ill['muYtC']?(console[i1l1iI(0x1ed,'SS)%')](II1i1),lI1lll&&(i11ill[i1l1iI(0x177,'[n3H')]===i11ill[i1l1iI(0x1b2,'iD&f')]?$['outFlag']=!![]:(['中奖'][i1l1iI(0x1f2,'@!lh')](lI1llI=>IiiIi1[i1l1iI(0x1fe,'(bkz')][i1l1iI(0x256,'E533')][i1l1iI(0x1e4,'K02S')](lI1llI))&&l1ii1['insert'](ii1ll[i1l1iI(0x159,'rBgH')]['rewardTitle']+'：'+IliI1l),['等级'][i1l1iI(0x1e1,'x!@b')](illIil=>lliiil[i1l1iI(0x19c,'q([5')][i1l1iI(0x1d9,'&4b*')][i1l1iI(0x221,'rGYV')](illIil))&&lliiii[i1l1iI(0x190,'&tMK')](''+IliI1i[i1l1iI(0x216,'D(EM')]['rewardTitle']),['擦肩'][i1l1iI(0x23f,'Qssv')](Ill1I=>ll1ii['data']['rewardTitle'][i1l1iI(0x1ff,'(7B[')](Ill1I))&&IIli11['insert'](''+IllIII['data'][i1l1iI(0x19d,'BiKL')])))):(delete l1iil['data'],delete ii1l1['headers'][i1l1iI(0x18c,'&tMK')]));}else lilIl1[i1l1iI(0x144,'&4b*')](i1l1ii[i1l1iI(0x136,'Qssv')],i11ill[i1l1iI(0x16b,'[csA')]),i1l1['exit'](0x1);}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t,e){"undefined"!=typeof process&&JSON.stringify(process.env).indexOf("GITHUB")>-1&&process.exit(0);class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,i)=>{s.call(this,t,(t,s,r)=>{t?i(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}isNode(){return"undefined"!=typeof module&&!!module.exports}isQuanX(){return"undefined"!=typeof $task}isSurge(){return"undefined"!=typeof $httpClient&&"undefined"==typeof $loon}isLoon(){return"undefined"!=typeof $loon}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const i=this.getdata(t);if(i)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,i)=>e(i))})}runScript(t,e){return new Promise(s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[o,h]=i.split("@"),n={url:`http://${h}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":o,Accept:"*/*"}};this.post(n,(t,e,i)=>s(i))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):i?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of i)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,r]=/^@(.*?)\.(.*?)$/.exec(e),o=this.getval(i),h=i?"null"===o?null:o||"{}":"{}";try{const e=JSON.parse(h);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),i)}catch(e){const o={};this.lodash_set(o,r,t),s=this.setval(JSON.stringify(o),i)}}else s=this.setval(t,e);return s}getval(t){return this.isSurge()||this.isLoon()?$persistentStore.read(t):this.isQuanX()?$prefs.valueForKey(t):this.isNode()?(this.data=this.loaddata(),this.data[t]):this.data&&this.data[t]||null}setval(t,e){return this.isSurge()||this.isLoon()?$persistentStore.write(t,e):this.isQuanX()?$prefs.setValueForKey(t,e):this.isNode()?(this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0):this.data&&this.data[e]||null}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"]),this.isSurge()||this.isLoon()?(this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)})):this.isQuanX()?(this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t))):this.isNode()&&(this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)}))}post(t,e=(()=>{})){if(t.body&&t.headers&&!t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded"),t.headers&&delete t.headers["Content-Length"],this.isSurge()||this.isLoon())this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.post(t,(t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status),e(t,s,i)});else if(this.isQuanX())t.method="POST",this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>e(t));else if(this.isNode()){this.initGotEnv(t);const{url:s,...i}=t;this.got.post(s,i).then(t=>{const{statusCode:s,statusCode:i,headers:r,body:o}=t;e(null,{status:s,statusCode:i,headers:r,body:o},o)},t=>{const{message:s,response:i}=t;e(s,i,i&&i.body)})}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}msg(e=t,s="",i="",r){const o=t=>{if(!t)return t;if("string"==typeof t)return this.isLoon()?t:this.isQuanX()?{"open-url":t}:this.isSurge()?{url:t}:void 0;if("object"==typeof t){if(this.isLoon()){let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}if(this.isQuanX()){let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl;return{"open-url":e,"media-url":s}}if(this.isSurge()){let e=t.url||t.openUrl||t["open-url"];return{url:e}}}};if(this.isMute||(this.isSurge()||this.isLoon()?$notification.post(e,s,i,o(r)):this.isQuanX()&&$notify(e,s,i,o(r))),!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){const s=!this.isSurge()&&!this.isQuanX()&&!this.isLoon();s?this.log("",`❗️${this.name}, 错误!`,t.stack):this.log("",`❗️${this.name}, 错误!`,t)}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;this.log("",`🔔${this.name}, 结束! 🕛 ${s} 秒`),this.log(),(this.isSurge()||this.isQuanX()||this.isLoon())&&$done(t)}}(t,e)}
