/*
活动名称：京东看春晚助力
环境变量：JD_PARTY_INVITE_CODE // 指定助力码

自行控制助力上限

cron:1 1 1 1 *

*/

const $ = new Env('京东看春晚助力')
var iｉl='jsjiami.com.v7';const l1l1i1=iii1II;(function(II11ll,liiI1I,ililII,lI1II1,i1ilII,iIIii1,IllIi1){return II11ll=II11ll>>0x2,iIIii1='hs',IllIi1='hs',function(lilIII,Ii1ilI,II11i1,iliIil,iliIii){const lill1l=iii1II;iliIil='tfi',iIIii1=iliIil+iIIii1,iliIii='up',IllIi1+=iliIii,iIIii1=II11i1(iIIii1),IllIi1=II11i1(IllIi1),II11i1=0x0;const lill1i=lilIII();while(!![]&&--lI1II1+Ii1ilI){try{iliIil=parseInt(lill1l(0x14a,'Vnby'))/0x1*(-parseInt(lill1l(0xcc,'RLJb'))/0x2)+-parseInt(lill1l(0x107,'ri0e'))/0x3+-parseInt(lill1l(0x80,'RLJb'))/0x4+parseInt(lill1l(0xa5,'lfs9'))/0x5+parseInt(lill1l(0x13c,'i9Os'))/0x6+-parseInt(lill1l(0x7c,'ulc9'))/0x7*(parseInt(lill1l(0xe6,'1Ytg'))/0x8)+-parseInt(lill1l(0x163,'(7O1'))/0x9*(-parseInt(lill1l(0x129,'[0wA'))/0xa);}catch(il1li){iliIil=II11i1;}finally{iliIii=lill1i[iIIii1]();if(II11ll<=lI1II1)II11i1?i1ilII?iliIil=iliIii:i1ilII=iliIii:II11i1=iliIii;else{if(II11i1==i1ilII['replace'](/[NWPYdbqSwADChJLVRgHtp=]/g,'')){if(iliIil===Ii1ilI){lill1i['un'+iIIii1](iliIii);break;}lill1i[IllIi1](iliIii);}}}}}(ililII,liiI1I,function(iIIill,iilii,Ill11i,iilil,Ill11l,il1ll,i1ilIi){return iilii='\x73\x70\x6c\x69\x74',iIIill=arguments[0x0],iIIill=iIIill[iilii](''),Ill11i=`\x72\x65\x76\x65\x72\x73\x65`,iIIill=iIIill[Ill11i]('\x76'),iilil=`\x6a\x6f\x69\x6e`,(0x157d7a,iIIill[iilil](''));});}(0x2f4,0x84a63,Iii11l,0xbf),Iii11l)&&(iｉl=0x901);const iil1ii=require('./jdCookie'),IlIlli=require(l1l1i1(0x7d,'1Jl9')),il1i1i=require(l1l1i1(0x95,'mBLl')),{H5st:lil111,jsTk:i11ilI}=require(l1l1i1(0x131,'ri0e')),ii1ii1=![];function iii1II(_0x49b6ad,_0x2a8dc5){const _0x38e439=Iii11l();return iii1II=function(_0x3e74f8,_0x2e9edf){_0x3e74f8=_0x3e74f8-0x77;let _0x1173df=_0x38e439[_0x3e74f8];if(iii1II['CuvjCW']===undefined){var _0x175336=function(_0x1d1667){const _0x32670e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x22e4e2='',_0xf4370c='';for(let _0x4f3df6=0x0,_0x47dbd1,_0x8b822d,_0x34e021=0x0;_0x8b822d=_0x1d1667['charAt'](_0x34e021++);~_0x8b822d&&(_0x47dbd1=_0x4f3df6%0x4?_0x47dbd1*0x40+_0x8b822d:_0x8b822d,_0x4f3df6++%0x4)?_0x22e4e2+=String['fromCharCode'](0xff&_0x47dbd1>>(-0x2*_0x4f3df6&0x6)):0x0){_0x8b822d=_0x32670e['indexOf'](_0x8b822d);}for(let _0x3ce185=0x0,_0x2cc4cd=_0x22e4e2['length'];_0x3ce185<_0x2cc4cd;_0x3ce185++){_0xf4370c+='%'+('00'+_0x22e4e2['charCodeAt'](_0x3ce185)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xf4370c);};const _0x41afdc=function(_0x4bad16,_0x57f3df){let _0x12532b=[],_0x253f44=0x0,_0x1885eb,_0x1a7018='';_0x4bad16=_0x175336(_0x4bad16);let _0x2a44bf;for(_0x2a44bf=0x0;_0x2a44bf<0x100;_0x2a44bf++){_0x12532b[_0x2a44bf]=_0x2a44bf;}for(_0x2a44bf=0x0;_0x2a44bf<0x100;_0x2a44bf++){_0x253f44=(_0x253f44+_0x12532b[_0x2a44bf]+_0x57f3df['charCodeAt'](_0x2a44bf%_0x57f3df['length']))%0x100,_0x1885eb=_0x12532b[_0x2a44bf],_0x12532b[_0x2a44bf]=_0x12532b[_0x253f44],_0x12532b[_0x253f44]=_0x1885eb;}_0x2a44bf=0x0,_0x253f44=0x0;for(let _0x554b97=0x0;_0x554b97<_0x4bad16['length'];_0x554b97++){_0x2a44bf=(_0x2a44bf+0x1)%0x100,_0x253f44=(_0x253f44+_0x12532b[_0x2a44bf])%0x100,_0x1885eb=_0x12532b[_0x2a44bf],_0x12532b[_0x2a44bf]=_0x12532b[_0x253f44],_0x12532b[_0x253f44]=_0x1885eb,_0x1a7018+=String['fromCharCode'](_0x4bad16['charCodeAt'](_0x554b97)^_0x12532b[(_0x12532b[_0x2a44bf]+_0x12532b[_0x253f44])%0x100]);}return _0x1a7018;};iii1II['UCFjEA']=_0x41afdc,_0x49b6ad=arguments,iii1II['CuvjCW']=!![];}const _0x45e069=_0x38e439[0x0],_0x449fa8=_0x3e74f8+_0x45e069,_0xf928b2=_0x49b6ad[_0x449fa8];return!_0xf928b2?(iii1II['foBsxV']===undefined&&(iii1II['foBsxV']=!![]),_0x1173df=iii1II['UCFjEA'](_0x1173df,_0x2e9edf),_0x49b6ad[_0x449fa8]=_0x1173df):_0x1173df=_0xf928b2,_0x1173df;},iii1II(_0x49b6ad,_0x2a8dc5);}function Iii11l(){const IliIIl=(function(){return[...[iｉl,'CAjDsDjVSYiqbLaJwmi.cWoHHmgp.vP7NRSdhCqt==','gSk8WOhcIGG','eK0gW6tcVq','vmk/W5NcQru','W6SbW7GoW64','WOxcRmoSWRTxW5BdIsBdGMa','W7GJWQq','W69rlCoAWOa','egpdRcCy','WQRcLmoxW6zFW7O4W6tdINe','WQPhWP7dUsee','DmkEWP1oq8oDecz/WRi','lmkujW','smkpDvJcGG','B0atW7xcKq','4PYfWOBMN73OG7BMR4dNOlhLP4FNKj1C','iYtcO1BcKG','W4NcGmo0idyu','W51NkSoIwq','iM0IW7ldHdhcVcpcRSk0WOTYWOO0WPPqWQ8QyhK8W4PfW53dOuRdH0T3WRhcHtLU','gSo9B10','eZ9jWOFdS1JdUmkaWPBcRmoQ','hHlcL8o/yxG','WRTaWOHEWQZdN8kLW5BdNSobW7G','WPnjWOxdIJq','W6uAW54mW6q','WP4Mka','WRpcJX8vW6q','WP0Hab7cUq','wgZcSCo5WOK','lmkfWO8fWOZdLG','vwTfWQf4WRf7W7GWmK/cPmkjtqGs','W7ZcISkWW7xdTW','DbNcRW','iYdcMeRcKa','vsCDsCo0nSo1W7JcQmkXtGq','WQRdGIldRsJcUmoukXC','WOBcUCoSWRnuW4ldPchdJW','W5jhW7BcTNu','W7OfW54ZW7GSW5ZcUmoAnq','W6KCW6SZW48','rIKbw8oKdG','BCooideVsmolW5WvbmkWmW','WRKKW6nMW6SpW4ODW4y','WRlcPmkF','4PY5W7VMN6dNNkVORPVMSkah','WQyghXpcOG','6lwE5y6m5PsB5PEd','cZbVWQv4WRm','W452wGf1mmkA5B2v5AwB44cZ5lMf5lQC6lAo5y2C','W7ucW5a','WOTVCXPG','ESkvWP8','WP3dGmkjWOu','i8kiWQpcPva','nHRcPW','BKFdUcddUCo8oSk0WOiTeCkF','lmkDE3W','WPqGnW','gJfeWR1+WQ9lWRGgmG','WQnhdCoMWPS','WRmbW7jbW58','WRzVWPJdJtq','W7yfW54','WRtdKYpdTYFcUmoy','WPFdJSkkWOu','WP9/BqjeWQxdOa','CqBdH2Dn','W789W7GeW7m','cW7cMmoOyxKe','n8kWWQyFWPm','WOy+ha7cMq','wbRdPMD2','44gR5O6u56sk44oe6k+M5yAv6i6/5yYbitHcWQRcJfS','qSkYumk0Da','qxKjW5/cSq','ttiBtCo+u8kZWRNcRSkQvu9YDmkPn8kMySoUtqL3lCo3oCkBWQXPdadcUuLYWQj9kdSMnSoCWPtdOryVW4xdTMxdQCo4EH3dTmoEW47dM8kliIBdO8oRpJNdUCoJWOhdGe7dPmkdkXSa','W54dW4emW5K','lfFdR8oalG','uWlcR8o1wqGH','cItcK1X+','EYTKWRBcUKBdIZBcJCky','eIPuWRbP','WQefnGpcVa','FLJcSSoqWRddQSkJW43dLCoW','W4r7Fx/dUCkrWR9fWQ/dVvON','WQG5W6TcW7yp','W6pcGvZcIJa','WQGZfW','W7NcNCoQiCofW6jP','WQFcQCkOW6vS','d8kZWRNcIW4','xCk0WRVdIbq'],...(function(){return[...['WRddMcBdRtlcUSo+iGOe','Amk9W47cSdr4W4pdRvBcLKHke8koamkRW73dNsv2dMyQxCoaW4VcOexdKX7dKqbPWP3cSYSAgCo6ySksW4ddPSoQW6mwWQPUexVdL8oTfgldMSk7sZVdJszFjLGXW5msyaRdRfLDmuNcVSkI','W5noW63cLwH1W7dcHdBdPmkxbdddQq','WOSIW4G','wHFcI8o1WQa','gmk+WRNcVq0fqG','W7JcL8o+','xSknvw/cGG','mSkPWOFcGu8','WPNcOSo5','eSoZFa','FCkLuCo2cCkIruq','W77cNmokfam','i04BW67cNa','WR3cGdGTW5uoW4m','emk3EK1l','vbRdTfjR','WP8NW7/dKv0','kSojWQv4','n8ktDq','cW/cICoIAM0ExmoQ','W67dGmodW4P7wwRdQ8oVca','j3WLW7hcN3NdTG','W794mSo8WP4','W6ZcV1u','WQymah8f','WPv/AJjkWQ3dRHOvemoSEZtdSG','WQTwWP/dPsmxk8ksWQC','WRVcS8kreG','e8klWOSzWQG','jNyX','W73cP8kAW5hdR1O','4PYXW6hMTOdORlNOV7FPGQ3MGRpKU53dQH4CW6ZINO9y5P6A5yIl54UI5Okn5QYQ5BUGjmoDAsC','obZcULxcU8kV','dCoVpCoXW5T7WQPJBIi','WRRdL8oSjSonW6L/m8oNr0SlAHfRW6JdUwhdLtzDW7fiWOyvW51i','EX7cQCoIWRa9','W4xdPSkw','W6JcJMBcThhdPSklccieW6dcLZS','W4FcL8oqW5FdMmk8D8ojjSoxFCk0xq','nCkDF20','uGJcUW','h8oUbmkXjmkzueuckG','ACkKtmkuW7m','WQ3cO8oOWQHQ','WQ9dWOtdUa','ACktWQFdVG','vCk6W5/cSGKJWOhcPW','W6JcOKtcQtvAvhldGmoi','m8oZyvuzdmkJW6RcQLCAbCoVWQxdVNdcK8k1c8osW4r8W63dLt/cKZ7cKcZcGqihWRTpWRn2gCocWQzgpmkKAW8wpSkqbCk3W5jmW4tdNCoRW7rKWQXvia3cMCogErhdS8kLf2RcLuldUCkYWOxcUWpcO8oAWQtcQ8o9iSkKhWjIW4ldNCkcx2tdQ8onwLpcV3RdNCk3WPHoW6hcGfCoB2xcJSoHcKrpW6T8WPldKCkph1JdI8ovCbrPW7VdPSorWOFdHMnWWOvlW490WPibW6VdSNpcM2OfWP/dHgNcQmo1tSkGtW7dG8okt09G','yCkDWRq','nYRcG2lcGa','W63cU8koW5NdSLK','keFdUSkJW4v8bYldV2RdRmoKW7ldRrddK8o6W44nW5tdUvVdMCoqAxnVke/cSYCFex1RohlcKmoeEbTJWPatfmkDmSo3WPVdHHBdPmokabe7De0mDaRcLa','fcpcOh/cKa','tcGzvmo5dmoFW7NcUSk9','v8kYFSk3W5LgWRC','WPxdImkC','WPWaW6ndW48','WOxdHSo7gsWFW5xdL8o/WOO5WRyKa1tdL8o6WPJdK8klW74CW7S','naxcSgzk','WQm+W6DMW7enW6auW5VcSW','W7aTWRFdOq','rCkizf3cPa','rCkZr8o3jSkKtq','WPJcIH0uW64','W7BcKCoJeColW6fP','WR8NW7zCW50','W4tdTCkOW6OnWPZcUWldUMtdPL3dJW','rSk8WOpdSbe','WOD0pf3dNmkoDq','W5LoW6RcQMz1W7W','fYTx','WPnLWQBdOWi','W40fW4WSW64','dMdcLrm3pSkdWRTzW6VcQCobWQi','W6pcVCkt','4P2WW7VLIApLIzxMIBZLI70hda','y8kuySkDW6K','FSkcWQhdTG5zWRRdKSkc','D8kuWO8xbG','A8ovW4XdW5xcM3LKemoIW5ldJW','y8kbW5tcGGy','WQTFlK/dUW','WRpcQSki','W6dORiFMSRJLPRxOTjVcUokFGCkO','W4TmimovuaC','WOj0lKRdMmkByW','ySksA8oubSkrFhGKlSoPW4pdUrbmna5dWOaY','WRPnWOldOcGrla','kHtcSMZcSCkxl8ksWPK3l8kJ','rxGiW5NcSf7dRCk2WRxcTSog','44cQ5OYh56s344ov6k2p5ywP6i2L5y+rvaddGSkHkNO','W55iimoKFG'],...(function(){return['bSkIWO/cQWS','BSk5WQLkwa','fIfdWQzWWRPT','sg4vW5FcT0i','W63cM8kZW6hdQG','WQDilCoLW77cKh4','WPNcQmoWWR1oW40','W78eW48FW747','W6xcN1RcIq8','efhdMSowcCoiWOO','mbNcRMZcSa','WPvGDWejW6ldOrywkSoSyYtcUXRcLrK','D8kwwf3cHSkdW4Spix/cUxngBqtdJCocW6OHWRO8vLm','bmoRwfu2','WOu6W5jvW4S','WRPkWOFdRGK','WPjWWQldHJG','WRZdPSkWWOxcHW','deSBW5lcNW','qImBCmoOgSoVW7FcUCk9','W6VdTt7dPG7cLCoN','oqFcPxNcVmkT','W7XmeSopWPG','5P2u6iYR5y+n5yIm5Psf5OYoW67ORllPHzlML4NOV7ROOAK','rdyFuCoKcSo9W6lcT8k3ve5ND8k0jmo/lmoNt1r3yCoUj8oyWQHKgWBcQ0K5','WRvhWP7dVYWxjW','fmkGWQBcIqtdMmoMWPNcO1LC','WRtcHd8/','ssKi','8ko7UCo6','W6PJo8o4WOG','W59enG','5P6E6i6C5y2p5yUP5Pw35O28WRxORj3PHQJMLkdOVkBOOlW','bbRcL3vq','6i2c5yYB5yI35yMb56c7776/','WQ3cNmkDbCkf','m8oqWRHMW6K','W7WvW4GAW7K','WO4JW5NdReT5WQO','mHxcVG','W47dQSkDW7mOdJ4','sdFdJ0bSyG','BdNcT2/cU8oqW40','FUIUJEAYM+wKVoI3LSk64PYlW5/MLQ/LKBZLUP7MLjlMJ64','W5zcW6pcLhr1','W7lcVSoRnry','BCoqW49cWPldLLLKbSor','omktDM0','W5vckq','BCkSW4NcSYyLWOK','W5lcNKJcUGi','FdZcRmodWPC','BmkwxKtcM8oEWO1gka','eCosWRLkW6S','fJDx','zMOzW5xcR3xdRmk3WO3cNmoeW4lcLSkOu14susbuWPZcHIJcI3VcLmowxCobW7K','W7TzpmocWQS','gmoWswKD','d0xdNmoKhmo2WOrdl8kUCZS','vMu/W5FcTa','oSoQF1ed','W5zVa8ogWRC','FCklvMdcHSoE','zCkKW4RcTd4','WOKbW7RdS1C','W4FcHSoP','ASkhzmooaG','4PYxW5ZMNlJOG7xMRBRNOjtLPPFNKRDH','WPRdH8k+q3u','W6tcMCodemo8','WQXnWRJdVd0vmmk3WR9XWQm','f8kwWR7cGcC','4P2+W7BLH7lLPOpLSBBNUkKgd1vT','W6ZcQuhcSYbyCG','W7LGWQi9W7CCW4uCW53cPW','WQPxWOpdIsmu','hmoKdmk8DSo3xhqtfmoQW50','W6JcHglcSalcH8oLoYiP','W6aJWPBdSeRdO2CbzCkYsW','tNeaW6yKW6roWRawfuVcGW','8y27U8kX','W7VcJCoTfmoiW6rR','W74oW5SPW60UW7O','nCkfWPKaW43dG1nQeSof','W74rW4SCW7NdNSkH','WO57WPZdRrG','W7ucW4y7W6aLW6y','W5vyW6RcShrMW7ZcJIVdPCkB','WO9PjLO','mHfCWOnK','W59biCoEtq'];}())];}())];}());Iii11l=function(){return IliIIl;};return Iii11l();};$[l1l1i1(0x11d,'chH5')]=process[l1l1i1(0x151,'Pz[f')][l1l1i1(0xb2,'oYO4')]||'';let llllI=l1l1i1(0x8f,'P^!i'),lllil1='0123456789',iil1il='qwertyuiopasdfghjklzxcvbnm',ilil1I=l1l1i1(0xaa,'chH5')+Iliii1(0x6f,lllil1+llllI)[l1l1i1(0xfe,'P@mI')](),i11il1=l1l1i1(0x15c,'oYO4')+Iliii1(0x7b,lllil1+llllI)[l1l1i1(0x106,'o0wd')](),ii1iiI='';const lllilI=Object['keys'](iil1ii)[l1l1i1(0xae,'sQ2d')](iIiIi=>iil1ii[iIiIi])[l1l1i1(0x128,'mUl0')](iil1ll=>iil1ll);!lllilI[0x0]&&($[l1l1i1(0x187,'mrc4')]($[l1l1i1(0x82,'i9Os')],l1l1i1(0xb6,'ulc9')),process[l1l1i1(0x18b,'sQ2d')](0x1));!(async()=>{const i1iiI=l1l1i1,iiilil={'yUXRX':function(iil1li,lillIl){return iil1li(lillIl);},'MhiVU':i1iiI(0x125,'(7O1'),'WmYuw':i1iiI(0x7a,'LLmv'),'bMnJq':function(iIiIl,iiilii,li1i1i){return iIiIl(iiilii,li1i1i);},'WIvSM':function(IlIli1,illIiI){return IlIli1===illIiI;},'FRMPa':i1iiI(0xdc,'@0Pa'),'rnDgw':i1iiI(0x100,'oYO4'),'CSwaP':function(lI1lli,Ill1l){return lI1lli<Ill1l;},'Zoide':function(llI1Il,ii1iii){return llI1Il===ii1iii;},'khKfS':i1iiI(0x16c,'E2Qk'),'EnbRy':function(i11iil,Ill1i){return i11iil+Ill1i;},'iWMlb':function(ii1iil,lllI1l){return ii1iil(lllI1l);},'yumkE':i1iiI(0x142,'ri0e'),'zhsEb':function(i11iii,llI1Ii,lllI1i,li1i1l){return i11iii(llI1Ii,lllI1i,li1i1l);},'nMuAy':i1iiI(0x15e,'f9&h')};$['assistedNum']=0x0,authorCodeList=await iiilil[i1iiI(0x134,'Vnby')](liiIIi,iiilil[i1iiI(0x15f,'Pz[f')]);authorCodeList?(console[i1iiI(0xf9,'mBLl')](iiilil[i1iiI(0x11f,'fzru')]),$[i1iiI(0x14d,'ri0e')]=authorCodeList[iiilil[i1iiI(0x169,'mrc4')](lil11I,0x0,authorCodeList['length'])]):iiilil['WIvSM'](iiilil[i1iiI(0xca,'(7O1')],i1iiI(0xb8,'6m)i'))?(IiiIli[i1iiI(0xdf,'Q(i[')]('❌\x20'+iillli[i1iiI(0x168,'e6^N')]),I1l1Ii[i1iiI(0x16b,'1Jl9')]['fix'](I1i11i[i1iiI(0x123,'mBLl')])):console[i1iiI(0x178,'oZil')](iiilil[i1iiI(0xf3,'u5c1')]);IlIlli[i1iiI(0x13b,'f9&h')]({'title':$[i1iiI(0x147,'!yt4')]});for(let lI1lll=0x0;iiilil['CSwaP'](lI1lll,lllilI[i1iiI(0xbe,'oZil')]);lI1lll++){if(iiilil['Zoide']('SaRLg',iiilil['khKfS']))ll1iI[i1iiI(0x13e,'sQ2d')]('❌\x20'+iI1lll[i1iiI(0x101,'mrc4')]),l1lIll[i1iiI(0x174,'6m)i')][i1iiI(0x7f,')hCZ')](I1l1II[i1iiI(0x17d,'63Gh')]);else{$['index']=iiilil['EnbRy'](lI1lll,0x1),ii1iiI=lllilI[lI1lll],il1i1i['setCookie'](ii1iiI),$[i1iiI(0x17a,'oYO4')]=iiilil[i1iiI(0x17c,'(7O1')](decodeURIComponent,il1i1i[i1iiI(0x189,'eSaA')](ii1iiI,iiilil[i1iiI(0x145,'eSaA')])),$['UA']=il1i1i[i1iiI(0xb7,'#H7r')]($['UserName']),$[i1iiI(0x161,'OxVQ')]=IlIlli[i1iiI(0xcd,'Vnby')]($[i1iiI(0x12b,'[0wA')],$[i1iiI(0x89,'wUOO')]),$['nickName']='',console[i1iiI(0xd4,'f9&h')](i1iiI(0x143,'H#Oc')+$[i1iiI(0x12b,'[0wA')]+'】'+($['nickName']||$['UserName'])+'******\x0a'),{eid:$['eid'],jsToken:$['jsToken']}=await iiilil[i1iiI(0x16d,'6m)i')](i11ilI,$['UA'],iiilil[i1iiI(0x150,'P@mI')],i1iiI(0x11b,'E2Qk')),await ilil11(),il1i1i['unsetCookie']();if($[i1iiI(0x103,'P@mI')])break;await $[i1iiI(0x14b,'i9Os')](0x3e8);}}ii1ii1&&IlIlli[i1iiI(0xcb,'f9&h')]()&&(IlIlli['updateContent'](IlIlli['content']+'\x0a'),await IlIlli['push']());})()['catch'](iil1lI=>$[l1l1i1(0xbf,'Pz[f')](iil1lI))[l1l1i1(0x10e,'Pz[f')](()=>$[l1l1i1(0x153,'!yt4')]());async function ilil11(){const i1ilIl=l1l1i1,iiiliI={'ANaaF':function(illIii,ii1il1){return illIii===ii1il1;},'XtnAH':i1ilIl(0xb3,'P@mI'),'dJdSf':function(lI1llI,illIil){return lI1llI!==illIil;},'axgps':i1ilIl(0x9b,'63Gh'),'twSHV':function(Ill1I,i11iiI){return Ill1I===i11iiI;},'SRzzC':i1ilIl(0x114,'(7O1'),'iPZos':function(lIli11,lllI1I){return lIli11==lllI1I;},'KKhER':function(lillI1,IlIlii){return lillI1(IlIlii);},'KPfCN':i1ilIl(0xf2,'Fr2$'),'flRUh':'⏺️\x20账号[1]默认去助力作者','MkwiH':i1ilIl(0xf0,'!ogM')},li1i1I=await il1i1i[i1ilIl(0x171,'!cg^')](ii1iiI);if(!li1i1I&&iiiliI[i1ilIl(0xad,'Ni@O')](typeof li1i1I,iiiliI[i1ilIl(0xed,'@0Pa')])){if(iiiliI[i1ilIl(0x124,'#H7r')](i1ilIl(0xf5,'!ogM'),iiiliI[i1ilIl(0x186,'!ogM')]))Iliill[i1ilIl(0x78,'(7O1')]('❓'+IIII11+'\x20'+i1illi[i1ilIl(0xec,'fzru')](i1illl));else{console['log'](i1ilIl(0x141,'mUl0'));return;}}try{iiiliI[i1ilIl(0x159,'JMiU')](iiiliI['SRzzC'],iiiliI[i1ilIl(0xea,'mrc4')])?!$[i1ilIl(0x8a,'mrc4')]?iiiliI[i1ilIl(0x8d,'Q(i[')]($['index'],0x1)?(await iiiliI['KKhER'](I1lIi1,iiiliI[i1ilIl(0x155,'lfs9')]),await $['wait'](0x7d0),console[i1ilIl(0x179,'Gkv1')](iiiliI[i1ilIl(0xf1,'Gkv1')]),await iiiliI[i1ilIl(0x120,'u5c1')](illlI1,$[i1ilIl(0x166,'1l[c')])):await iiiliI[i1ilIl(0x17e,'i9Os')](illlI1,$['inviteCode']):iiiliI[i1ilIl(0x158,'1Ytg')]($[i1ilIl(0x164,'ri0e')],0x1)?(console[i1ilIl(0x172,'&$8z')](iiiliI['flRUh']),await iiiliI['KKhER'](illlI1,$['authorCode'])):await illlI1($[i1ilIl(0x139,'Pz[f')]):I1iIi1={...lliil1,...IIllI};}catch(iiillI){iiiliI[i1ilIl(0xeb,'P^!i')](i1ilIl(0xf0,'!ogM'),iiiliI[i1ilIl(0x77,'1Ytg')])?(l1l1II['log'](Iil1I1[i1ilIl(0xd1,'P@mI')]),Ii1iII[i1ilIl(0x154,'eSaA')][i1ilIl(0x144,'Pz[f')](l1i11I[i1ilIl(0xba,'ri0e')])):console[i1ilIl(0x133,'P^!i')](iiillI[i1ilIl(0x92,'ulc9')]);}}async function illlI1(l1iIII){const llI11I=l1l1i1,llI1I1={'SLyEs':'party_assist'};$[llI11I(0xde,'&$8z')]=l1iIII,await I1lIi1(llI1I1[llI11I(0x165,'JMiU')]),await $['wait'](0x7d0);}async function IIIl11(IlIlil,lIli1I){const Il1i11=l1l1i1,II1il={'paZBX':function(lllI11,I1lIll){return lllI11+I1lIll;},'cHnBA':function(I1lIli,II1ii){return I1lIli-II1ii;},'UuDyF':Il1i11(0x135,'f9&h'),'AqvEr':function(IIIIII,lillII){return IIIIII===lillII;},'BmTtr':function(ii1ilI,lI1ll1){return ii1ilI!==lI1ll1;},'XeLOX':Il1i11(0xfa,'oYO4'),'VPrLJ':'party_assist','xjPTb':function(iIiI1,liil1I){return iIiI1===liil1I;},'cjTKP':function(i11ii1,IlIliI){return i11ii1!==IlIliI;},'AtpMJ':Il1i11(0x12f,'1l[c'),'GaQIU':'ulwSC','PFhWt':Il1i11(0x113,'6m)i'),'bMtNK':'CVyAQ'};try{switch(IlIlil){case II1il[Il1i11(0x17b,'mBLl')]:if(II1il[Il1i11(0xa4,'[0wA')](lIli1I['code'],0x0)&&lIli1I[Il1i11(0x88,'QADH')]){const l1iII1=lIli1I?.[Il1i11(0x126,'Gkv1')];if(l1iII1[Il1i11(0x9c,'1Jl9')]===0x0&&l1iII1['result'])II1il['BmTtr']('BQPJE',II1il['XeLOX'])?li1Ii[Il1i11(0x175,'1Jl9')]('❓'+Iliiii+'\x20'+i1illI[Il1i11(0x13d,'e6^N')](i1IIl)):($[Il1i11(0x97,'e6^N')]=l1iII1[Il1i11(0x130,'1Ytg')][Il1i11(0x91,'f9&h')],console[Il1i11(0x8c,'QADH')](Il1i11(0xda,'oZil')+$[Il1i11(0x16f,'RLJb')]));else l1iII1[Il1i11(0xf6,'fzru')]?(console[Il1i11(0x12c,'JMiU')](l1iII1[Il1i11(0x7b,'Vnby')]),$['message'][Il1i11(0xd7,'#H7r')](l1iII1[Il1i11(0x8e,'9(Bg')])):console['log']('❓'+IlIlil+'\x20'+JSON[Il1i11(0x183,'mUl0')](lIli1I));}else lIli1I['message']?(console['log'](lIli1I[Il1i11(0xd1,'P@mI')]),$['message'][Il1i11(0x14c,'JMiU')](lIli1I[Il1i11(0xa0,'Ni@O')])):console[Il1i11(0x83,'OxVQ')]('❓'+IlIlil+'\x20'+JSON[Il1i11(0x18a,'P@mI')](lIli1I));break;case II1il[Il1i11(0x94,'e6^N')]:if(II1il[Il1i11(0x116,'Pz[f')](lIli1I[Il1i11(0xe7,'i9Os')],0x0)&&lIli1I['data']){const lIli1i=lIli1I?.[Il1i11(0xd3,'63Gh')];if(II1il[Il1i11(0x180,'&$8z')](lIli1i['bizCode'],0x0)&&lIli1i[Il1i11(0x11c,'P@mI')])$[Il1i11(0xb5,'u5c1')]+=0x1,console[Il1i11(0x149,'Vnby')]('✅\x20助力成功\x20['+$['assistedNum']+']');else lIli1i[Il1i11(0xe4,'!cg^')]?(console[Il1i11(0x8c,'QADH')]('❌\x20'+lIli1i['bizMsg']),$[Il1i11(0x185,'(7O1')][Il1i11(0x144,'Pz[f')](lIli1i[Il1i11(0x7b,'Vnby')])):II1il[Il1i11(0x12d,'63Gh')]('GAwAV',II1il['AtpMJ'])?lIII1l['log'](Il1i11(0xcf,'Gkv1')):console[Il1i11(0x175,'1Jl9')]('❓'+IlIlil+'\x20'+JSON['stringify'](lIli1I));}else{if(lIli1I[Il1i11(0xa1,'!cg^')]){if(II1il[Il1i11(0x14e,'T9RD')](II1il['GaQIU'],'UsUoX'))console['log']('❌\x20'+lIli1I['message']),$[Il1i11(0x9a,'oYO4')]['fix'](lIli1I['message']);else return II1il[Il1i11(0xfd,'1Jl9')](li1[Il1i11(0x112,'#H7r')](illIl1[Il1i11(0xb0,'#H7r')]()*II1il[Il1i11(0xac,'wUOO')](l1llII,IilIll)),lI11Ii);}else console['log']('❓'+IlIlil+'\x20'+JSON['stringify'](lIli1I));}break;}}catch(ii1ill){II1il[Il1i11(0x16e,'QADH')]!==II1il[Il1i11(0xff,'6m)i')]?console['log'](Il1i11(0xfb,'i9Os')+IlIlil+'\x20请求响应\x20'+(ii1ill[Il1i11(0x161,'OxVQ')]||ii1ill)):I1iIl1[Il1i11(0xa6,'9(Bg')](i1il['message']);}}async function I1lIi1(llI1II){const iii1li=l1l1i1,lIli1l={'YCoYQ':'party_invite','nLUvh':'https://api-x.m.jd.com/','DIhIy':iii1li(0xa9,'QADH'),'yQcNZ':iii1li(0xb4,'Vnby'),'UubLs':iii1li(0xfc,'mBLl'),'YWeXS':iii1li(0x11e,'i9Os'),'JYyrc':iii1li(0x184,')hCZ'),'sWect':iii1li(0xef,'u5c1'),'xvIMV':'4.4','OGTek':iii1li(0xce,'!ogM'),'ryXAt':iii1li(0xc3,'eSaA'),'OjCZN':'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7,en-GB;q=0.6','TvciR':iii1li(0xd0,'f9&h'),'AoyBw':iii1li(0xc4,'fzru'),'IpxMa':iii1li(0x181,'@0Pa'),'bhjbD':iii1li(0xd2,'LLmv'),'SsAPK':function(iii1ii,il1iIi){return iii1ii===il1iIi;},'KNPoq':'Content-Type','vHMdx':function(iii1il,II11li){return iii1il<II11li;},'zwCiC':iii1li(0x111,'ri0e'),'ZjHpQ':function(I1l11i,iIIiiI){return I1l11i>iIIiiI;},'wlERS':function(liiI1i,ililIi){return liiI1i!==ililIi;},'XnvrP':iii1li(0x119,'!ogM'),'tcnte':function(lilIIl,ililIl,liiI1l){return lilIIl(ililIl,liiI1l);}};if($[iii1li(0x79,'9(Bg')]||$[iii1li(0x109,'1Jl9')])return;let lillIi='',illIi1=null,ii1ili=null,liil1i='POST',lI1lil={},i1l1iI={};switch(llI1II){case lIli1l[iii1li(0xa8,'ulc9')]:lillIi=lIli1l[iii1li(0xf8,'&$8z')],ii1ili={'appid':lIli1l['DIhIy'],'functionId':'party_invite','body':JSON['stringify']({})};break;case lIli1l[iii1li(0x14f,'e6^N')]:i1l1iI={'appId':iii1li(0x11a,'BG)g'),'functionId':lIli1l[iii1li(0x122,'Vnby')],'appid':lIli1l[iii1li(0x148,'LLmv')],'clientVersion':lIli1l['UubLs'],'client':lIli1l[iii1li(0xe5,'mBLl')],'body':{'inviteCode':$['inviter']||'','deviceInfo':JSON[iii1li(0x136,'RLJb')]({'sdkToken':ilil1I,'jsToken':i11il1}),'areaInfo':'','unpl':'','qdPageId':lIli1l[iii1li(0x90,'Q(i[')],'mdClickId':lIli1l[iii1li(0xdb,'sQ2d')]},'version':lIli1l[iii1li(0x162,'BG)g')],'ua':$['UA'],'t':!![]},lI1lil=await lil111[iii1li(0xbd,'T9RD')](i1l1iI),lillIi=lIli1l[iii1li(0x17f,'lfs9')],illIi1=lI1lil[iii1li(0x117,'oZil')];break;default:console[iii1li(0xa2,'ri0e')](iii1li(0x13f,'6m)i')+llI1II);return;}const liil1l={};illIi1&&(illIi1={...illIi1,...liil1l});ii1ili&&(iii1li(0x15a,'lfs9')!==lIli1l[iii1li(0xc9,'!yt4')]?l1iii[iii1li(0xe0,')hCZ')]['fix'](IIlli):ii1ili={...ii1ili,...liil1l});const lI1lii={'url':lillIi,'method':liil1i,'headers':{'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':lIli1l['ryXAt'],'Accept-Language':lIli1l[iii1li(0xc6,'e6^N')],'Connection':iii1li(0x10b,'1Ytg'),'Content-Type':lIli1l[iii1li(0x115,'wUOO')],'Cookie':ii1iiI,'Origin':lIli1l[iii1li(0x176,'fzru')],'Referer':iii1li(0x170,'wUOO'),'Sec-Fetch-Dest':iii1li(0xf7,'wUOO'),'Sec-Fetch-Mode':lIli1l['IpxMa'],'Sec-Fetch-Site':lIli1l[iii1li(0xc7,'P@mI')],'User-Agent':$['UA']},'params':ii1ili,'data':illIi1,'timeout':0x3a98};lIli1l[iii1li(0x85,'ulc9')](liil1i,'GET')&&(delete lI1lii[iii1li(0x98,'o0wd')],delete lI1lii[iii1li(0xb1,'Ni@O')][lIli1l[iii1li(0x9f,'QADH')]]);const Iiili1=0x1;let Iil1l1=0x0,i1i11I=null,il1iIl=![];while(lIli1l[iii1li(0xd9,'BG)g')](Iil1l1,Iiili1)){if(lIli1l[iii1li(0x160,'Fr2$')](lIli1l[iii1li(0x13a,'Pz[f')],lIli1l[iii1li(0xc5,'Gkv1')])){lIli1l[iii1li(0x99,'fzru')](Iil1l1,0x0)&&await $[iii1li(0x87,'P@mI')](0x3e8);const i1ill=await il1i1i[iii1li(0x10c,'[0wA')](lI1lii);if(!i1ill[iii1li(0x157,'mUl0')]){i1i11I=iii1li(0xd5,'BG)g')+llI1II+iii1li(0xaf,'E2Qk')+i1ill[iii1li(0x15d,'u5c1')],Iil1l1++;continue;}if(!i1ill?.['data']){if(lIli1l['wlERS'](lIli1l[iii1li(0x86,'oZil')],'qQxVm'))lilIl1[iii1li(0xee,'ri0e')](i1l1ii['name'],iii1li(0x15b,'ri0e')),i1l1[iii1li(0x110,'Ni@O')](0x1);else{i1i11I=iii1li(0x108,'e6^N')+llI1II+iii1li(0xe3,'Q(i['),Iil1l1++;continue;}}lIli1l[iii1li(0xd6,'!ogM')](IIIl11,llI1II,i1ill['data']),il1iIl=![];break;}else ilI1lI['log']('❓'+IiiIll+'\x20'+IIlii[iii1li(0x137,'oZil')](IlI1il));}Iil1l1>=Iiili1&&(console[iii1li(0x149,'Vnby')](i1i11I),il1iIl&&($['outFlag']=!![],$[iii1li(0xe9,'wUOO')]&&$[iii1li(0x10a,'Pz[f')][iii1li(0x93,'!yt4')](i1i11I)));}function liiIIi(i1l1Il){const Iil1i1=l1l1i1,llIli={'lvEPB':'usMvW','sXDav':function(i1i11l,i1i11i){return i1i11l!==i1i11i;},'Dvdmv':Iil1i1(0x173,'P^!i'),'lwXYp':function(II11l1,Iil1lI){return II11l1===Iil1lI;},'jlntx':Iil1i1(0xc0,'mrc4'),'UhLmf':'kSLBA','KkhFy':function(IiiliI,iii1iI){return IiiliI(iii1iI);},'ohOXv':Iil1i1(0x8b,'Gkv1')};return new Promise(llIll=>{const iliIl1=Iil1i1,il1iII={'JROJu':function(IlllIl,II11lI,lI1IIi){return IlllIl(II11lI,lI1IIi);},'erFPP':llIli['lvEPB'],'QqYtB':function(I1l11I,Ilil1l){const IIii11=iii1II;return llIli[IIii11(0x132,'9(Bg')](I1l11I,Ilil1l);},'TOPUm':llIli[iliIl1(0xf4,'Gkv1')],'bPpTZ':function(iIIiii,iilll){return llIli['lwXYp'](iIIiii,iilll);},'opPCP':llIli[iliIl1(0xc2,'Vnby')],'uwgSX':iliIl1(0xa3,'P@mI'),'sIBmo':llIli[iliIl1(0x177,'LLmv')],'bIGuk':function(il1iI1,IlllIi){const Ii1il1=iliIl1;return llIli[Ii1il1(0x12a,'P@mI')](il1iI1,IlllIi);}},iilli={'url':''+i1l1Il,'timeout':0x2710,'headers':{'User-Agent':llIli[iliIl1(0x12e,'JMiU')]}};$[iliIl1(0x146,'chH5')](iilli,async(iIIiil,i1l1Ii,I1iIIi)=>{const iii1ll=iliIl1;if(iii1ll(0x10d,'P@mI')!==il1iII['erFPP'])try{if(il1iII['QqYtB'](il1iII[iii1ll(0x140,'JMiU')],'UGEMV')){if(iIIiil){}else I1iIIi?il1iII[iii1ll(0x188,'H#Oc')](il1iII['opPCP'],il1iII[iii1ll(0x9d,'e6^N')])?(IlI1I[iii1ll(0x16a,'H#Oc')]('❖\x20测试连通性中...\x0a❖\x20服务状态正常...\x0a'),II11Ii['authorCode']=II11Il[il1iII[iii1ll(0xc8,'P@mI')](IlI11,0x0,iIIIIl[iii1ll(0xbb,'u5c1')])]):I1iIIi=JSON[iii1ll(0xdd,'[0wA')](I1iIIi):console[iii1ll(0xa2,'ri0e')](iii1ll(0xd8,'!cg^'));}else llIll1['assistedNum']+=0x1,Illl1l[iii1ll(0xe8,'#H7r')](iii1ll(0xa7,'6m)i')+Illl1i[iii1ll(0x10f,'!cg^')]+']');}catch(i1ilI){il1iII[iii1ll(0xb9,'chH5')]!==il1iII[iii1ll(0x156,'[0wA')]?lIIiiI[iii1ll(0x182,'i9Os')](iii1ll(0x121,'@0Pa')+II1lil+'\x20请求响应\x20'+(IIli1l[iii1ll(0xba,'ri0e')]||II1lii)):($['logErr'](i1ilI,i1l1Ii),I1iIIi=null);}finally{il1iII[iii1ll(0xbc,'9(Bg')](llIll,I1iIIi);}else ll1il[iii1ll(0x118,'o0wd')](IiiIiI),lilii&&(lilil[iii1ll(0xc1,'Fr2$')]=!![],ll1ll[iii1ll(0x152,'RLJb')]&&I1ilIl['message']['fix'](I11iII));});});}function lil11I(Iiilii,Iil1li){const IIliI1=l1l1i1,Iiilil={'MlXII':function(Iil1ll,iillI){return Iil1ll-iillI;}};return Math['floor'](Math[IIliI1(0xe1,'lfs9')]()*Iiilil['MlXII'](Iil1li,Iiilii))+Iiilii;}function Iliii1(lI1III){const il1lI=l1l1i1,IIliIi={'uMjSe':'abcdef0123456789','FWjwb':function(IIii1l,I1iIII){return IIii1l<I1iIII;}};lI1III=lI1III||0x20;let IllIiI=IIliIi['uMjSe'],i1il1=IllIiI['length'],I1l111='';for(i=0x0;IIliIi[il1lI(0x96,'BG)g')](i,lI1III);i++)I1l111+=IllIiI[il1lI(0x7e,'P^!i')](Math[il1lI(0x138,'!cg^')](Math['random']()*i1il1));return I1l111;}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
