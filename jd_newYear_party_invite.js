/*
活动名称：京东看春晚助力
环境变量：JD_PARTY_INVITE_CODE // 指定助力码

自行控制助力上限

cron:1 1 1 1 *

*/

const $ = new Env('京东看春晚助力')
var iｉl='jsjiami.com.v7';const IllIiI=iii1II;(function(lI1IIi,I1l11I,Ilil1l,iIIiii,iilll,il1iI1,IlllIi){return lI1IIi=lI1IIi>>0x6,il1iI1='hs',IlllIi='hs',function(iIIiil,i1l1Ii,I1iIIi,I1iIIl,lI1IIl){const IIliIi=iii1II;I1iIIl='tfi',il1iI1=I1iIIl+il1iI1,lI1IIl='up',IlllIi+=lI1IIl,il1iI1=I1iIIi(il1iI1),IlllIi=I1iIIi(IlllIi),I1iIIi=0x0;const i1ilI=iIIiil();while(!![]&&--iIIiii+i1l1Ii){try{I1iIIl=parseInt(IIliIi(0x195,'!TN)'))/0x1*(-parseInt(IIliIi(0x184,'w%#3'))/0x2)+-parseInt(IIliIi(0x244,'C843'))/0x3+-parseInt(IIliIi(0x267,'n9BJ'))/0x4*(parseInt(IIliIi(0x185,'8mIP'))/0x5)+parseInt(IIliIi(0x22a,'kct4'))/0x6+-parseInt(IIliIi(0x198,'r&D!'))/0x7+parseInt(IIliIi(0x1a0,'2Q73'))/0x8+parseInt(IIliIi(0x28b,'w%#3'))/0x9;}catch(iii1lI){I1iIIl=I1iIIi;}finally{lI1IIl=i1ilI[il1iI1]();if(lI1IIi<=iIIiii)I1iIIi?iilll?I1iIIl=lI1IIl:iilll=lI1IIl:I1iIIi=lI1IIl;else{if(I1iIIi==iilll['replace'](/[uGfFlTnhENPQRwMKYXHx=]/g,'')){if(I1iIIl===i1l1Ii){i1ilI['un'+il1iI1](lI1IIl);break;}i1ilI[IlllIi](lI1IIl);}}}}}(Ilil1l,I1l11I,function(i1ilI1,Iiilii,Iil1li,Iiilil,Iil1ll,iillI,lI1III){return Iiilii='\x73\x70\x6c\x69\x74',i1ilI1=arguments[0x0],i1ilI1=i1ilI1[Iiilii](''),Iil1li=`\x72\x65\x76\x65\x72\x73\x65`,i1ilI1=i1ilI1[Iil1li]('\x76'),Iiilil=`\x6a\x6f\x69\x6e`,(0x158032,i1ilI1[Iiilil](''));});}(0x3080,0x59613,Iii11l,0xc4),Iii11l)&&(iｉl=IllIiI(0x190,'!TN)'));const lllll=require(IllIiI(0x1c7,'5cT6')),i11ili=require(IllIiI(0x1cb,'ja3x')),iil1l1=require(IllIiI(0x187,'QN]f')),{H5st:lllli,jsTk:iiili1}=require(IllIiI(0x283,'vy9%')),ill11i=![];$['inviteCode']=process[IllIiI(0x201,'cHV@')][IllIiI(0x192,'DWjz')]||'';let lllill=IllIiI(0x183,'TX3%'),ill11l=IllIiI(0x228,'dnYr'),I1lIiI=IllIiI(0x278,'3gz6'),lllili=IllIiI(0x279,'!TN)')+IlIlli(0x6f,ill11l+lllill)['toUpperCase'](),IliiiI='jdd03'+IlIlli(0x7b,ill11l+lllill)['toUpperCase'](),Ill11='';const liiIII=Object[IllIiI(0x1bb,'86AZ')](lllll)['map'](il1i1i=>lllll[il1i1i])[IllIiI(0x1d4,'a5&6')](lil111=>lil111);!liiIII[0x0]&&($[IllIiI(0x1ab,'HILf')]($[IllIiI(0x1f5,'UGhz')],'【提示】请先获取Cookie'),process[IllIiI(0x1fc,'cHV@')](0x1));!(async()=>{const i1il1=IllIiI,i11ilI={'SoqMq':i1il1(0x199,'$VFf'),'KFqNy':i1il1(0x1f4,'t)I0'),'lLaeo':function(ii1ii1,llllI){return ii1ii1===llllI;},'hMWiG':function(lllil1,iil1il){return lllil1<iil1il;},'oPunl':'pIXQH','NUhGP':'pt_pin','gHCSG':i1il1(0x287,'cHV@')};$['assistedNum']=0x0,authorCodeList=await IIIl1I(i11ilI[i1il1(0x251,'VBq^')]);authorCodeList?(console[i1il1(0x20a,'Vtt]')](i11ilI[i1il1(0x212,'xG#y')]),$['authorCode']=authorCodeList[iil1ii(0x0,authorCodeList[i1il1(0x269,'!TN)')])]):i11ilI[i1il1(0x18d,'R3KQ')](i1il1(0x23f,'8691'),'cHrtg')?console[i1il1(0x1f0,'ja3x')]('❖\x20准备就绪...\x0a'):(ll1iI[i1il1(0x26d,'5cT6')]('❌\x20'+iI1lll[i1il1(0x261,'sk8D')]),l1lIll['message'][i1il1(0x211,'8mIP')](I1l1II[i1il1(0x230,'8a9C')]));i11ili[i1il1(0x18f,'wpT@')]({'title':$['name']});for(let i11il1=0x0;i11ilI[i1il1(0x28a,'R3KQ')](i11il1,liiIII[i1il1(0x1b3,'sk8D')]);i11il1++){if(i11ilI[i1il1(0x188,'iSP*')]('pIXQH',i11ilI[i1il1(0x1b9,'xG#y')])){$['index']=i11il1+0x1,Ill11=liiIII[i11il1],iil1l1[i1il1(0x229,'vy9%')](Ill11),$[i1il1(0x25c,'86AZ')]=decodeURIComponent(iil1l1[i1il1(0x247,'XiFb')](Ill11,i11ilI[i1il1(0x218,'vy9%')])),$['UA']=iil1l1['genUA']($[i1il1(0x21a,'iSP*')]),$[i1il1(0x24d,'UGhz')]=i11ili['create']($[i1il1(0x210,'gbrh')],$['UserName']),$[i1il1(0x186,'8a9C')]='',console[i1il1(0x1c3,']%k3')](i1il1(0x215,'vy9%')+$[i1il1(0x1a3,'8a9C')]+'】'+($[i1il1(0x205,'je20')]||$[i1il1(0x25c,'86AZ')])+'******\x0a'),{eid:$[i1il1(0x22d,'V6qY')],jsToken:$[i1il1(0x1c6,'ja3x')]}=await iiili1($['UA'],i11ilI[i1il1(0x284,'p%yi')],i1il1(0x236,'QN]f')),await li1i11(),iil1l1[i1il1(0x1d1,'8mIP')]();if($[i1il1(0x23d,'@ftx')])break;await $['wait'](0x3e8);}else i1ill1[i1il1(0x1af,'3gz6')]=iIIl1l['result'][i1il1(0x1c9,'Ew^7')],llIli1[i1il1(0x1c1,'je20')]('获取助力码：'+iliIII[i1il1(0x242,'wNMB')]);}ill11i&&i11ili[i1il1(0x1fe,'abut')]()&&(i11ili[i1il1(0x275,'W[QB')](i11ili[i1il1(0x20d,'ja3x')]+'\x0a'),await i11ili[i1il1(0x24c,'86AZ')]());})()[IllIiI(0x18e,'2Q73')](lllilI=>$[IllIiI(0x193,'DWjz')](lllilI))[IllIiI(0x1b2,'HILf')](()=>$[IllIiI(0x1e1,'C843')]());async function li1i11(){const I1l111=IllIiI,ilil11={'uLhWY':'❖\x20测试连通性中...\x0a❖\x20服务状态正常...\x0a','fYXMS':function(IIIl11,I1lIi1,liiIIi){return IIIl11(I1lIi1,liiIIi);},'yJpKD':function(lil11I,Iliii1){return lil11I===Iliii1;},'CkRxP':I1l111(0x1fd,'HHE4'),'ThvZW':I1l111(0x1fa,'Vtt]'),'ziykL':function(iIiIi,iil1ll){return iIiIi==iil1ll;},'jtyWK':'jzAHC','QNBjM':'party_invite','VAXdo':I1l111(0x282,'a5&6'),'PajXv':function(iiilil,iil1li){return iiilil(iil1li);},'OjuDn':I1l111(0x23e,'ja3x'),'noPVx':function(lillIl,iIiIl){return lillIl(iIiIl);},'HjCvi':function(iiilii,li1i1i){return iiilii!==li1i1i;},'PwKAS':function(IlIli1,illIiI){return IlIli1(illIiI);}},illlI1=await iil1l1['getLoginStatus'](Ill11);if(!illlI1&&ilil11['yJpKD'](typeof illlI1,I1l111(0x227,'^FiZ'))){if(ilil11[I1l111(0x1de,'p%yi')]===ilil11[I1l111(0x1e4,'86AZ')]){console[I1l111(0x26d,'5cT6')](I1l111(0x21d,'Ew^7'));return;}else IiiIli[I1l111(0x222,'n9BJ')]('❌\x20'+iillli[I1l111(0x28c,'R3KQ')]),I1l1Ii[I1l111(0x281,'IUkr')][I1l111(0x211,'8mIP')](I1i11i[I1l111(0x1b4,'je20')]);}try{ilil11['ThvZW']!==I1l111(0x1ca,'w%#3')?I1iIi1={...lliil1,...IIllI}:!$['inviteCode']?ilil11['ziykL']($[I1l111(0x1fb,']%k3')],0x1)?ilil11[I1l111(0x241,'W[QB')]!==ilil11[I1l111(0x249,'w%#3')]?I1i111['log']('❓'+ilI1li+'\x20'+IIliI[I1l111(0x219,']%k3')](ilI1ll)):(await IlIlll(ilil11[I1l111(0x1ad,'p%yi')]),await $['wait'](0x7d0),console['log'](ilil11['VAXdo']),await ilil11['PajXv'](iI11I1,$[I1l111(0x1bc,'8a9C')])):ilil11['OjuDn']!==ilil11['OjuDn']?(lliii1[I1l111(0x21f,'n9BJ')]=!![],Iiii1[I1l111(0x197,'je20')]&&IiiIii[I1l111(0x277,'iSP*')]['fix'](IIlll)):await iI11I1($[I1l111(0x20e,'2Q73')]):$['index']==0x1?(console[I1l111(0x225,'xG#y')](I1l111(0x265,'DWjz')),await ilil11[I1l111(0x270,'r&D!')](iI11I1,$[I1l111(0x1be,'p%yi')])):ilil11[I1l111(0x196,'a5&6')](I1l111(0x266,'8mIP'),I1l111(0x28f,'TX3%'))?(IlI1I[I1l111(0x24b,'gbrh')](ilil11[I1l111(0x1c8,'!TN)')]),II11Ii[I1l111(0x1b1,'TX3%')]=II11Il[ilil11[I1l111(0x206,'VBq^')](IlI11,0x0,iIIIIl[I1l111(0x268,'$VFf')])]):await ilil11['PwKAS'](iI11I1,$[I1l111(0x224,'8a9C')]);}catch(Ill1i){console['log'](Ill1i[I1l111(0x18c,'2Q73')]);}}async function iI11I1(ii1iil){const IIii1l=IllIiI,lllI1l={'IQTsl':function(i11iii,llI1Ii){return i11iii(llI1Ii);},'tPsWr':IIii1l(0x1a6,'HILf')};$['inviter']=ii1iil,await lllI1l[IIii1l(0x1e2,'86AZ')](IlIlll,lllI1l['tPsWr']),await $['wait'](0x7d0);}async function il1i1l(lllI1i,li1i1l){const I1iIII=IllIiI,II1i1={'JtoQt':function(lI1lll,iIiII){return lI1lll===iIiII;},'StEXm':I1iIII(0x1df,'TX3%'),'SiMCC':I1iIII(0x1dd,'wNMB'),'fDKlS':function(iil1lI,iiiliI){return iil1lI!==iiiliI;},'OKfTQ':I1iIII(0x273,'kct4'),'btARy':I1iIII(0x26c,'fDbL'),'dUtaJ':function(li1i1I,illIii){return li1i1I===illIii;},'DFVIb':I1iIII(0x1d3,'2Q73'),'maXBB':I1iIII(0x26e,'3gz6'),'xhFcS':'Arnqa'};try{switch(lllI1i){case'party_invite':if(II1i1[I1iIII(0x1ed,'iSP*')](li1i1l['code'],0x0)&&li1i1l['data']){const ii1il1=li1i1l?.[I1iIII(0x25d,'D43H')];if(II1i1['JtoQt'](ii1il1[I1iIII(0x213,'R3KQ')],0x0)&&ii1il1[I1iIII(0x194,'Ew^7')])$[I1iIII(0x21b,'R3KQ')]=ii1il1['result'][I1iIII(0x1b8,'t)I0')],console[I1iIII(0x250,'2Q73')](I1iIII(0x20f,'VBq^')+$['inviteCode']);else{if(ii1il1[I1iIII(0x243,'wNMB')])console[I1iIII(0x225,'xG#y')](ii1il1[I1iIII(0x1d6,'uSj[')]),$[I1iIII(0x1f9,'5cT6')][I1iIII(0x248,'p%yi')](ii1il1['bizMsg']);else{if(II1i1[I1iIII(0x259,'je20')]===II1i1['SiMCC'])console[I1iIII(0x25b,'UGhz')]('❓'+lllI1i+'\x20'+JSON[I1iIII(0x26a,'VBq^')](li1i1l));else{const illIil=lI1Ill?.[I1iIII(0x20c,'@ftx')];if(II1i1['JtoQt'](illIil[I1iIII(0x237,'XiFb')],0x0)&&illIil['result'])iillll[I1iIII(0x264,'fDbL')]+=0x1,lIIilI['log']('✅\x20助力成功\x20['+II1li1['assistedNum']+']');else illIil[I1iIII(0x24a,'DWjz')]?(l1lIlI['log']('❌\x20'+illIil[I1iIII(0x22f,'@ftx')]),IiiIl1[I1iIII(0x28e,'fDbL')][I1iIII(0x20b,'Ew^7')](illIil['bizMsg'])):lIIil1[I1iIII(0x27f,'dnYr')]('❓'+IIli1+'\x20'+II1liI[I1iIII(0x1a1,'w%#3')](IlI1i1));}}}}else li1i1l['message']?II1i1[I1iIII(0x1d2,'8a9C')](II1i1[I1iIII(0x1eb,'abut')],I1iIII(0x19c,'XiFb'))?(console['log'](li1i1l[I1iIII(0x286,'3gz6')]),$[I1iIII(0x25f,'TX3%')][I1iIII(0x256,'abut')](li1i1l['message'])):(l1l1II['log'](Iil1I1[I1iIII(0x230,'8a9C')]),Ii1iII['message'][I1iIII(0x257,'3gz6')](l1i11I[I1iIII(0x1ff,'abut')])):console[I1iIII(0x1f0,'ja3x')]('❓'+lllI1i+'\x20'+JSON[I1iIII(0x1a7,'dnYr')](li1i1l));break;case II1i1[I1iIII(0x19d,'t)I0')]:if(li1i1l['code']===0x0&&li1i1l['data']){const i11iiI=li1i1l?.[I1iIII(0x27c,'XiFb')];if(II1i1[I1iIII(0x19a,'iSP*')](i11iiI[I1iIII(0x260,'ja3x')],0x0)&&i11iiI[I1iIII(0x276,'C843')])$['assistedNum']+=0x1,console[I1iIII(0x1f1,'DWjz')](I1iIII(0x1e6,'wpT@')+$[I1iIII(0x272,'$VFf')]+']');else i11iiI['bizMsg']?II1i1[I1iIII(0x288,'8691')](II1i1['DFVIb'],I1iIII(0x240,'^FiZ'))?lI11Il=lIII1i[I1iIII(0x26f,'n9BJ')](l11i11):(console['log']('❌\x20'+i11iiI[I1iIII(0x255,'xG#y')]),$['message']['fix'](i11iiI[I1iIII(0x1cc,'n9BJ')])):console[I1iIII(0x1c1,'je20')]('❓'+lllI1i+'\x20'+JSON[I1iIII(0x246,'!TN)')](li1i1l));}else li1i1l['message']?II1i1[I1iIII(0x1a8,'kct4')]('epiRC',II1i1[I1iIII(0x1a4,'n9BJ')])?ilI1lI['log']('❓'+IiiIll+'\x20'+IIlii[I1iIII(0x24f,'XiFb')](IlI1il)):(console[I1iIII(0x1d7,'8a9C')]('❌\x20'+li1i1l[I1iIII(0x1ec,'8691')]),$[I1iIII(0x286,'3gz6')]['fix'](li1i1l['message'])):I1iIII(0x1ac,'TX3%')===I1iIII(0x25a,'XiFb')?(delete IliI1l[I1iIII(0x189,'VBq^')],delete lliiil[I1iIII(0x1d8,'!TN)')][II1i1[I1iIII(0x1e0,'iSP*')]]):console['log']('❓'+lllI1i+'\x20'+JSON['stringify'](li1i1l));break;}}catch(IlIlii){II1i1[I1iIII(0x1f7,'HILf')](II1i1['xhFcS'],II1i1[I1iIII(0x27b,'wNMB')])?l1iii[I1iIII(0x234,'$VFf')][I1iIII(0x1e9,'W[QB')](IIlli):console[I1iIII(0x24b,'gbrh')]('❌\x20未能正确处理\x20'+lllI1i+I1iIII(0x238,'dnYr')+(IlIlii['message']||IlIlii));}}function iii1II(_0x5dd8be,_0x12064a){const _0x315bde=Iii11l();return iii1II=function(_0x320c47,_0x27fc55){_0x320c47=_0x320c47-0x183;let _0x3837a0=_0x315bde[_0x320c47];if(iii1II['tHojlB']===undefined){var _0x54f211=function(_0x51845e){const _0x2f158c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x288f9f='',_0x35fba0='';for(let _0x2c6224=0x0,_0x280f68,_0x41f451,_0x56852e=0x0;_0x41f451=_0x51845e['charAt'](_0x56852e++);~_0x41f451&&(_0x280f68=_0x2c6224%0x4?_0x280f68*0x40+_0x41f451:_0x41f451,_0x2c6224++%0x4)?_0x288f9f+=String['fromCharCode'](0xff&_0x280f68>>(-0x2*_0x2c6224&0x6)):0x0){_0x41f451=_0x2f158c['indexOf'](_0x41f451);}for(let _0x5be4db=0x0,_0x5756f0=_0x288f9f['length'];_0x5be4db<_0x5756f0;_0x5be4db++){_0x35fba0+='%'+('00'+_0x288f9f['charCodeAt'](_0x5be4db)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x35fba0);};const _0x2818d9=function(_0x5bde98,_0xcde407){let _0x958e1f=[],_0x1bb15c=0x0,_0x512c87,_0x329ed4='';_0x5bde98=_0x54f211(_0x5bde98);let _0x467984;for(_0x467984=0x0;_0x467984<0x100;_0x467984++){_0x958e1f[_0x467984]=_0x467984;}for(_0x467984=0x0;_0x467984<0x100;_0x467984++){_0x1bb15c=(_0x1bb15c+_0x958e1f[_0x467984]+_0xcde407['charCodeAt'](_0x467984%_0xcde407['length']))%0x100,_0x512c87=_0x958e1f[_0x467984],_0x958e1f[_0x467984]=_0x958e1f[_0x1bb15c],_0x958e1f[_0x1bb15c]=_0x512c87;}_0x467984=0x0,_0x1bb15c=0x0;for(let _0x54baef=0x0;_0x54baef<_0x5bde98['length'];_0x54baef++){_0x467984=(_0x467984+0x1)%0x100,_0x1bb15c=(_0x1bb15c+_0x958e1f[_0x467984])%0x100,_0x512c87=_0x958e1f[_0x467984],_0x958e1f[_0x467984]=_0x958e1f[_0x1bb15c],_0x958e1f[_0x1bb15c]=_0x512c87,_0x329ed4+=String['fromCharCode'](_0x5bde98['charCodeAt'](_0x54baef)^_0x958e1f[(_0x958e1f[_0x467984]+_0x958e1f[_0x1bb15c])%0x100]);}return _0x329ed4;};iii1II['LhgSrW']=_0x2818d9,_0x5dd8be=arguments,iii1II['tHojlB']=!![];}const _0x5715cb=_0x315bde[0x0],_0x48a76a=_0x320c47+_0x5715cb,_0x17902e=_0x5dd8be[_0x48a76a];return!_0x17902e?(iii1II['clHzAs']===undefined&&(iii1II['clHzAs']=!![]),_0x3837a0=iii1II['LhgSrW'](_0x3837a0,_0x27fc55),_0x5dd8be[_0x48a76a]=_0x3837a0):_0x3837a0=_0x17902e,_0x3837a0;},iii1II(_0x5dd8be,_0x12064a);}async function IlIlll(liil11){const liiI11=IllIiI,iiillI={'hCrOE':'POST','QeRxh':liiI11(0x1db,'#n@%'),'NfeIH':liiI11(0x1a5,'t)I0'),'cdkhg':liiI11(0x231,'xG#y'),'XdaWt':'b1660','yssML':liiI11(0x23a,'IUkr'),'fBdYX':'wh5','jzMLK':liiI11(0x1e7,'HILf'),'hEnKe':liiI11(0x1bd,'fDbL'),'omucW':liiI11(0x1e5,'p%yi'),'vjpJJ':function(ii1ilI,lI1ll1){return ii1ilI===lI1ll1;},'AWiQN':'AEVEA','Khqpo':'application/json,\x20text/plain,\x20*/*','EDLPN':'gzip,\x20deflate,\x20br','VPvcZ':liiI11(0x216,'XiFb'),'VZooC':liiI11(0x289,']%k3'),'laeKv':liiI11(0x1a9,'iSP*'),'pcadk':liiI11(0x1e8,'ja3x'),'TNABl':liiI11(0x26b,'n9BJ'),'iimnI':liiI11(0x1b0,'C843'),'cYrRb':function(iIiI1,liil1I){return iIiI1<liil1I;},'JqWNe':function(i11ii1,IlIliI){return i11ii1>IlIliI;},'Puxuo':function(l1iII1,iiill1){return l1iII1>=iiill1;},'vuPQu':liiI11(0x1da,'Ew^7')};if($['runEnd']||$[liiI11(0x22e,'DWjz')])return;let l1l111='',l1iIII=null,llI1I1=null,IlIlil=iiillI['hCrOE'],lIli1I={},II1il={};switch(liil11){case iiillI[liiI11(0x19b,'D43H')]:l1l111=iiillI[liiI11(0x214,'je20')],llI1I1={'appid':iiillI['cdkhg'],'functionId':liiI11(0x18b,'vy9%'),'body':JSON['stringify']({})};break;case liiI11(0x221,'V6qY'):II1il={'appId':iiillI['XdaWt'],'functionId':liiI11(0x233,'wNMB'),'appid':iiillI[liiI11(0x22c,'QN]f')],'clientVersion':iiillI[liiI11(0x235,'gbrh')],'client':iiillI[liiI11(0x23c,'abut')],'body':{'inviteCode':$['inviter']||'','deviceInfo':JSON[liiI11(0x217,'abut')]({'sdkToken':lllili,'jsToken':IliiiI}),'areaInfo':'','unpl':'','qdPageId':iiillI['jzMLK'],'mdClickId':iiillI[liiI11(0x18a,'ja3x')]},'version':iiillI['omucW'],'ua':$['UA'],'t':!![]},lIli1I=await lllli['getH5st'](II1il),l1l111=iiillI[liiI11(0x1a2,'Vtt]')],l1iIII=lIli1I['paramsData'];break;default:console['log'](liiI11(0x1c2,'t)I0')+liil11);return;}const lllI11={};l1iIII&&(iiillI[liiI11(0x1ae,'dnYr')](iiillI['AWiQN'],'nmNaO')?li1Ii[liiI11(0x1c4,'D43H')]('❓'+Iliiii+'\x20'+i1illI[liiI11(0x263,'86AZ')](i1IIl)):l1iIII={...l1iIII,...lllI11});llI1I1&&(llI1I1={...llI1I1,...lllI11});const I1lIll={'url':l1l111,'method':IlIlil,'headers':{'Accept':iiillI[liiI11(0x191,'je20')],'Accept-Encoding':iiillI[liiI11(0x27a,'VBq^')],'Accept-Language':iiillI['VPvcZ'],'Connection':iiillI['VZooC'],'Content-Type':iiillI[liiI11(0x208,'3gz6')],'Cookie':Ill11,'Origin':liiI11(0x1d5,'D43H'),'Referer':liiI11(0x204,'5cT6'),'Sec-Fetch-Dest':iiillI[liiI11(0x1ba,'!TN)')],'Sec-Fetch-Mode':liiI11(0x19f,']%k3'),'Sec-Fetch-Site':iiillI[liiI11(0x258,'xG#y')],'User-Agent':$['UA']},'params':llI1I1,'data':l1iIII,'timeout':0x3a98};iiillI[liiI11(0x245,'n9BJ')](IlIlil,liiI11(0x209,'IUkr'))&&(delete I1lIll['data'],delete I1lIll[liiI11(0x239,'8mIP')][iiillI[liiI11(0x1cd,'n9BJ')]]);const I1lIli=0x1;let II1ii=0x0,IIIIII=null,lillII=![];while(iiillI['cYrRb'](II1ii,I1lIli)){iiillI[liiI11(0x25e,'xG#y')](II1ii,0x0)&&await $['wait'](0x3e8);const IIIII1=await iil1l1[liiI11(0x27e,'abut')](I1lIll);if(!IIIII1[liiI11(0x1ef,'QN]f')]){IIIIII=liiI11(0x1f2,'@ftx')+liil11+'\x20请求失败\x20➜\x20'+IIIII1['error'],II1ii++;continue;}if(!IIIII1?.[liiI11(0x271,'fDbL')]){IIIIII=liiI11(0x200,'^FiZ')+liil11+liiI11(0x1c0,'V6qY'),II1ii++;continue;}il1i1l(liil11,IIIII1['data']),lillII=![];break;}iiillI['Puxuo'](II1ii,I1lIli)&&(iiillI[liiI11(0x285,'5cT6')]===iiillI[liiI11(0x1f3,'iSP*')]?(console[liiI11(0x274,'HHE4')](IIIIII),lillII&&($[liiI11(0x21c,'t)I0')]=!![],$[liiI11(0x1b7,'gbrh')]&&$[liiI11(0x223,'!TN)')][liiI11(0x1e3,'a5&6')](IIIIII))):(llIll1['assistedNum']+=0x1,Illl1l[liiI11(0x1bf,'^FiZ')](liiI11(0x207,'IUkr')+Illl1i[liiI11(0x253,'n9BJ')]+']')));}function Iii11l(){const lilII1=(function(){return[...[iｉl,'nEFjKTRsfYjwMniaumKihX.PxcoGmQY.vlnN7HPT==','bapcIsHP','ob1LAajHAhfUW5lcHw0','W6pdLw48W5ZdGLW','kZqVW4vl','W63dKwKSW5u','W4nxwmkey8kV','W5KOWOVdLZtcMCoXzeiBW5P3EmkI','W5ZcJmkuW5jm','obONWRrqcsOFWQ8yW5XuWRddLurGW7G8wW8','hJeFWQfJkq','W6ldImkEwSofAq','WOzPW5xcJt7cKCoFk1iW','WOFdJmk5hce','W7RcGCkwW5fcu0i','qMtcImkXWRD7WOPZmhXsEMa','nSoWo8kKWPnWbCoTzMVdRCkasSo3vN9fWODyWOpcRmo7dN0DC8kZWR7cLXhdR0ldIG','WQ/dImoybWi','W6FcUmkUA2W','W6dcH8oIl8kP','W7hcHexdISoE','W4r7na','WPlcRsJcMW','WR/cHYv+WONcKW3cOx3cI8kYW4pcJa','WQlcQIpdL24zWRC4W5q','WPdcMCoNfCo9','WO/dQ2pdVtC','WO3dPwXNiG','W7VcHhddQmouwmoXf8kZpSkwiCosxmkDjCk6otGTwgRdOG','W7WvW5P0cSkimYFcPCozWRVcSG','WPyljYGVfKqmW6u','W4xdJmkqWQFcUG','WQRdRCoCcIeixCoyW7uuCfOojqpcQLtcK8ooqrLUwXz4zbdcSKtcQr7dIbe','WOZdOvPcfdu','W6ehW48','W78lBmolWOO','W64bW5JcI8ky','WPmvjqSl','W4PWnSoXxwDjWPhdNSk4','W7xdOrPxlIOlWPxdGKBcH8kN','W7W9tSogWQ/cKHDXdWa','W6ODW4zHh8k7kW','W5u+W6nKWOxcNa','W7xcJCkFW69quW','wCouW5qebq','W77cKCocw3ZcSwr0WPddGbFdM8kn','sCkbWQLSW63dICoe','W7RcNNldSCotb8kDv8k2kW','WQRdKc83za','W4m4WOddMJ4','WRiyW6u3','WOFdShpdScddR8knk8kzW7G','fsdcOmotj8o5W6hcKq9KW6FdL3JdR8o+W6zcWOLYg8o+WPBcGmkIkdKRWOjCDW','W546W67cICk6mmkpWOuQW6G','W4ldOSk1','coIUKoAWSUwNSoI3QgdIN7pcVUAxOowrKow7HEAuKoApJq','W7VcI8kc','4P+FW5dMNk7NNB3ORzdMSkddVG','WP3cRt0','W5RcSSkB','W5FcSthdQWJdICkdcmkL','bJxcSWXNfxW','WRpcOSkCimo7WQNcHa5tWRW','W4yxWONdQqW','W7NdG8kBrSoDEdbDW7qB','WOhcKahdNui','qMNcKHDLhge6b8klW7WMWQBdMgG8WRVdKmowa1ajqw1mW7pcSW','WOldRu5OeZO','WONdRvLlkq','W4FdTCklWQNcGG','W6FcLSkgrxy','WR3dRCkamYy','fSkcyCkBcmooW5fUcSobWQq','WOddGuZdTbW','W7NdPxykW5G','WQNdJ8kwhI3dTq','W57cQCkiy3FdNc0nfZ1bWPXFESoZWRpcMvBdHCkMW4hdI1e','W5pcGmk9qSosbq','WORdQMa','W5S+WOddMJdcHSoR','f2ddJcjUlX7cM8oIWPKbnaq','W7JdUmkBzmoU','vmommXvDW5vIWQxcVwZdOeO','WQZdT8ksxSoRWOLBeSkoWPLWWRa','WPhcKdJdPSkF','W7WKW4JcMCkf','W54NvmoAWQxcJIaZpXZdVCk/','WPJdQCoPpIu','W5ldOrPg','WPaSW4G3WRy'],...(function(){return[...['WQNdJ8kc','WPOwW448WOO','WOTHWQK','4P6LgowkN+wjUEAiMUwjLWldKq','W4e7WOvkqCoNy2xdU8kb','csVcLXD1','WRzsyW','W6JdGmkbmmoU','W5tcTaHQWQC','sZlcJ2i6CuW','WOhdQCodnZW','W7dcMgxdQSoMfG','sSokW6HjWQJcT3q','acNcGa','hJeF','8kU6SSoP','WR3dQmo8nZ0','4P+fW5dMTy/ORy3OVBNPGBJMG7NKUjxdVgddKqBIN7Xs5P+95yQQ54MM5OgC5Q215BM2gsNdO8kx','qSoJW6KJ','rwWpWOvFedaC','W6OWW6nSia','smoilWzqW6i','W7ddQmkfn8ozWQhcJG','WO7cSCosp8o3','WPJcRd7cJtC','WORdU8ksWP0','e8oGmCknWPm','W7ZcMHPZWPpdGSkgW7RcSSoR','W7BcMH1nWPFdLSkq','8ls4PSoY','WORdRCkn','W787DmopWRm','vdBcKNu0EW','W7xdUCkcnmolW7ZdHePkWQTVi1LdiCoiWOldSa5Am8oeDCouDMRdOSkhh8k2aSoLW69YW5qpumomvrVdIJ/dQHynW5flW5hdOrFdNCkbW5jtWO3cTbnZWRddUdNdOZ7cTtPTp8ojF8koW7HHCbH1','W7NcJCkgW4LTvuOz','W4BcV3BdNNK','4PYPW4/LI5tLIAtMIl/LIOr/hq','W49/jCotxW','A8kQkq','WRlcKmoL','W7BdHmkv','nNJcVCk6','dYNcIrDPhMy','W6FdNMSMW4NdGhRcTfVcVq','6iYx5yYW5yQh5yIi56cR77YS','tCkkWR56W7q','bCkfAG','WO7dHISxCq','jre0W6nlsKy','W5NcGSkaW6TR','qLy9nLeuk+w8N+wNK+ocQ+s5NEs4LoI3HownPG','W6/cQ8kok8krWPvma8o3WOuDW7ldMsdcSxVdS8ontfxdOKSOpSkZlmo8omomWQdcQrJcVmkMzvldTSoNW6FdKSosW4rjnCoAWQpcQq','W6JcIXXxWPJdLSkCW73cRa','bIL/wYS','WOlcTIJcGshdIu1+zW','WP7dRSojfaykuCoj','lHy4W4Lqs2ddNCoSDW','W7ZcHxddNSola8k5','6lA25y2A5Psn5PwN','qHqAWQJcRc0gWRbJW7i8tSovhG','WO/dSubJddXL','W53cHSkGsSotea','waycWRxcTb8oW61ZW7qIfa','WOZdQ1m','W54+WPldJttcK8o9','WO/dQ3hdStVdUmknk8kzW7G','WQNdRZ0','WO7dOCkyWO1csCoXW6KLcxtdVSoaD1/cJa','W4ZdOSk9W6tdVCorW4K','W5voz3j1rbTDWQrm','oXLJxXrrANz9','WPJcRCovW7ddHmojWQC/tConjCo5','hGGtWPrB','wSoBW6bcWQO','tq4u','hsSmWQj9oHK','mhdcS8kwf0y','WOVdOhtdQY7dUSkR','WRBdScGWzMZcOmopWRu','W74vW4zKhmk6','WO7cNsVdOmkiW6yDW7VdVCkwWPzV','m8oHpmkNW4G4tW','xCkxWQLsW4a','u8oBWQziWQZcPMlcNCoWlW','W7FcQSozk8kWW51t','W4xOROJMSjFLKOZLU5vr','c8kjC8kAgCo/W40','hCobtCorhW','5P6k6i6p5y+G5yUs5Pw65O6MdUITVEMeOEAvLEI+J+IJHq','W73cVqPNWQ4','igZcP8kEcKu'],...(function(){return['cIdcSWbA','rr/cJMu8','W5NdMmk5W43dVq','WRPpyJev','WPFcKI/dVCkfW5W/W6FdQSkA','WPZcLspdMCkcW54','WOdcUKesFNCNW6ZdH1RcHmkW','WPBdRKrVkG','W4aVWPpdLZVcK8oXlfG','W7lcPSoxk8kWW5zDaSkPWQjbWQ7cGNW','W5KMW6i','WRVcQIJdQuS','edCcWQLIpa','smklWR0','WQKiW68S','qCoNW7C1aCkIbG','gI7cUmoFj8okW6tdM0WvWRJcGZJdO8oCW5eCW5z7t8kQWQhcTCkfCsmpWOTbBvrjhSk5vSkdBur0lCocWRODxblcR8opWPBcTazibIbPW6zYmJPttmoEiCkHW7KkhmolWRaLfSouahlcNSobvSkrBSk8EwldRb/dVmoIWOjbEq48WOO6jCkJWQRcImo8u8oxkG4QihddPghdVCoHWQFcQZFdOSoeFZ9huqlcHCofBwm0fdjYW6ZdM8ohbYOxW51hEhzFdSooW6vvW7jeiCkTwCovWQrtW4eBdCoOwSo4WRi','W6BcT8oraCkXW55FdCk1','W6ldN3O','W7pcIv/dNLS','hrL+rs8','WOhdT0DmeYLNWPFcOmkxkW','s8oEW6voWQlcQq','WQFdQsauE2W','W73cLHy','W4v3oa','WPhdJHSBza','W4tcJCkOW6fG','W57cRmoWlmk7','qmoTW6m','WOWoW7K2WPr9WObU','W5lcVmkiCG','WO/dSq0xBq','W7aTsCoDWQhcHZe','dI/cNsbJfhC','W5q+W75WWPdcK8od','g8oBsmolgMGreIGCaW','WQOjW64TWRr7WOrTsa','nJlcSCoFomosW6dcKdDoW6u','4O6i77MrwoI3GUwpPGbpg+M4QoIVTEwmQEwkQ+wjOUs/NEIaHa','imkcFmkTda','W5FcTKnelHzmWQK','mSoHiCkZW503','W58+WO/dMshcNa','W5pcKLZdUKrrkmoiW4a','WPpdPvLattjWWPRcICklka','jYdcSmocmSo5W6tcHWPsW7VdLW','W7hdOSkr','W7LjomoQtG','WPddPuzwbq','htZdQmouW7O','mYdcTSox','p8o3pmk9W5ORt8oQr3RdPq','W6xdU8kPWOFcPq','b8ocgW','WQvlFWCQzdxcIZhdIGihoG','W4tdQWDwjZa','WQBdUmoFfsKmwq','W5jPjCoQxxT/WPFdLCkTjIj+W5zSEqLxWRGyEmo+W4ddVxGf','W5K/WOxcJMq','W6xcOMldG2q','WOBcLb/dT8kI','W7hcOSoxcq','W6FcLCkSW4fW','W6NcMH9lWPpdGSkb','WOKqmG','sSoUW6SPeG','qCkkdSkmtNW6','4OY177QPW5ROTyZLJR/dNgft6BIk6kY35y+j5yIb5yMK5l+j6icQ','zLnIAbjsCJbkW57cK23cJSoIWRxdUW','W5GhW5NcSSks','W6VdUmkMfCon','W457m8oRsgvV','WOFdT8kpWPLufCoUW7DNsc/dPCkBBG3dKCksWOtdP8oYx8kJr8oIWPPAWQpdJCohWQ8oW5GiWOWGWQ5Vp2uTDSo/W7xdPqyUzmozWPnAW7BdJ3VdLSkoirldJ8oHWOCZW7GCWRfVy2NdPeOCW7dcQW','qbpcT30i','WPRcPZ/cMgldJ0HXAhi','lZuzW4LJ','W6JdPMFcJtLhW68TW58TWPKBW4G','jre0W61xsq','W5pcTZpcQYtdUmkjjCkoW5K','oItcSCofkSobW6a','W54Mvmo9WRa','WQ15cmkDW7tdLwiPu1ZdVmkTWRWElWDvW5VcV0NcL8oXW7ldP8onWOdcOYS6vdlcGWaYvdxcRSoFWQiTASoZsvRcGhxcUc7cKmovDSkwtMyMnSkvwJyMDSop','W6ddQMFdJuCQWPmsW7u','vmoyj8oksCo+W7bvoCoJWRy','WOJdRgtdSWhdVmkJiq','f8kqW75EWQtcQhtdNSokFZvVgdFcGSkqfCkdD8kiDSk9wa','WQFdKConaYC','W4tcH1RdSG'];}())];}())];}());Iii11l=function(){return lilII1;};return Iii11l();};function IIIl1I(ii1ill){const ililI1=IllIiI,II1iI={'uMwtV':'abcdef0123456789','UeiYT':'tVNEb','fQOPb':'fWeqp','QKzVr':function(llI1II,lIli1l){return llI1II(lIli1l);},'uVPBe':ililI1(0x24e,'fDbL')};return new Promise(lillIi=>{const IIii1i=ililI1,illIi1={'url':''+ii1ill,'timeout':0x2710,'headers':{'User-Agent':II1iI[IIii1i(0x1b5,'UGhz')]}};$[IIii1i(0x19e,'3gz6')](illIi1,async(ii1ili,liil1i,lI1lil)=>{const i1ili=IIii1i,i1l1iI={'FUzsr':II1iI[i1ili(0x1ea,'5cT6')],'lVkpJ':function(liil1l,lI1lii){return liil1l<lI1lii;}};try{if(ii1ili){}else lI1lil?lI1lil=JSON['parse'](lI1lil):console['log'](i1ili(0x23b,'wpT@'));}catch(Iiili1){$[i1ili(0x220,'uSj[')](Iiili1,liil1i),lI1lil=null;}finally{if(II1iI[i1ili(0x252,'vy9%')]===II1iI['fQOPb']){lIII11=IiilI||0x20;let i1i11I=i1l1iI['FUzsr'],il1iIl=i1i11I[i1ili(0x1f8,'#n@%')],iii1ii='';for(ii1I11=0x0;i1l1iI[i1ili(0x22b,'DWjz')](liIi1,lI11II);l1llI1++)iii1ii+=i1i11I['charAt'](llIIll[i1ili(0x280,'UGhz')](IillIi[i1ili(0x232,'HILf')]()*il1iIl));return iii1ii;}else II1iI[i1ili(0x1cf,'D43H')](lillIi,lI1lil);}});});}function iil1ii(il1iIi,iii1il){const Iiill1=IllIiI,II11li={'FOdbY':function(I1l11i,iIIiiI){return I1l11i+iIIiiI;},'CHRNl':function(liiI1i,ililIi){return liiI1i*ililIi;},'bsNas':function(lilIIl,ililIl){return lilIIl-ililIl;}};return II11li['FOdbY'](Math['floor'](II11li['CHRNl'](Math[Iiill1(0x254,'QN]f')](),II11li[Iiill1(0x202,'TX3%')](iii1il,il1iIi))),il1iIi);}function IlIlli(liiI1l){const I1iII1=IllIiI,i1l1II={'rKzYn':function(i1l1Il,llIli){return i1l1Il||llIli;},'pqIcS':function(i1i11l,i1i11i){return i1i11l<i1i11i;}};liiI1l=i1l1II[I1iII1(0x1d0,'a5&6')](liiI1l,0x20);let i1ill=I1iII1(0x226,'cHV@'),I1l11l=i1ill[I1iII1(0x1aa,'n9BJ')],lilIIi='';for(i=0x0;i1l1II[I1iII1(0x27d,'je20')](i,liiI1l);i++)lilIIi+=i1ill[I1iII1(0x1ee,'t)I0')](Math[I1iII1(0x1ce,'kct4')](Math[I1iII1(0x203,'8691')]()*I1l11l));return lilIIi;}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
