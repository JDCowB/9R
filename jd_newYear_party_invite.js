/*
活动名称：京东看春晚助力
环境变量：JD_PARTY_INVITE_CODE // 指定助力码

自行控制助力上限

cron:1 1 1 1 *

*/

const $ = new Env('京东看春晚助力')
var iｉl='jsjiami.com.v7';const Iil1il=iii1II;function iii1II(_0x5d782c,_0xd04fca){const _0x5cf1dd=Iii11l();return iii1II=function(_0x401926,_0x3804f6){_0x401926=_0x401926-0x67;let _0x2a76c5=_0x5cf1dd[_0x401926];if(iii1II['ADcPXR']===undefined){var _0x3ec9c9=function(_0x257ed7){const _0x569dd8='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2eeb35='',_0x2cdea4='';for(let _0x466ac8=0x0,_0x5422b1,_0x2657e8,_0x355126=0x0;_0x2657e8=_0x257ed7['charAt'](_0x355126++);~_0x2657e8&&(_0x5422b1=_0x466ac8%0x4?_0x5422b1*0x40+_0x2657e8:_0x2657e8,_0x466ac8++%0x4)?_0x2eeb35+=String['fromCharCode'](0xff&_0x5422b1>>(-0x2*_0x466ac8&0x6)):0x0){_0x2657e8=_0x569dd8['indexOf'](_0x2657e8);}for(let _0x33e5c5=0x0,_0x3b3322=_0x2eeb35['length'];_0x33e5c5<_0x3b3322;_0x33e5c5++){_0x2cdea4+='%'+('00'+_0x2eeb35['charCodeAt'](_0x33e5c5)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2cdea4);};const _0x35a7b3=function(_0x39a205,_0xc4f139){let _0x62f53d=[],_0x3b33dc=0x0,_0x3a7b0c,_0x490b9b='';_0x39a205=_0x3ec9c9(_0x39a205);let _0x44c91a;for(_0x44c91a=0x0;_0x44c91a<0x100;_0x44c91a++){_0x62f53d[_0x44c91a]=_0x44c91a;}for(_0x44c91a=0x0;_0x44c91a<0x100;_0x44c91a++){_0x3b33dc=(_0x3b33dc+_0x62f53d[_0x44c91a]+_0xc4f139['charCodeAt'](_0x44c91a%_0xc4f139['length']))%0x100,_0x3a7b0c=_0x62f53d[_0x44c91a],_0x62f53d[_0x44c91a]=_0x62f53d[_0x3b33dc],_0x62f53d[_0x3b33dc]=_0x3a7b0c;}_0x44c91a=0x0,_0x3b33dc=0x0;for(let _0x197308=0x0;_0x197308<_0x39a205['length'];_0x197308++){_0x44c91a=(_0x44c91a+0x1)%0x100,_0x3b33dc=(_0x3b33dc+_0x62f53d[_0x44c91a])%0x100,_0x3a7b0c=_0x62f53d[_0x44c91a],_0x62f53d[_0x44c91a]=_0x62f53d[_0x3b33dc],_0x62f53d[_0x3b33dc]=_0x3a7b0c,_0x490b9b+=String['fromCharCode'](_0x39a205['charCodeAt'](_0x197308)^_0x62f53d[(_0x62f53d[_0x44c91a]+_0x62f53d[_0x3b33dc])%0x100]);}return _0x490b9b;};iii1II['nbtZHc']=_0x35a7b3,_0x5d782c=arguments,iii1II['ADcPXR']=!![];}const _0x2bc107=_0x5cf1dd[0x0],_0x29daad=_0x401926+_0x2bc107,_0x2d6377=_0x5d782c[_0x29daad];return!_0x2d6377?(iii1II['hAXnSX']===undefined&&(iii1II['hAXnSX']=!![]),_0x2a76c5=iii1II['nbtZHc'](_0x2a76c5,_0x3804f6),_0x5d782c[_0x29daad]=_0x2a76c5):_0x2a76c5=_0x2d6377,_0x2a76c5;},iii1II(_0x5d782c,_0xd04fca);}(function(I11i1I,iliIi1,l1l1ii,Il1i1I,Ii1iii,iIIilI,il1l1){return I11i1I=I11i1I>>0x7,iIIilI='hs',il1l1='hs',function(Ii1iil,Ilil1i,iili1,II11ii,Iil1iI){const I1llII=iii1II;II11ii='tfi',iIIilI=II11ii+iIIilI,Iil1iI='up',il1l1+=Iil1iI,iIIilI=iili1(iIIilI),il1l1=iili1(il1l1),iili1=0x0;const II11il=Ii1iil();while(!![]&&--Il1i1I+Ilil1i){try{II11ii=-parseInt(I1llII(0x10b,'$&Q9'))/0x1+parseInt(I1llII(0xea,'ai^Y'))/0x2+parseInt(I1llII(0x137,'oXt2'))/0x3+-parseInt(I1llII(0xdd,'Uq2Q'))/0x4+-parseInt(I1llII(0x6a,'44vV'))/0x5+-parseInt(I1llII(0xe6,'!2g9'))/0x6*(parseInt(I1llII(0x178,'!2g9'))/0x7)+parseInt(I1llII(0x169,'!2g9'))/0x8*(parseInt(I1llII(0x13a,'DvZ$'))/0x9);}catch(iIIil1){II11ii=iili1;}finally{Iil1iI=II11il[iIIilI]();if(I11i1I<=Il1i1I)iili1?Ii1iii?II11ii=Iil1iI:Ii1iii=Iil1iI:iili1=Iil1iI;else{if(iili1==Ii1iii['replace'](/[UQqnPIgrxwYTDeyAu=]/g,'')){if(II11ii===Ilil1i){II11il['un'+iIIilI](Iil1iI);break;}II11il[il1l1](Iil1iI);}}}}}(l1l1ii,iliIi1,function(IlllII,I1il1I,II111,lI1l1I,lill11,liI1i1,I11i11){return I1il1I='\x73\x70\x6c\x69\x74',IlllII=arguments[0x0],IlllII=IlllII[I1il1I](''),II111=`\x72\x65\x76\x65\x72\x73\x65`,IlllII=IlllII[II111]('\x76'),lI1l1I=`\x6a\x6f\x69\x6e`,(0x157a17,IlllII[lI1l1I](''));});}(0x6080,0x85b53,Iii11l,0xc3),Iii11l)&&(iｉl=0x4d60);const II1i1=require(Iil1il(0x113,'cwmG')),lI1lll=require(Iil1il(0x155,'1wn$')),iIiII=require('./utils/Rebels_jdCommon'),{H5st:iil1lI,jsTk:iiiliI}=require(Iil1il(0x187,'Z&Kj')),li1i1I=![];$[Iil1il(0x18a,'X8iW')]=process[Iil1il(0xdb,'1wn$')]['JD_PARTY_INVITE_CODE']||'';let illIii='0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM',ii1il1='0123456789',lI1llI='qwertyuiopasdfghjklzxcvbnm',illIil=Iil1il(0x104,'yI]2')+l1l111(0x6f,ii1il1+illIii)[Iil1il(0xd4,'LB)u')](),Ill1I=Iil1il(0xa0,'44vV')+l1l111(0x7b,ii1il1+illIii)[Iil1il(0x120,'ubNs')](),i11iiI='';const lIli11=Object[Iil1il(0xf1,'4X9g')](II1i1)[Iil1il(0xd6,')2yO')](l1iIII=>II1i1[l1iIII])[Iil1il(0xe1,'(PJR')](llI1I1=>llI1I1);!lIli11[0x0]&&($[Iil1il(0x101,'e#Si')]($['name'],'【提示】请先获取Cookie'),process['exit'](0x1));!(async()=>{const I11i1i=Iil1il,IlIlil={'WjrQf':function(lIli1I,II1il){return lIli1I(II1il);},'oWgpM':function(lllI11,I1lIll){return lllI11===I1lIll;},'zxHqH':'sefqf','NPKCZ':I11i1i(0x9f,'44vV'),'xNNPd':function(I1lIli,II1ii,IIIIII){return I1lIli(II1ii,IIIIII);},'CKisF':'SypNv','ZwxBT':'qRPYb','MBACr':I11i1i(0x99,'9*4#'),'hstmi':function(lillII,ii1ilI){return lillII<ii1ilI;},'AyUDw':I11i1i(0xf3,'*nsv'),'oEKSS':function(lI1ll1,iIiI1){return lI1ll1+iIiI1;},'KDZlx':I11i1i(0xe2,'U^01'),'NszNT':function(liil1I,i11ii1,IlIliI,l1iII1){return liil1I(i11ii1,IlIliI,l1iII1);},'wXobd':I11i1i(0x125,'oXt2'),'UBfMx':'jd-babelh5','uFNoS':function(iiill1){return iiill1();}};$[I11i1i(0x16c,'X#lh')]=0x0,authorCodeList=await IlIlil[I11i1i(0x80,'$c2m')](liil11,'http://code.257999.xyz/party.json');authorCodeList?IlIlil[I11i1i(0x98,'cwmG')](IlIlil['zxHqH'],IlIlil[I11i1i(0x141,'4X9g')])?(console['log'](IlIlil['NPKCZ']),$[I11i1i(0x156,'cwmG')]=authorCodeList[IlIlil[I11i1i(0xca,'$&Q9')](iiillI,0x0,authorCodeList['length'])]):lIIiiI['log'](I11i1i(0x116,'$c2m')+II1lil+I11i1i(0x91,'FtpY')+(IIli1l[I11i1i(0x17a,'bAxi')]||II1lii)):IlIlil[I11i1i(0x139,'LQP)')](IlIlil[I11i1i(0xba,'flrs')],IlIlil[I11i1i(0x111,'c4Xm')])?(i1ill1[I11i1i(0xad,'4X9g')]=iIIl1l['result'][I11i1i(0x7d,'m6h7')],llIli1[I11i1i(0xc3,'LQP)')]('获取助力码：'+iliIII[I11i1i(0x18a,'X8iW')])):console[I11i1i(0x124,'tEBm')](IlIlil[I11i1i(0xd9,'1wn$')]);lI1lll[I11i1i(0xb5,'flrs')]({'title':$[I11i1i(0xa2,'nf5T')]});for(let I1lIlI=0x0;IlIlil[I11i1i(0xe4,'44vV')](I1lIlI,lIli11[I11i1i(0x142,'44vV')]);I1lIlI++){if(IlIlil['oWgpM'](IlIlil[I11i1i(0x14a,'Uq2Q')],IlIlil[I11i1i(0x12d,'1wn$')])){$['index']=IlIlil[I11i1i(0x136,'*[cf')](I1lIlI,0x1),i11iiI=lIli11[I1lIlI],iIiII['setCookie'](i11iiI),$[I11i1i(0xfc,'GOuk')]=IlIlil[I11i1i(0x14c,'Szcb')](decodeURIComponent,iIiII[I11i1i(0x6e,'!Ibd')](i11iiI,IlIlil[I11i1i(0x88,'$Q06')])),$['UA']=iIiII[I11i1i(0x7f,'44vV')]($[I11i1i(0x11a,'!Ibd')]),$[I11i1i(0xc4,'U^01')]=lI1lll['create']($[I11i1i(0x188,'qoAk')],$[I11i1i(0x110,'44vV')]),$['nickName']='',console[I11i1i(0x106,'(PMf')]('\x0a******开始【京东账号'+$[I11i1i(0x180,'Szcb')]+'】'+($['nickName']||$[I11i1i(0x11f,')$C8')])+I11i1i(0x6c,'L(g3')),{eid:$[I11i1i(0xb2,')$1x')],jsToken:$[I11i1i(0x105,')2yO')]}=await IlIlil['NszNT'](iiiliI,$['UA'],IlIlil['wXobd'],IlIlil[I11i1i(0x177,'^iFt')]),await IlIlil[I11i1i(0x18e,'U^01')](lllI1I),iIiII['unsetCookie']();if($[I11i1i(0x100,'bAxi')])break;await $[I11i1i(0x133,'(PJR')](0x3e8);}else Iliill[I11i1i(0x130,'DvZ$')]('❓'+IIII11+'\x20'+i1illi['stringify'](i1illl));}li1i1I&&lI1lll['getMessage']()&&(lI1lll['updateContent'](lI1lll[I11i1i(0x85,'44vV')]+'\x0a'),await lI1lll[I11i1i(0x172,'$&Q9')]());})()[Iil1il(0x143,'$&Q9')](II1iI=>$[Iil1il(0x16a,')$1x')](II1iI))[Iil1il(0x11c,')$C8')](()=>$[Iil1il(0x9b,'$c2m')]());async function lllI1I(){const l1l1iI=Iil1il,llI1II={'zJKcZ':function(lillIi,illIi1){return lillIi||illIi1;},'rkMSr':l1l1iI(0xda,'X#lh'),'FYnxF':function(ii1ili,liil1i){return ii1ili<liil1i;},'SwZup':function(lI1lil,i1l1iI){return lI1lil*i1l1iI;},'TEfBg':function(liil1l,lI1lii){return liil1l+lI1lii;},'eBlqu':function(Iiili1,Iil1l1){return Iiili1*Iil1l1;},'Imogm':function(i1i11I,il1iIl){return i1i11I-il1iIl;},'CGHVP':function(iii1ii,il1iIi){return iii1ii===il1iIi;},'vpGHr':l1l1iI(0x147,'%&tJ'),'iXCHz':function(iii1il,II11li){return iii1il==II11li;},'qeGHT':function(I1l11i,iIIiiI){return I1l11i(iIIiiI);},'xpkFU':'hMxfL','LiisS':function(liiI1i,ililIi){return liiI1i!==ililIi;},'pZFyV':'iHduy','kvlLH':function(lilIIl,ililIl){return lilIIl===ililIl;},'xgAGx':l1l1iI(0x10a,')$1x'),'UKxFV':l1l1iI(0x114,'BB*e'),'UZAPV':function(liiI1l,i1l1II){return liiI1l(i1l1II);},'mVUtc':'TurPO','Fwhar':l1l1iI(0x14e,'4X9g')},lIli1l=await iIiII['getLoginStatus'](i11iiI);if(!lIli1l&&llI1II[l1l1iI(0x10e,'DvZ$')](typeof lIli1l,llI1II[l1l1iI(0x121,'9*4#')])){console[l1l1iI(0xbd,'4X9g')](l1l1iI(0x183,'Z&Kj'));return;}try{if(!$[l1l1iI(0x167,'!2g9')]){if(llI1II[l1l1iI(0x154,'$&Q9')]($[l1l1iI(0xe5,'(PMf')],0x1))await i1l1i1('party_invite'),await $['wait'](0x7d0),console[l1l1iI(0x124,'tEBm')]('⏺️\x20账号[1]默认去助力作者'),await llI1II['qeGHT'](lillI1,$[l1l1iI(0x134,'Uq2Q')]);else{if(llI1II[l1l1iI(0xb6,'yI]2')]==='hMxfL')await lillI1($[l1l1iI(0x12f,'$Q06')]);else{lii=llI1II[l1l1iI(0x71,'(PMf')](IllI1i,0x20);let I1l11l=llI1II['rkMSr'],lilIIi=I1l11l[l1l1iI(0x9d,'DvZ$')],i1l1Il='';for(i11I1l=0x0;llI1II[l1l1iI(0x81,')$C8')](lil,IllI1l);i11I1i++)i1l1Il+=I1l11l['charAt'](IillIl[l1l1iI(0x90,'L(g3')](llI1II[l1l1iI(0x13b,'(PMf')](llliil['random'](),lilIIi)));return i1l1Il;}}}else{if(llI1II[l1l1iI(0x69,'$Q06')](llI1II['pZFyV'],l1l1iI(0xcd,')2yO')))IiiIi1={...l1ii1,...ii1ll};else{if($[l1l1iI(0x6f,'!2g9')]==0x1)llI1II[l1l1iI(0x8c,'tEBm')](l1l1iI(0x148,'BB*e'),llI1II['xgAGx'])?(console[l1l1iI(0x173,'*nsv')](llI1II[l1l1iI(0x10d,'flrs')]),await llI1II[l1l1iI(0xed,'tEBm')](lillI1,$['authorCode'])):li1Ii['log']('❓'+Iliiii+'\x20'+i1illI[l1l1iI(0xbf,'7Q!c')](i1IIl));else{if(llI1II[l1l1iI(0x16e,'yI]2')]===llI1II[l1l1iI(0xd8,'qoAk')])return llI1II[l1l1iI(0xf4,'qoAk')](l1il11[l1l1iI(0xa8,'nf5T')](llI1II[l1l1iI(0x131,'ai^Y')](IiI1[l1l1iI(0xa9,'*nsv')](),llI1II[l1l1iI(0x8a,'$Q06')](liI,illIli))),l11i1l);else await llI1II['UZAPV'](lillI1,$['inviteCode']);}}}}catch(II11l1){console[l1l1iI(0x77,'Z&Kj')](II11l1[l1l1iI(0xe8,'(*p0')]);}}async function lillI1(Iil1lI){const I1llI1=Iil1il,IiiliI={'MSqlx':'party_assist'};$[I1llI1(0x12a,'7Q!c')]=Iil1lI,await i1l1i1(IiiliI[I1llI1(0x78,'Z&Kj')]),await $[I1llI1(0x181,')2yO')](0x7d0);}async function IlIlii(iii1iI,llIll){const I11i1l=Iil1il,il1iII={'dCTmq':'Content-Type','QEIXu':I11i1l(0x73,'oXt2'),'mCxHG':I11i1l(0x13c,'c4Xm'),'aLmBu':function(iilli,IlllIl){return iilli!==IlllIl;},'cETbW':'emsgA','aZgMg':function(II11lI,lI1IIi){return II11lI===lI1IIi;},'Axqqm':'igncR','tOlNp':function(I1l11I,Ilil1l){return I1l11I===Ilil1l;},'bSodF':I11i1l(0x8e,'^iFt'),'nNMRP':I11i1l(0x149,'LB)u'),'xfpFn':I11i1l(0x16d,'*nsv'),'ezzsR':I11i1l(0xc1,'FtpY'),'dxrdw':'jQIiB','xHasM':I11i1l(0xd3,'c4Xm'),'PtOBY':'jtMOB','oXqCy':I11i1l(0x18f,'%&tJ')};try{switch(iii1iI){case il1iII['mCxHG']:if(llIll[I11i1l(0x12e,'ai^Y')]===0x0&&llIll[I11i1l(0x15a,'9*4#')]){if(il1iII['aLmBu'](il1iII['cETbW'],I11i1l(0x128,'$&Q9'))){iii1I1[I11i1l(0x67,'bAxi')]('账号无效');return;}else{const iilll=llIll?.[I11i1l(0x8b,'BB*e')];if(il1iII[I11i1l(0x7c,'GOuk')](iilll[I11i1l(0x153,'nf5T')],0x0)&&iilll[I11i1l(0xa7,'7Q!c')])$[I11i1l(0x7d,'m6h7')]=iilll['result']['inviteCode'],console[I11i1l(0x175,'9*4#')](I11i1l(0x14b,'$Q06')+$[I11i1l(0xbb,'oXt2')]);else iilll[I11i1l(0x145,'c4Xm')]?il1iII['aZgMg'](il1iII[I11i1l(0xf0,'!Ibd')],I11i1l(0x176,'^iFt'))?(console[I11i1l(0x124,'tEBm')](iilll[I11i1l(0xef,'44vV')]),$['message'][I11i1l(0x182,'(PMf')](iilll[I11i1l(0xf9,'LQP)')])):(delete IIll1[I11i1l(0x168,'c4Xm')],delete ll1il['headers'][il1iII[I11i1l(0xfb,'(PJR')]]):console[I11i1l(0xc3,'LQP)')]('❓'+iii1iI+'\x20'+JSON[I11i1l(0xd5,'*nsv')](llIll));}}else llIll[I11i1l(0x151,'(PMf')]?il1iII[I11i1l(0x72,'T8!B')](il1iII['bSodF'],il1iII[I11i1l(0x11d,'9*4#')])?(llIll1['assistedNum']+=0x1,Illl1l['log'](I11i1l(0x17c,'Q*V$')+Illl1i[I11i1l(0x68,'U^01')]+']')):(console[I11i1l(0x173,'*nsv')](llIll[I11i1l(0x87,'e#Si')]),$['message'][I11i1l(0x10f,')$1x')](llIll[I11i1l(0xe8,'(*p0')])):console[I11i1l(0xe7,'ai^Y')]('❓'+iii1iI+'\x20'+JSON['stringify'](llIll));break;case'party_assist':if(llIll[I11i1l(0x18b,'qoAk')]===0x0&&llIll[I11i1l(0x168,'c4Xm')]){if(il1iII[I11i1l(0xd7,'e#Si')]!==il1iII[I11i1l(0x186,'*[cf')]){const iIIiil=llIll?.[I11i1l(0x157,'GOuk')];if(iIIiil['bizCode']===0x0&&iIIiil['result'])$['assistedNum']+=0x1,console[I11i1l(0x97,'oXt2')](I11i1l(0xc2,'m6h7')+$[I11i1l(0x82,'4X9g')]+']');else iIIiil['bizMsg']?(console[I11i1l(0xc3,'LQP)')]('❌\x20'+iIIiil[I11i1l(0xb0,'^iFt')]),$[I11i1l(0x17a,'bAxi')][I11i1l(0x14d,'1wn$')](iIIiil[I11i1l(0x13d,'Uq2Q')])):console[I11i1l(0x97,'oXt2')]('❓'+iii1iI+'\x20'+JSON[I11i1l(0xf5,'m6h7')](llIll));}else lilIl1[I11i1l(0x86,'T8!B')](i1l1ii[I11i1l(0x7b,'cwmG')],il1iII[I11i1l(0x89,'qoAk')]),i1l1[I11i1l(0xf6,'4X9g')](0x1);}else llIll[I11i1l(0x117,'flrs')]?il1iII[I11i1l(0x146,'$Q06')]===il1iII[I11i1l(0x16f,'nf5T')]?l1l11l['message'][I11i1l(0xbc,'$Q06')](IilIil):(console[I11i1l(0xcb,'$Q06')]('❌\x20'+llIll[I11i1l(0xc8,'T8!B')]),$[I11i1l(0x151,'(PMf')]['fix'](llIll['message'])):console[I11i1l(0xfd,'Q*V$')]('❓'+iii1iI+'\x20'+JSON[I11i1l(0x185,'U^01')](llIll));break;}}catch(I1iIIl){il1iII[I11i1l(0x9e,'BB*e')](il1iII[I11i1l(0x7a,'c4Xm')],il1iII[I11i1l(0x13e,')$1x')])?console[I11i1l(0x124,'tEBm')](I11i1l(0x123,'tEBm')+iii1iI+I11i1l(0xbe,'Z&Kj')+(I1iIIl[I11i1l(0x18c,'!Ibd')]||I1iIIl)):(ll1iI[I11i1l(0xa3,'nf5T')]('❌\x20'+iI1lll['message']),l1lIll['message'][I11i1l(0xff,'LQP)')](I1l1II[I11i1l(0x18c,'!Ibd')]));}}async function i1l1i1(i1ilI){const il1il=Iil1il,iii1lI={'AJjcb':'❖\x20测试连通性中...\x0a❖\x20服务状态正常...\x0a','djiYa':function(I1iIII,liiI11,ililI1){return I1iIII(liiI11,ililI1);},'raJGb':'未获取到数据,请重新运行','sTfnB':il1il(0x171,'Z&Kj'),'XkWBe':il1il(0x16b,'GOuk'),'rgpEt':il1il(0xe0,'DvZ$'),'CpLKR':il1il(0xf2,'LQP)'),'vKDIR':il1il(0x193,'^iFt'),'NSxwk':'Babel_dev_other_11lotterystart','JbttK':'4.4','tTfgQ':il1il(0x135,'Q*V$'),'OZoPH':il1il(0xdf,'$c2m'),'eqeZX':il1il(0x163,'FtpY'),'heHfP':il1il(0x109,'44vV'),'mHgBw':function(IIii1i,i1ili){return IIii1i===i1ili;},'dRpcr':'RFmLE','GpXTT':il1il(0xb1,'$&Q9'),'rhIvf':'application/json,\x20text/plain,\x20*/*','dhtQF':il1il(0x13f,'U^01'),'RIAYE':il1il(0x8f,'AnWw'),'bKJbe':'https://prodev.m.jd.com','BNuym':il1il(0x84,'1wn$'),'HsWps':il1il(0xcc,'Szcb'),'wNVyE':il1il(0xb8,'X8iW'),'enlRJ':il1il(0xce,'yI]2'),'AiYdi':il1il(0x158,')$1x'),'QgWQB':'Content-Type','nVPtm':'UMiYZ','zTyam':il1il(0x95,'U^01'),'xmWFu':function(Iiill1,I1iII1){return Iiill1!==I1iII1;},'IvYdE':il1il(0xd1,'GOuk'),'ZnzbS':function(lilII1,iill1,iii1l1){return lilII1(iill1,iii1l1);},'LMBoe':function(IIliIl,II11ll){return IIliIl>=II11ll;},'OWnVS':il1il(0xee,'tEBm'),'nQjAZ':il1il(0xac,'$&Q9')};if($[il1il(0x108,'e#Si')]||$[il1il(0x6d,'*nsv')])return;let i1ilI1='',Iiilii=null,Iil1li=null,Iiilil=iii1lI[il1il(0x118,'!Ibd')],Iil1ll={},iillI={};switch(i1ilI){case iii1lI[il1il(0x144,'Z&Kj')]:i1ilI1=il1il(0x140,'Z&Kj'),Iil1li={'appid':iii1lI[il1il(0xfa,'L(g3')],'functionId':iii1lI['XkWBe'],'body':JSON['stringify']({})};break;case il1il(0x102,'e#Si'):iillI={'appId':il1il(0x107,'bAxi'),'functionId':il1il(0x17b,'*nsv'),'appid':iii1lI['rgpEt'],'clientVersion':iii1lI[il1il(0x122,'oXt2')],'client':il1il(0x127,'f0Tz'),'body':{'inviteCode':$['inviter']||'','deviceInfo':JSON[il1il(0x14f,'c4Xm')]({'sdkToken':illIil,'jsToken':Ill1I}),'areaInfo':'','unpl':'','qdPageId':iii1lI[il1il(0x17d,'e#Si')],'mdClickId':iii1lI[il1il(0xfe,'oXt2')]},'version':iii1lI[il1il(0x170,'U^01')],'ua':$['UA'],'t':!![]},Iil1ll=await iil1lI['getH5st'](iillI),i1ilI1=il1il(0x161,'Szcb'),Iiilii=Iil1ll[il1il(0x70,'Uq2Q')];break;default:console[il1il(0xb7,'c4Xm')](il1il(0xb9,'*nsv')+i1ilI);return;}const lI1III={'d_model':iii1lI['tTfgQ'],'osVersion':'17.3','uuid':''};($[il1il(0x8d,'44vV')]||$['jsToken'])&&(il1il(0x96,'1wn$')===iii1lI[il1il(0x17f,'Q*V$')]?(lI1III[iii1lI[il1il(0x126,'f0Tz')]]=$[il1il(0xeb,'(PMf')],lI1III[iii1lI['heHfP']]=$['jsToken']):IliI1i={...ll1ii,...IIli11});Iiilii&&(Iiilii={...Iiilii,...lI1III});Iil1li&&(iii1lI[il1il(0x179,'f0Tz')](iii1lI[il1il(0xc7,'cwmG')],iii1lI[il1il(0x11e,'tEBm')])?lilIl=IilIlI[il1il(0x115,')$C8')](iIli11):Iil1li={...Iil1li,...lI1III});const IIliIi={'url':i1ilI1,'method':Iiilil,'headers':{'Accept':iii1lI[il1il(0xc0,'GOuk')],'Accept-Encoding':il1il(0xae,'m6h7'),'Accept-Language':iii1lI['dhtQF'],'Connection':iii1lI['RIAYE'],'Content-Type':il1il(0xc5,'44vV'),'Cookie':i11iiI,'Origin':iii1lI['bKJbe'],'Referer':iii1lI[il1il(0x15e,'Q*V$')],'Sec-Fetch-Dest':iii1lI[il1il(0xe3,'cwmG')],'Sec-Fetch-Mode':iii1lI['wNVyE'],'Sec-Fetch-Site':iii1lI[il1il(0x83,'$Q06')],'User-Agent':$['UA']},'params':Iil1li,'data':Iiilii,'timeout':0x3a98};Iiilil===iii1lI[il1il(0x94,')2yO')]&&(delete IIliIi[il1il(0xa4,'yI]2')],delete IIliIi[il1il(0x164,'^iFt')][iii1lI[il1il(0x15d,'tEBm')]]);const IllIiI=0x1;let i1il1=0x0,I1l111=null,IIii1l=![];while(i1il1<IllIiI){i1il1>0x0&&(iii1lI[il1il(0x15f,'DvZ$')]===il1il(0xde,'AnWw')?I1iIl1[il1il(0xfd,'Q*V$')](i1il[il1il(0x15c,'(PJR')]):await $[il1il(0x138,'ai^Y')](0x3e8));const lI1II1=await iIiII['request'](IIliIi);if(!lI1II1['success']){if(iii1lI[il1il(0x150,'U^01')]===il1il(0x132,'ai^Y')){I1l111=il1il(0xab,'X8iW')+i1ilI+il1il(0x15b,'LB)u')+lI1II1['error'],i1il1++;continue;}else illIlI[il1il(0xaa,'Q*V$')](liIiI,l1il1I),Iiili=null;}if(!lI1II1?.[il1il(0x12c,'$&Q9')]){if(iii1lI[il1il(0xf8,'FtpY')]('CBxIM',iii1lI[il1il(0x190,'9*4#')]))IlI1I[il1il(0x74,'e#Si')](iii1lI['AJjcb']),II11Ii['authorCode']=II11Il[iii1lI['djiYa'](IlI11,0x0,iIIIIl[il1il(0x174,'FtpY')])];else{I1l111=il1il(0xd2,'%&tJ')+i1ilI+'\x20请求失败\x20➜\x20无响应数据',i1il1++;continue;}}iii1lI[il1il(0xa1,'44vV')](IlIlii,i1ilI,lI1II1[il1il(0x168,'c4Xm')]),IIii1l=![];break;}iii1lI[il1il(0x76,'7Q!c')](i1il1,IllIiI)&&(console['log'](I1l111),IIii1l&&($['outFlag']=!![],$[il1il(0x18d,'yI]2')]&&(iii1lI[il1il(0x162,'yI]2')]===iii1lI['nQjAZ']?Iiiii[il1il(0x17e,'FtpY')](iii1lI[il1il(0x191,'*[cf')]):$['message']['fix'](I1l111))));}function liil11(Ii1ilI){const Il1i1i=Iil1il,II11i1={'XrZCH':'paSGS','pvzgp':Il1i1i(0x159,'(*p0'),'LJHgo':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2013_2_3\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Version/13.0.3\x20Mobile/15E148\x20Safari/604.1\x20Edg/87.0.4280.88'};return new Promise(iliIil=>{const iIIili=Il1i1i,iliIii={'rfKzk':II11i1[iIIili(0xdc,'9*4#')],'yfLRD':function(il1li,iIIill){return il1li===iIIill;},'nyCga':iIIili(0x79,'LQP)'),'TREWU':function(iilii,Ill11i){return iilii===Ill11i;},'STCnX':II11i1[iIIili(0x192,'FtpY')],'gQGgi':'未获取到数据,请重新运行','OUcgr':function(iilil,Ill11l){return iilil!==Ill11l;},'iUyov':iIIili(0x103,'(PMf'),'DmfFX':iIIili(0x12b,')$1x')},lill1i={'url':''+Ii1ilI,'timeout':0x2710,'headers':{'User-Agent':II11i1[iIIili(0xcf,'c4Xm')]}};$[iIIili(0x112,'X#lh')](lill1i,async(il1ll,i1ilIi,lill1l)=>{const Ii1iiI=iIIili;try{if('APEJM'!==iliIii[Ii1iiI(0x7e,'AnWw')]){if(il1ll){}else iliIii['yfLRD']('thnhn',iliIii['nyCga'])?ilI1lI['log']('❓'+IiiIll+'\x20'+IIlii[Ii1iiI(0x129,'*[cf')](IlI1il)):lill1l?iliIii['TREWU'](Ii1iiI(0x93,'Q*V$'),iliIii['STCnX'])?lill1l=JSON[Ii1iiI(0xe9,'GOuk')](lill1l):(IiiIli[Ii1iiI(0x189,')$C8')]('❌\x20'+iillli[Ii1iiI(0x119,'Q*V$')]),I1l1Ii[Ii1iiI(0x152,'GOuk')][Ii1iiI(0xc9,'44vV')](I1i11i[Ii1iiI(0x6b,'!Ibd')])):console[Ii1iiI(0x9a,'(*p0')](iliIii[Ii1iiI(0xd0,'DvZ$')]);}else I1i111['log']('❓'+ilI1li+'\x20'+IIliI[Ii1iiI(0x75,'$c2m')](ilI1ll));}catch(llI11I){iliIii[Ii1iiI(0xb4,'*nsv')](iliIii[Ii1iiI(0x9c,'AnWw')],Ii1iiI(0x92,'e#Si'))?Iiil1?lIII1i=l11i11[Ii1iiI(0x11b,'T8!B')](IilIl1):lIII1l['log']('未获取到数据,请重新运行'):($[Ii1iiI(0x10c,'^iFt')](llI11I,i1ilIi),lill1l=null);}finally{iliIii[Ii1iiI(0xb3,'nf5T')](Ii1iiI(0x166,'ubNs'),iliIii['DmfFX'])?illIl1(l1llII):iliIil(lill1l);}});});}function iiillI(Iil1i1,IIii11){const Ilil1I=Iil1il,iliIl1={'mmQtW':function(Ii1il1,iii1ll){return Ii1il1+iii1ll;},'ZNGcg':function(IIliI1,il1lI){return IIliI1*il1lI;}};return iliIl1[Ilil1I(0xa5,'bAxi')](Math['floor'](iliIl1[Ilil1I(0xa6,'bAxi')](Math[Ilil1I(0xf7,')$C8')](),IIii11-Iil1i1)),Iil1i1);}function Iii11l(){const II11iI=(function(){return[...[iｉl,'qnjInysPDwjiaxmYeix.cugouqnmrU.uvTY7TQuA==','pSobW5i','DCooz8kAsLxdIq','A8kcWPBcG8kC','AePBDq4','ACkRWQpcImkj','uCoXE8on','WP7dNCk6ACoP','vNiP','WRztWQ3dMdW','mdRdPmkiW7TsWRznpSoO','WO8YytZcIq','WQNOROxMS57LK6JLUQr8','ESorq8kQtq','FtVcRmoGWP8','WQxcNCk1WPvL','vSkRWRpcGG4','WOJcMCkhW79S','jJPg','W6KnW7JdHI4','4PYGt+wgV+wMU+wYJoE7T8k8W5FcMCo9','lCkFfW','BvNdUSoP','mGRdUmkxWQa','WOSBW5iLEsK','vmoCySoUzq','4P2Lo+A0HUITHoI9S+McGoAcIUs5T8oWDSkAWOVINleE5P2m5yQU54ME5Ogo5QYr5BQqlmo2W5mE','wx8PWQhcNG','Axu3W7pdVG','W77dUSkfWRy','W7ZdTmkp','WOaXWPpcPG','FmoOmSkeWPe','s8oljmktWQe','rmkZfaxcTSkR','W7BdT8khWRZcPq','WRjIgmk2e3a','FJdcVmoTWOddKW','8kkQHX0','fmkrWP/dM2C','vSodW57cU8kPWQNcHv5tW5K','W6ZcL8oQk07dK07cR8kwW6JdJcmZAgTIpa','B2ZcS8okW6acWOPqh8oyWO3dRW','WOD+WOFdTGe7','nSkKWQZdKee','WOOeW7y','W4tdICkTWOtcGG','WO9wfCk1dG','WP3dHSk8gCo0WQy','WPWGWOZcGCoC','WOHhjq','fenpWRu','4P6mi+ADNoECT+IUI+AXN8op','WR3dOSk7dmoB','iZTxWRFcN0VcNmkyW5BdOq','rSkVWRq','u8ocW48','c+ISHUAWPEwqJEw4Ss8','rCkIfrNcTmk4WPCIW48','W6NcSCkQv8oh','W40eW7ftsa','4P6oW43LIkRLI4dMIBlLIAWkWPe','WOHwWQa','BSkaWOBcLITAWRy','uMS9W73dHmo5W4WUWRC3W5RcRH8tnNJcN2iuW4DWWRxdKgeBBmkCWOSBW6/cNZxcNG','kCksjCoBeGBcNfNdQv7cUSkOW74','W6iiW6/dLre','pSoxW4BcNCo6WP7dUa','vxi1','bCksWRddReC','tmkPWQS','cvHOWRiw','WO3cVmkiWOr1','WPCXWORcOSkKWOVdQCoWW63dMmoa','WQHIcMFdTa','WOaVW7SLza','W5JcM8kBAmoS','8lQ4SSkh','WQTseuNdNa','zLuiW7bEDtVdHw8GgG','WRn3bmk7eNRcHKFcMa','WONcLCkC','ymonzmkVrq','F3H6taK','WQBcS8kWW69w','W5yXW6TDW63dU8oyfLmkWRJcR8kxWPv2W5e','WO7cN8kh','lH0JW7/dTq','WRBdMeqgdmk6WOOgW54If8knWPm','aZZdJ8k2WQu','AL7dOSoFW5y','WPqoW44RyYBcVSowW68','g8kuW4RcKmoesW','C8krWQRcLsnt','W44PW4JdHHa','w2G5W7ZdHa','g0udv8oH','W7DHhCoUwCofWP1LW4qJWPG','swH5','lmkvaWFcH8oqWOm','W6VcUmkruSoe'],...(function(){return[...['fd4VaMSttSolWRz0W4FcQCo+','f0id','vSk/W7BdNCokW7/dJfpdQmozWQ4','WQddSCkxDCo3','WQldMmk+C8oP','uxi3W5ZdNSo9','FmoPfCo7W6K','vmoiW5hcOq','W5uxW7DFWPC','WPn6nCkqcq','BuP0BXW','W7JcMCoXmGZcLepcRmkj','wSovW4hcPG','WP7cRX7dSCkDW54','W7eFW4TJrq','WOzqWR08W5tcUa','WPS5FHBcJW','gCk+W7lcICoq','W47cQSkgu8oVW7bbfq','FJdcVa','bazzWQNcGa','WOjqWR8','y8oWdCk1WQH2','DCoyCW','AmokzSkDuM3dJwZdO3RcV8k5','efeWCCo/','WO40WOpdT8k4','WO7cH8k4WP5Nnc0','hKqa','C8k0vCogW7y','ASoEESkSrvy','sZySW6hdHmk3W4GZWRP1W4ddRGXBlW','WQKyW51QW7S','t8oRW4FcHbpcPIZdJmoDWQtdV8ow','WOL4WPRdVGaU','WQVdOSkQoCol','WQq5W7quxq','WOKeW6O','zMGOW6pdO8o7W4a/','WR5FoKldJW','W5a2W7W','WQH1W7xdKIddHmkaCWtdSa','4O+p77QFl+I2IUwpPW1wbEM5U+IVR+wpKEwlHowkJUs/OEIaPG','WPZcRWldPSkx','4P2ffUAEVUIbSEAVVEEGSowLQUEqNCo6','WPpdJmkHdmo8WQBcMa','tSofaSoKW4y','CdBcOCoLWOhdHG','AmoIaCo4W4RdUsBdMG','i8otW4FcNCo+','WORcPX7dTmkEW59s','gce0W67dRq','WRldM8koCCo1','WRNcVrxdP8k8W5jgFW','iSoYW4RdKq97WORcQmkeWP7cRq','ab8+W7tdJW','csvTWPxcUq','4P65WOVMN7ZOG5JMR4lNOkJLP6lNK4/cUa','WPNdHmkX','iIfvWQ7cMbtdSmoyW4ldTSkOW7NcNNe+WPJdLCo1zmk7W7HZWQL1WPKriSoHbGyWWR8xn1pdGYlcMu7cRtKRWQPVW4PZc3iwlCkjWQJdNNHZWPtdN8kaW7FdRJpcUmoEW5dcMXqdW47cL0RdOW8','cf9qWR1D','gKya','gmkXWO3dM2i','fmo8WRpcG8kwW7FdS3VdGG','x8k4erNcRSk6WOW','WQuRW5bTW48','gCk9WORdNq','WQRcImkKW6Ht','rMH6vq','sCkOWRRcHSkqhmooW6hcGSoo','WOSrW5S','qevYqsC','CeLyvXy','cSkCW4/cKa','W6pcNqvxuCo+W7etW6Gj','iNldQCkfW4VcMmoK','cmonWORcUCkR','FMytW6ZdNr/cJ8kdW6xdKCk9WPS','uMz3ra','WOTUWQabW6O','W55hW7uTwJlcUmoT','ivW9r8oP','WPrjmhtdOIBdPXlcJCkGW7vD','W6dcGqTYtCoR','WOa1W6nyW7i','ECknW5JcPGqrWQNcP8o3W6vIWQNdReuXW4SvWPNcMIhcTSo9DJ7cTdzllmoKySk4WQ9JWRFcPtBdKmkHW5WkWQxdQmo9iHm6AG','q8kfe8kWW5y1cJ3dICovuwdcJf98WQldJCkqW7/dLchcSqu','rCovW6dcO8kv','x34JW7BdMCoY','hSk9WORdN0S','C8kAmmkcW4a','WOzboe3dQb4','rmk+WR7cI8kt','W7tdTSoiW6OrimoM','C8oLqmoDya','vuSAW6HJ','W4pcKsr7sq','6i6x5yYq5yML5yM056oL772J','o19QWPCj','WO3cMmkj','D8o6W4ZcKCkR','WPDCmgNdTr7dPXRcGG'],...(function(){return['ECkXWOZcHcC','h04uqCo4WR52','W7BcVmkquSoaW7zj','W7ldSSksWPdcUcy0','fmkeWR3dTfK','W4xdNSkeW5Hnk8kAW4ZdIrRdHZzxlvr+kNZcM8kVW4bLvCoZWQRcMei','W6CVW6VdNGZdMCkSDWNdSa','W7/cUmkxqa','WQGOW4y','lSkubZZcIW','eG4nW50','mUIVJEAWN+wMSEI0IZdIN5xcPG','emkyW5xcL8oaxSog','WQtdJmkbDmoJ','ubhcRSorWP8','WOKOW6W2ya','bYT4WQJcN8kSWPuGWOWwW5ldMYy','befSWRyCW41pWRBdQ8omfmoXeLRcHmo+W49BW7rhfdjt','WQShWONcKCoA','W6WBW7G','WO1YWPZdNXCUgq','g0LtWQhcKmkt','h8ohW4JdPty','WQ84xmkWh8opWOHeW7mw','WObjnMe','W7DIe8oUuSkyW7nOW5ylWPhdKuG','WOmcW7vEW7LC','W6VcUmkrvCoyW45fhHFcUmk7zW','W5yGW7TqW7VdQCknqY9mW6e','WOrHo8k8gG','WOKgWRlcS8oQ','W6JdK8kjWQdcMG','sCkhWOhcKqe','E8k+nmku','dCkPWO3dLa','WQXSeq','W6uxW7jcrdq','gGaE','WOXWWPpdMca','WRbvWPVdTGO','W7DJhmoOjSoOWO1GW5O4','agzsWQvY','FmoGemkdWQD1WQ8','WRbIbmkMbulcJLlcKSozz04','4PYxF+wjSUwiS+AlOUwiVSo9yG','BSoGumkGEq','W6uDW7S','xqxcTmo4WRO','bvT8WQmx','WPpcLCkfWOu','feiF','6lsn5yYg5PAh5PAi','WPGewcVcGW','CmkrWOFcJcrAWRRcQCk1','aSoYWRVcMCkQ','bCoEeSk0W4XJvJ3dUSoawIJcMajoW4q','ugf2sam','WOdcOrC','hKjlWQ/cKmkEW5zNWPKw','wMb2sa','umo0f8o5W6xdVY4','WOK1WPtcTmoOWOpdVG','DSkJWRVcIHK','W5pdM8oYW4K8','pXKGW5JdUa','fCoPWOVcRCkA','W7KeW6zcqa','WQHyW5ddSubSw8o5f14','FCoQba','ySkwWOBcJdLjWRBcQ8kcW6eY','BmkVWQxcNmk3','acL1WQFcLmkIWPGrWR8uW77dGaa','x8o4hSohW7FdVW','W4n0jhNdKCo6ga','WQ92aSkuehZcIa','wSo0emojW6VdTYddLSoiWO4kWOpdTSop','WQ84tSk8eW','W7lcIqnEu8o/W7yDW7Gn','cgeSuCod','j8o9W5NcOmoR','44gA5O6f56sB44op6kYC5ywM6i2O5yYHW7hdQ8kOWRZcMJO','DmoeCW','EKldPSoLW7a5b33cOW','ESkBjr/cVW','r8kEaa','zSkIfSkSW50','WRnjWOqtW6y','WRrCduldGG','W6G7W7ldKW','W7RcG8keBmog','W6lcG8o1mHBcLMNcPCkuW6e','ktNdISkcWR0','vh4JW4tdRa','xLZdPSoDW7G','WQRcLX7dRCk0','xSoEW5VcU8kUWRJcO1v5W4K9','rCkOWQdcVCkU','WOpcHCkfW5XxFCogW4ZdQW3dIJDEkcvGyxJcM8olW6Dev8kOWQ7cN1CgW7BdTq9si8kuWPTqWQtdIbtcLI0bv8kRWPqycCkNvqDZdwxcUwq3rxLgng1vWRxdIX1GyCoJamouWQ1VvCkPBG','uhqJW6xdImo0W5K'];}())];}())];}());Iii11l=function(){return II11iI;};return Iii11l();};function l1l111(IliIIl){const iliIiI=Iil1il,I1il1l={'EBJGT':function(Ill11I,I1il1i){return Ill11I||I1il1i;},'kXtfh':'abcdef0123456789','qZVxx':function(IliIIi,lI1l1i){return IliIIi*lI1l1i;}};IliIIl=I1il1l['EBJGT'](IliIIl,0x20);let lI1l1l=I1il1l['kXtfh'],IIliII=lI1l1l[iliIiI(0x165,'X8iW')],iiliI='';for(i=0x0;i<IliIIl;i++)iiliI+=lI1l1l['charAt'](Math['floor'](I1il1l[iliIiI(0x184,'L(g3')](Math[iliIiI(0xf7,')$C8')](),IIliII)));return iiliI;}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
