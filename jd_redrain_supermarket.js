/*
超市红包雨

cron:1 1 1 1 * jd_redrain_supermarket.js

*/

const $ = new Env('超市红包雨');
var iｉl='jsjiami.com.v7';const ii1iiI=iii1II;(function(ill11l,I1lIiI,lllili,IliiiI,Ill11,liiIII,li1i11){return ill11l=ill11l>>0x1,liiIII='hs',li1i11='hs',function(iI11I1,il1i1l,IlIlll,IIIl1I,iil1ii){const i11il1=iii1II;IIIl1I='tfi',liiIII=IIIl1I+liiIII,iil1ii='up',li1i11+=iil1ii,liiIII=IlIlll(liiIII),li1i11=IlIlll(li1i11),IlIlll=0x0;const IlIlli=iI11I1();while(!![]&&--IliiiI+il1i1l){try{IIIl1I=parseInt(i11il1(0x26a,'uDEf'))/0x1*(parseInt(i11il1(0x269,'^ng^'))/0x2)+parseInt(i11il1(0x268,'MVZS'))/0x3*(-parseInt(i11il1(0x26f,'nle4'))/0x4)+-parseInt(i11il1(0x22a,'MVZS'))/0x5*(-parseInt(i11il1(0x1d6,'7UUI'))/0x6)+-parseInt(i11il1(0x238,'9quB'))/0x7+-parseInt(i11il1(0x226,'uDEf'))/0x8*(parseInt(i11il1(0x1c4,'DUD]'))/0x9)+parseInt(i11il1(0x217,'DUD]'))/0xa*(parseInt(i11il1(0x1d2,'@8hY'))/0xb)+parseInt(i11il1(0x19e,'^ng^'))/0xc;}catch(il1i1i){IIIl1I=IlIlll;}finally{iil1ii=IlIlli[liiIII]();if(ill11l<=IliiiI)IlIlll?Ill11?IIIl1I=iil1ii:Ill11=iil1ii:IlIlll=iil1ii;else{if(IlIlll==Ill11['replace'](/[lAqCVJQynbULHPeNYhBpO=]/g,'')){if(IIIl1I===il1i1l){IlIlli['un'+liiIII](iil1ii);break;}IlIlli[li1i11](iil1ii);}}}}}(lllili,I1lIiI,function(lil111,i11ilI,ii1ii1,llllI,lllil1,iil1il,ilil1I){return i11ilI='\x73\x70\x6c\x69\x74',lil111=arguments[0x0],lil111=lil111[i11ilI](''),ii1ii1=`\x72\x65\x76\x65\x72\x73\x65`,lil111=lil111[ii1ii1]('\x76'),llllI=`\x6a\x6f\x69\x6e`,(0x156881,lil111[llllI](''));});}(0x192,0xe677a,Iii11l,0xcb),Iii11l)&&(iｉl=`\xb91`);const lilIl=require(ii1iiI(0x25c,'^ng^')),IilIlI=require(ii1iiI(0x237,'Dvs[')),iIli11=require('./utils/Rebels_jdCommon'),{H5st:Iiiil}=require(ii1iiI(0x250,'JF99')),Iiiii=![];let l11i1I='';const IiII=Object[ii1iiI(0x1ff,'$BS1')](lilIl)['map'](Iiili=>lilIl[Iiili])[ii1iiI(0x262,'O($4')](IilIli=>IilIli);!IiII[0x0]&&($[ii1iiI(0x1d7,'uDEf')]($[ii1iiI(0x1c9,'!xHV')],ii1iiI(0x1db,'Rljg')),process[ii1iiI(0x210,'OJlN')](0x1));type_map={0x4:'超市卡',0x5:ii1iiI(0x198,'UwyY')},!(async()=>{const lllilI=ii1iiI,li1={'YzVDf':'【提示】请先获取Cookie','qriCn':function(illIl1,l1llII){return illIl1(l1llII);},'VpptX':lllilI(0x202,'ourx'),'iacvJ':function(IilIll,lI11Ii){return IilIll===lI11Ii;},'GkgTD':lllilI(0x1cf,'SnYt'),'VERFB':function(Iiill,l11i1i,lI11I1){return Iiill(l11i1i,lI11I1);},'eyPqQ':lllilI(0x203,'O($4'),'kEhIt':lllilI(0x254,'RR78'),'DMYTP':function(l1il11,IiI1){return l1il11<IiI1;},'bABEn':function(liI,illIli){return liI+illIli;},'hnfAD':function(l11i1l,lIII11){return l11i1l(lIII11);},'RhNIY':function(IiilI){return IiilI();},'CETbI':lllilI(0x1b5,'Lb%7')};authorCodeList=await li1[lllilI(0x246,'sd&K')](l1il1I,li1[lllilI(0x24b,'HACJ')]);if(authorCodeList){if(li1[lllilI(0x1f8,'aZ]r')](lllilI(0x1ee,'^ng^'),lllilI(0x274,'WdpE'))){console[lllilI(0x1c5,'*j8J')](li1[lllilI(0x221,'x1OS')]),$[lllilI(0x22f,'MVZS')]=authorCodeList[li1[lllilI(0x1a6,'@8hY')](liIiI,0x0,authorCodeList[lllilI(0x189,'Mqtw')])];if(li1[lllilI(0x1b8,'^ng^')]($['projectId'],'1')){if(li1[lllilI(0x195,'*j8J')](li1['eyPqQ'],li1['eyPqQ'])){console['log'](li1[lllilI(0x1ab,'Kuj7')]);return;}else IiilIi[lllilI(0x279,'ourx')]('❓'+IiilIl['msg']);}}else lilIl1[lllilI(0x1fa,'SnYt')](i1l1ii[lllilI(0x277,'9quB')],li1[lllilI(0x21b,']qhQ')]),i1l1[lllilI(0x1a8,'^ng^')](0x1);}else{console[lllilI(0x1c5,'*j8J')](lllilI(0x1eb,'%u#9'));return;}IilIlI['config']({'title':$[lllilI(0x1ce,'2L&I')]});for(let lI11II=0x0;li1['DMYTP'](lI11II,IiII[lllilI(0x1ec,'UwyY')]);lI11II++){$['index']=li1[lllilI(0x206,'JF99')](lI11II,0x1),l11i1I=IiII[lI11II],iIli11[lllilI(0x22e,'dzMj')](l11i1I),$[lllilI(0x219,'!xHV')]=li1[lllilI(0x239,'x1OS')](decodeURIComponent,iIli11[lllilI(0x1ca,'JF99')](l11i1I,lllilI(0x1b1,'@8hY'))),$[lllilI(0x1ae,'GJY]')]=IilIlI['create']($[lllilI(0x241,'7UUI')],$[lllilI(0x20e,'UwyY')]),$['nickName']='',console[lllilI(0x1f1,'Rljg')]('\x0a******开始【京东账号'+$[lllilI(0x1d0,'$BS1')]+'】'+($['nickName']||$[lllilI(0x1c8,'WdpE')])+'******\x0a'),$['UA']=iIli11['genUA']($[lllilI(0x24e,'%u#9')]),await li1[lllilI(0x23b,'DUD]')](llIIli),iIli11[lllilI(0x270,'B1dx')]();if($[lllilI(0x22c,'$BS1')])break;await $[lllilI(0x25e,'u]ZD')](0x3e8);}Iiiii&&IilIlI[lllilI(0x208,'*j8J')]()&&(li1['iacvJ'](lllilI(0x21f,'CvSn'),li1[lllilI(0x1cc,'MVZS')])?(i1illI['log'](i1IIl),I1lll1&&(Iil1I1[lllilI(0x211,'*j8J')]=!![],Ii1iII[lllilI(0x21a,'4rP6')]&&Ii1iI1[lllilI(0x1c7,'u]ZD')][lllilI(0x1a4,'$BS1')](lilIli))):await IilIlI[lllilI(0x220,'FBK^')]());})()[ii1iiI(0x258,'MVZS')](llIIll=>$[ii1iiI(0x1aa,'jZmf')](llIIll))['finally'](()=>$[ii1iiI(0x23e,'CvSn')]());function iii1II(_0x576f1e,_0x472055){const _0x1e3562=Iii11l();return iii1II=function(_0x1541f5,_0x1a454a){_0x1541f5=_0x1541f5-0x188;let _0x18ef2b=_0x1e3562[_0x1541f5];if(iii1II['VYQMaF']===undefined){var _0x460336=function(_0x2449d0){const _0x1e2ae5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x159be1='',_0xacf8d2='';for(let _0xb7b51b=0x0,_0x3c24ff,_0x3f0ea7,_0xe73ce8=0x0;_0x3f0ea7=_0x2449d0['charAt'](_0xe73ce8++);~_0x3f0ea7&&(_0x3c24ff=_0xb7b51b%0x4?_0x3c24ff*0x40+_0x3f0ea7:_0x3f0ea7,_0xb7b51b++%0x4)?_0x159be1+=String['fromCharCode'](0xff&_0x3c24ff>>(-0x2*_0xb7b51b&0x6)):0x0){_0x3f0ea7=_0x1e2ae5['indexOf'](_0x3f0ea7);}for(let _0x1b15d3=0x0,_0x4e95f5=_0x159be1['length'];_0x1b15d3<_0x4e95f5;_0x1b15d3++){_0xacf8d2+='%'+('00'+_0x159be1['charCodeAt'](_0x1b15d3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xacf8d2);};const _0xc1c1c2=function(_0x3fb61f,_0x1ada25){let _0x56620e=[],_0x3e1152=0x0,_0x3d1abe,_0x5a4032='';_0x3fb61f=_0x460336(_0x3fb61f);let _0x4adad5;for(_0x4adad5=0x0;_0x4adad5<0x100;_0x4adad5++){_0x56620e[_0x4adad5]=_0x4adad5;}for(_0x4adad5=0x0;_0x4adad5<0x100;_0x4adad5++){_0x3e1152=(_0x3e1152+_0x56620e[_0x4adad5]+_0x1ada25['charCodeAt'](_0x4adad5%_0x1ada25['length']))%0x100,_0x3d1abe=_0x56620e[_0x4adad5],_0x56620e[_0x4adad5]=_0x56620e[_0x3e1152],_0x56620e[_0x3e1152]=_0x3d1abe;}_0x4adad5=0x0,_0x3e1152=0x0;for(let _0x25b531=0x0;_0x25b531<_0x3fb61f['length'];_0x25b531++){_0x4adad5=(_0x4adad5+0x1)%0x100,_0x3e1152=(_0x3e1152+_0x56620e[_0x4adad5])%0x100,_0x3d1abe=_0x56620e[_0x4adad5],_0x56620e[_0x4adad5]=_0x56620e[_0x3e1152],_0x56620e[_0x3e1152]=_0x3d1abe,_0x5a4032+=String['fromCharCode'](_0x3fb61f['charCodeAt'](_0x25b531)^_0x56620e[(_0x56620e[_0x4adad5]+_0x56620e[_0x3e1152])%0x100]);}return _0x5a4032;};iii1II['dOXvgP']=_0xc1c1c2,_0x576f1e=arguments,iii1II['VYQMaF']=!![];}const _0x3864c7=_0x1e3562[0x0],_0x346511=_0x1541f5+_0x3864c7,_0x373ee8=_0x576f1e[_0x346511];return!_0x373ee8?(iii1II['FjCHRp']===undefined&&(iii1II['FjCHRp']=!![]),_0x18ef2b=iii1II['dOXvgP'](_0x18ef2b,_0x1a454a),_0x576f1e[_0x346511]=_0x18ef2b):_0x18ef2b=_0x373ee8,_0x18ef2b;},iii1II(_0x576f1e,_0x472055);}async function llIIli(){const ilil11=ii1iiI,IillIi={'ErUVR':ilil11(0x1e5,'u]ZD'),'HryMT':function(IllI1i,i11I1l){return IllI1i(i11I1l);},'Rhboa':function(lil,IllI1l){return lil===IllI1l;},'RKCNf':'boolean','wBffR':ilil11(0x24c,'e@y@'),'ewtRy':ilil11(0x1b9,'u]ZD'),'PxLzk':function(i11I1i,IillIl){return i11I1i+IillIl;},'drmNB':ilil11(0x1d8,'esrH'),'uVYcf':function(llliil,liIl1){return llliil<liIl1;},'HtRqt':function(II1lll,II1lli){return II1lll(II1lli);},'JWctm':'redRainStartLottery','fMqXh':function(ii1I1I,IiIl,IiIi){return ii1I1I(IiIl,IiIi);},'thxrs':function(iI1ll1,IlI1Il){return iI1ll1+IlI1Il;},'IIRkQ':function(l1il1l,liIil){return l1il1l*liIil;},'ntncS':function(IllI1I,liIii){return IllI1I===liIii;},'IexHL':ilil11(0x230,'sd&K')},lii=await iIli11[ilil11(0x1f3,'b^$2')](l11i1I);if(!lii&&IillIi[ilil11(0x261,'OAxp')](typeof lii,IillIi[ilil11(0x216,'UwyY')])){console[ilil11(0x276,'9quB')](ilil11(0x225,'uDEf'));return;}try{$[ilil11(0x273,']qhQ')]=![],await illIlI(IillIi[ilil11(0x1a1,'O($4')]);if($['activityId']){if(IillIi['ewtRy']!==ilil11(0x264,'GJY]')){i1l1lI[ilil11(0x272,'%u#9')](IillIi['ErUVR']),i1iliI[ilil11(0x1f2,'CvSn')]=!![];return;}else console[ilil11(0x23d,'e@y@')](IillIi[ilil11(0x19b,'r*]v')](IillIi['drmNB'],$[ilil11(0x1de,'Lb%7')]));}else{console['log'](IillIi[ilil11(0x1d4,'x1OS')]),$['runEnd']=!![];return;}for(let IlI1Ii=0x0;IillIi[ilil11(0x1c6,'e@y@')](IlI1Ii,0x5);IlI1Ii++){await IillIi['HtRqt'](illIlI,IillIi[ilil11(0x19a,'UwyY')]);if($['sotpRun'])break;await $['wait'](IillIi[ilil11(0x26d,'OAxp')](parseInt,IillIi['thxrs'](IillIi[ilil11(0x1b3,'jZmf')](Math[ilil11(0x24d,'nle4')](),0x7d0),0x7d0),0xa));}}catch(i11I1I){IillIi[ilil11(0x1d5,'esrH')](ilil11(0x23a,'nle4'),IillIi[ilil11(0x1e0,'JF99')])?IillIi['HryMT'](IlI1il,IilliI):console[ilil11(0x191,'B5I5')](i11I1I[ilil11(0x1c3,'r*]v')]);}}async function lIII1I(ll1,iI1llI){const illlI1=ii1iiI,llliii={'SDCpG':function(IllI11,l1llIi){return IllI11+l1llIi;},'shvmQ':function(II1llI,i11I11,l1llIl){return II1llI(i11I11,l1llIl);},'YFmwE':function(ii1I1l,ii1I1i){return ii1I1l===ii1I1i;},'oIWSp':illlI1(0x232,'b^$2'),'sJqNb':illlI1(0x18e,'%u#9'),'AZcOp':function(llI,llliI){return llI/llliI;},'QvcaB':illlI1(0x1e7,'Mqtw'),'hPkus':function(iI1li1,lllii1){return iI1li1>lllii1;},'zQckZ':function(liIli,liIll){return liIli!==liIll;},'WExzd':illlI1(0x18d,'Lb%7'),'CtAXb':illlI1(0x218,'Mqtw'),'bHeNl':illlI1(0x1c0,'@8hY'),'uphIX':'恭喜抽中：'};try{if(llliii[illlI1(0x26c,'Lb%7')]===illlI1(0x253,'B1dx'))switch(ll1){case llliii[illlI1(0x243,'O($4')]:if(iI1llI[illlI1(0x194,'u]ZD')]&&iI1llI['code']===0x0){$['projectName']=iI1llI?.[illlI1(0x240,'%u#9')]?.[illlI1(0x1de,'Lb%7')];let IilIi1=Math[illlI1(0x1ea,'O($4')](llliii[illlI1(0x18c,'Ci*L')](Date[illlI1(0x24a,'B1dx')](),0x3e8));for(let iI1liI of iI1llI?.[illlI1(0x249,'b^$2')]?.['activityList']||[]){if(llliii[illlI1(0x1f5,'MVZS')](llliii['QvcaB'],llliii[illlI1(0x23f,'OJlN')])){if(IilIi1<iI1liI[illlI1(0x205,'O(#4')]&&llliii[illlI1(0x199,'Mqtw')](IilIi1,iI1liI[illlI1(0x1d1,'nle4')])){$[illlI1(0x19d,'uDEf')]=iI1liI[illlI1(0x1a2,'$BS1')];break;}}else i1li[illlI1(0x200,'yVp3')](llliii[illlI1(0x193,'O($4')](illlI1(0x21e,']qhQ'),li1II['projectName']));}}else llliii[illlI1(0x260,'GJY]')](llliii[illlI1(0x271,'^ng^')],illlI1(0x1da,'RR78'))?IiiIli['log'](illlI1(0x26b,'ourx')):console['log']('❓'+iI1llI['msg']);break;case llliii[illlI1(0x188,'WdpE')]:if(iI1llI[illlI1(0x233,'Rljg')]&&llliii[illlI1(0x242,'2L&I')](iI1llI[illlI1(0x213,'7UUI')],0x0)){let {name:IilIiI,num:i1i1I1,type:IlII1}=iI1llI?.[illlI1(0x1b6,'9quB')],IiI11='';switch(IlII1){case 0x4:{IiI11='['+type_map[IlII1]+']'+IilIiI+'元';break;}case 0x5:{if(llliii[illlI1(0x1dd,'Dvs[')]===llliii[illlI1(0x1f6,'FBK^')]){IiI11='['+type_map[IlII1]+']'+IilIiI;break;}else i1illl[illlI1(0x255,'DUD]')]=!![],I1llil[illlI1(0x1df,'Dvs[')]&&l1i111['message'][illlI1(0x1f0,'JF99')](iliII1);}default:{IiI11=illlI1(0x234,'^ng^')+IlII1+']'+IilIiI+'X'+i1i1I1;break;}}console[illlI1(0x1f1,'Rljg')](llliii[illlI1(0x1b7,'aZ]r')]+IiI11);}else{if(llliii[illlI1(0x1bc,'UwyY')](iI1llI[illlI1(0x20c,'2L&I')],0xd2))$[illlI1(0x196,'4rP6')]=!![],console['log'](iI1llI['msg']);else iI1llI[illlI1(0x20b,'OAxp')]===0xd5?console['log'](iI1llI[illlI1(0x192,'O(#4')]):console[illlI1(0x23d,'e@y@')]('❓'+iI1llI[illlI1(0x18a,'b^$2')]);}break;}else{II11Il[illlI1(0x263,'O(#4')](illlI1(0x256,'Zrq*')),IlI11['projectId']=iIIIIl[llliii[illlI1(0x1d3,'4rP6')](II1Il,0x0,lilIlI['length'])];if(llliii[illlI1(0x1ed,'4rP6')](iIIIIi[illlI1(0x1fe,'B1dx')],'1')){II1Ii['log'](illlI1(0x1f7,'O(#4'));return;}}}catch(lll){llliii[illlI1(0x1d9,'uDEf')](illlI1(0x1ad,'MVZS'),'NmRrU')?I1iIil['log'](lI1Iil[illlI1(0x197,'CvSn')]):console[illlI1(0x191,'B5I5')]('❌\x20未能正确处理\x20'+ll1+illlI1(0x1af,'u]ZD')+(lll[illlI1(0x197,'CvSn')]||lll));}}async function illIlI(iIli1i){const IIIl11=ii1iiI,iI1lii={'OPPxI':'redRainInitProjectScene','RAHfY':IIIl11(0x212,'B1dx'),'YIxPH':IIIl11(0x20a,'nle4'),'ItNkY':IIIl11(0x229,'JF99'),'tQrpT':IIIl11(0x1a0,'sd&K'),'lBMMG':'4.3','jntat':IIIl11(0x251,'RR78'),'ftThb':IIIl11(0x1ac,']iQM'),'lPcTY':'12.3.1','UGHrl':IIIl11(0x25a,'RR78'),'UFpXy':'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6','fxUEn':IIIl11(0x1a7,'dzMj'),'Iynzl':'application/x-www-form-urlencoded','EjpgV':IIIl11(0x248,'7UUI'),'QdkGh':'h5_1.0.0','WEMxh':IIIl11(0x278,'r*]v'),'wQsyw':IIIl11(0x267,'MVZS'),'PWMGx':function(iI11II,iIII1I){return iI11II===iIII1I;},'bWyRx':IIIl11(0x266,'FBK^'),'TAJpr':function(ilil1i,IlIIi){return ilil1i>IlIIi;},'mxRuJ':function(IiI1l,illlII){return IiI1l===illlII;},'QIPrK':IIIl11(0x1b2,'@8hY'),'vFPQg':IIIl11(0x1cd,'B5I5'),'jPqTc':function(iIII11,IiI1i,llll1){return iIII11(IiI1i,llll1);},'GuLae':IIIl11(0x25f,'nle4')};if($['runEnd']||$[IIIl11(0x1be,'Lb%7')])return;let IilIii='',iI1lil='',l1lIi1='POST',iIli1l=null,i1i1II={};switch(iIli1i){case iI1lii['OPPxI']:l1lIi1=iI1lii['RAHfY'],i1i1II={'appId':iI1lii[IIIl11(0x190,'ourx')],'functionId':'redRainInitProjectScene','appid':iI1lii[IIIl11(0x21c,'HACJ')],'clientVersion':IIIl11(0x1b4,'ourx'),'client':iI1lii['tQrpT'],'body':{'projectId':$[IIIl11(0x26e,'RR78')]},'version':iI1lii['lBMMG'],'t':!![]},iIli1l=await Iiiil[IIIl11(0x23c,'SnYt')](i1i1II),IilIii=IIIl11(0x1e1,'HACJ')+iIli1l[IIIl11(0x22d,'b^$2')];break;case iI1lii[IIIl11(0x1bb,'Dvs[')]:l1lIi1=iI1lii[IIIl11(0x1dc,'2L&I')],i1i1II={'appId':iI1lii[IIIl11(0x1bd,'Mqtw')],'functionId':iI1lii[IIIl11(0x204,'ourx')],'appid':IIIl11(0x229,'JF99'),'clientVersion':iI1lii['lPcTY'],'client':iI1lii[IIIl11(0x244,'dzMj')],'body':{'projectId':$['projectId'],'activityId':$['activityId']},'version':iI1lii[IIIl11(0x214,'esrH')],'t':!![]},iIli1l=await Iiiil[IIIl11(0x224,'jZmf')](i1i1II),IilIii=IIIl11(0x235,'DUD]')+iIli1l[IIIl11(0x19f,'Rljg')];break;default:console[IIIl11(0x245,'$BS1')](IIIl11(0x252,'b^$2')+iIli1i);return;}const liiIIl={'url':IilIii,'method':l1lIi1,'headers':{'Accept':'application/json,\x20text/plain,\x20*/*','Accept-Encoding':iI1lii[IIIl11(0x1ef,'*j8J')],'Accept-Language':iI1lii[IIIl11(0x25d,'B1dx')],'Connection':iI1lii['fxUEn'],'Content-Type':iI1lii[IIIl11(0x1e8,'Lb%7')],'Cookie':l11i1I,'Origin':IIIl11(0x1a3,'esrH'),'Referer':iI1lii[IIIl11(0x231,'dzMj')],'x-rp-client':iI1lii[IIIl11(0x1bf,']iQM')],'Sec-Fetch-Dest':iI1lii['WEMxh'],'Sec-Fetch-Mode':iI1lii['wQsyw'],'Sec-Fetch-Site':'same-origin','User-Agent':$['UA']},'body':iI1lil,'timeout':0x7530};iI1lii[IIIl11(0x18b,'b^$2')](l1lIi1,IIIl11(0x1a5,'HACJ'))&&(delete liiIIl[IIIl11(0x215,'dzMj')],delete liiIIl[IIIl11(0x1e4,'O($4')][iI1lii[IIIl11(0x20d,'OJlN')]]);const iil1iI=0x1;let IlIllI=0x0,il1i1I=null,lI1li1=![];while(IlIllI<iil1iI){iI1lii[IIIl11(0x1e3,'9quB')](IlIllI,0x0)&&(iI1lii['mxRuJ']('jYabs',iI1lii[IIIl11(0x18f,'7UUI')])?(llIlii['logErr'](llIlil,IIlil),ilI1lI=null):await $[IIIl11(0x19c,'uDEf')](0x3e8));const lil11l=await iIli11['request'](liiIIl);if(!lil11l[IIIl11(0x223,'Zrq*')]){il1i1I=IIIl11(0x22b,'Zrq*')+iIli1i+IIIl11(0x207,'RR78')+lil11l[IIIl11(0x1c2,'OJlN')],IlIllI++;continue;}if(!lil11l?.[IIIl11(0x236,']iQM')]){if(iI1lii[IIIl11(0x1fb,'Mqtw')](iI1lii[IIIl11(0x25b,'Lb%7')],iI1lii[IIIl11(0x27a,'CvSn')])){il1i1I=IIIl11(0x1e2,'x1OS')+iIli1i+IIIl11(0x1e9,'DUD]'),IlIllI++;continue;}else Iil1II[IIIl11(0x21d,'sd&K')]['fix'](iIIl1I);}iI1lii[IIIl11(0x257,'*j8J')](lIII1I,iIli1i,lil11l['data']),lI1li1=![];break;}IlIllI>=iil1iI&&(iI1lii[IIIl11(0x222,'UwyY')]===IIIl11(0x1fd,'WdpE')?(console[IIIl11(0x227,'4rP6')](il1i1I),lI1li1&&($[IIIl11(0x209,'!xHV')]=!![],$['message']&&$['message']['fix'](il1i1I))):(i1lI['sotpRun']=!![],IlI1l[IIIl11(0x1cb,'Lb%7')](lilIil['msg'])));}function liIiI(IlIIl,lI1liI){const I1lIi1=ii1iiI,i1i1Ii={'SWjKU':function(lllii,iI11Ii){return lllii+iI11Ii;},'EcTOk':function(iIII1l,lllil){return iIII1l*lllil;},'UCvJS':function(iI11Il,iIII1i){return iI11Il-iIII1i;}};return i1i1Ii['SWjKU'](Math[I1lIi1(0x1a9,'e@y@')](i1i1Ii['EcTOk'](Math['random'](),i1i1Ii[I1lIi1(0x247,'b^$2')](lI1liI,IlIIl))),IlIIl);}function l1il1I(iil1i1){const liiIIi=ii1iiI,il1i11={'NuDeN':liiIIi(0x24f,'7UUI'),'emeCD':liiIIi(0x259,'Ci*L')};return new Promise(IlIll1=>{const lil11I=liiIIi,IlIII={'JDEUt':il1i11[lil11I(0x228,'!xHV')],'OBqKC':function(illlIi,I1lIii){return illlIi(I1lIii);}},ilil1l={'url':''+iil1i1,'timeout':0x2710,'headers':{'User-Agent':il1i11[lil11I(0x1b0,'^ng^')]}};$[lil11I(0x1fc,'Lb%7')](ilil1l,async(IiI1I,illlIl,i11ill)=>{const Iliii1=lil11I;try{if(IiI1I){}else i11ill?i11ill=JSON[Iliii1(0x1f9,'4rP6')](i11ill)||'':console['log'](IlIII[Iliii1(0x1e6,'jZmf')]);}catch(IIIIIi){$['logErr'](IIIIIi,illlIl),i11ill=null;}finally{IlIII[Iliii1(0x275,'Rljg')](IlIll1,i11ill);}});});}function Iii11l(){const iIiIi=(function(){return[...[iｉl,'lVjnHYsQbjiAamJiPb.cByoUhnmqO.Lnvp7eCNnb==','5Rwl5yIR6i2B5yYU5OQJ5yQw77+P5B2u5yUZ5REE5yQ3lG','WPbYn8oRfG','tCkMaCkBWQa','44ko5O2s56A544gE6k+W5yEP6i+t5yYNW4NcK8k/WQyTW6m','W5ncj1K+','y2hcJrFdTa','ANtcGmk4W53cT8ooWO5Qimkp','BeZcMYRdUvVcNa','WR7dOCoCWQLt','kGtcTbn8W4iPWP1lcmo+yIlcNs5PiSk3W63dTLpdKYaeoa','8j+RLsu','WR1tWR3cVwq','W6ldSmoKBmopWRLS','5RgF5P2I5OUD5yU/5B+55yU85PAG6zAE5Q+D5z2W5Q61','W7TucmktWQO','W6qWW4lcSSoE','u3/cGCkOW5q','iUISK+AXO+wNMoI0QCkT4PYPWRRMLyxLK5tLU5BMLRFMJAy','W6ZdUCoQz8oy','a+A1JEwjTEIoVUwoPEwNIUI1Rmoe6kYZ5Qo85P2y576257UQ5PQj5zoD5QYK5BQJ','W60SW5y8WQb6','f8o+fWRdGa','WPaehWaR','zCkaC1pcJW','WPhdRCoC','W7ldRCoK','WPhcQmkklmkZuq','W6RdSSktWRncW7XDWQRdJmoHBZW8WPe','WQ3dICo5j27dKt4','W6JcN208aq','dehdLhWQ','jEw+G+ACM+A3VEwlJow3Q+E7IEE5OoADVwBORkVNRy3LV5VKUkhMRjNMTj3LI4y','zgtcQc0D','pSozca7dOa','W6dcTSoK','W4eUW7lcN8oU','FwpcMW','CbhcSrP0','o8oPWR/cSGpdUmoXvmo9','WOddVeil','WQDiW70','m8ovfCoFoSk5WOdcR8oTwddcPNhdPW','kmo5pCoUWOJdOa4FW5KHWOeMW6hcKuFcKCkiF8k/W7G9CqCfWRRcGJ7cStLDCaPUscLsbc0','W5pdSmoPrSoa','kSoJpCo/W4y','sSk+ymksdxrJ','WPxdHCoMWQrX','joISHEAWM+wNM+I3RdJIN6hdMW','v8kIt2ZcHSoAWRCAA8oI','mmoAWOP4WPBdVSkJ','WPpcP8o4W4KE','bNBcOZm','W6jSc1O','y8ksWPVdSWS','W5q6W50PWPPZxbi','nKWWcCoNW5m0vCkbWQnMaq','zmk9WOVdLq','x8kYt2FcJ8oiWQm','dmoEWOq','Ar3dPqm','hmobWQhcTCo0','hSoFW6W7','W5mcW7SvWRi','m8out8kGA8oAW7hdKW','W54ZW4tcUmoflSooWPJcQ8o1WQmXW71nEbNdRsxcLa','cSoCWPTmWRtdVSkPWQK','i8oDcq7dPmkKAW','WPGOoavR','cWtcJGHw','WQCXWP3dPSo/W4dcKG','5RE65yU66i+z5y6x5OID5yI477Y95BYl5yMn5RAz5yIeAW','WORcP8kQc8kv','hNZdGLO','rbvIB8kB','W4y8W7q6WRe','qmkoWRBcOCoPW7Gq','W5z1oCkoW6VcJSk2','6lEV5y+d5PA65PEu','W7OaySkPzCkNWQ42W4xdHCk+','iSoxhq'],...(function(){return[...['eCoAWRPBWRq','WP/dQ8okWOz9W4FdJ8kGkW','WOddRZb4CSoliX5vBtVdUmkM','8joPKmo1','WPNdRfu9WRHs','W73dTSkvWP5aW6G','d8ovW7WbawrXW6L/','W4hcQ28HiCkFzXLx','WOuwWQNdTmov','oCoAW7GLoa','W6pdR8kmWRHL','W7RdO8o3lG','WPWFbYiOW7a','ASkqvCkzF8k3WPRcTCoeAsVdQwxcReXrpLFdU2RdJI4uabe','vhmiW7y','lWBcNs3dSvdcISkkxKbWgYSrof1uWRqxoSkXASknWOBdS8oeWO0','W5GJW4pdUYdcR8kEFSkwW4BcKHJdPHK','AXbJESkB','WPldJ8ktW619','umkmB8kGvq','W6RcOmo3eH1cW4O','pComWQS','WOFcSSkkda','umkZWOhdGde','BrFcQwG','yXZdPqpcQW','W5HfaKGI','W7NdN8o0rSoi','cmoHW7OYoG','WOFdTLW','WRSMWOFdLSoW','W5JdLmkrWRv+','yGBdTrBcObaLW6KlACkNW5dcH8kpW4qbW6JcH00','W6NdTSktWP4','jCo0WQC','fadcSbDx','i8ogWQH6xCoIW5VcKmo1WQBcISoNcCokW6juWPFcOHPjW7tcKCoj','WOldT8kUW4Haya','xaxcUhS9WPOKWO0','aoADMoImTUwoSowlO+AvMUAnPmoQ5y6m6ikH5RAY5yIv5BwB57IQ57MZ5P2W','W5NcQ8orWPv2W4RdK8o2da48W6/dTSoiW5qy','DSkxpCk4WQHXe8kOW47cQJhcGZRdTCoSWPxdI3u/','4P+bWRFMN43NNjROR5RMS5Ku','jCoJWRVcNY4','dUw+OEADHUA3KEwjOEw3QUE6SUE4QoAFPCoN6k60566+5B+Z5lQr5Q655REA5yIg','BCkrvCkVymoSW5i','oEAFTUwjToEjToAcJEAVQow5M++/KoA2TEwiIUIoKUwmGoAiH+wkPW','wSkxsNxcGa','W5lcUhqOla','W5Sqv8ofW7tdNmoKW77cVbtcMSkpWQBdVCkXpGbMWOzbW7j+yCoKwmoWW6VcVfX+WPpdLColWP/dTCk+iSkDW68mW7bngSkdkreNW6ZdQqjSzGGasmodW5BcN8obW5rxcvyHb8kkWOhcRdLSoCoTjtVcMSkzW55sW6/dIIJdQmk3W6LfmKNdKduUlvlcUvSGhKLyW7ddL8ouW6u8CgnuW67dIdiOx8ktW6Xuumo+W6tdJxhdJbdcSrdcHCkUxJH3W7Wwz8o6acBcTCk/lmoOW4VdHmoDzmkUWRioW5tcPH1da8oMWPdcVSo5iCor','y8kimmkAW6u4gCkEW5ZcPYlcGXpcTSk4WOpdNa','BedcV8kdW58','W6LefdyoWQiIWR9VvG','hSoDWQdcGb8','WOKkW4RcUW','WP/dSmkXW6PN','yCoWvtNdLq','n3hcPtNcRW','W6ZdVmoPFmopWRK','q8k/yW','DCoXDtZdQW','mmoZW5dcMcRdJgVdUCkyW4W','lwBdN0yJi8kdv8o/WOmexq','W5lcTNi4','WOlcKNOJlCkmsq','W7rAsgz4W7K4WR1OwxZcOG','W7XJamoEhSkvWO8','sUAEP+IpVUwnIowkGUAwV+AnJ1dLJzNOGRJMT5/LIQdLTkhNUAVNUQpMN7C','Du/cUmkbW4G','a1tcTG7cPG','DmkanSkaWQX7cCkYW54','W4xcPmo1WP4xoCkRWRi5vCkvWRe','pSo1WQpcVrldMmoQCSoYWQhdSW','WPaUbIGP','zrNcUG','WRi9gJfFW5jF','sbJcOq5A','W5hdGmoYbeq','WOv9WPa','WODZWPRcQa','WRJdQSkSWRpcVW','lmoIlG'],...(function(){return['WPxcM8k0omk6','xapcGqrE','W4aZW47cJCoqlW','W6ddPmka','W53dGmkQWRHv','W5CLtSoJW6G','u1lcT8kJW5e','EXpcUvSsWPiNWQhcQLxdICk3rmojWPeIW7JdUY3cMvZdJCkI','wZVdKrtcMa','gCoemCooW7O','W7GYW7K','qSkJyW','W5NdKCogEmoT','WPOkW5FcRG','wCkMwfFcQq','pCoxdG3dL8k2ya','WO7cUmkxgSk8uNy','5l6z5OkP5yQa','W4qgW4VcN8ox','W4SEW5SVWRK','WO3dV8kqWR3cRq','WR5vm8oO','WQHxlSo1jCk3WRyoW4JdRq','W7zDtMT1W7P0W6zWzMJcKIvD','W67dO8oXlMRdKG','WQm7WP0','W73dL8oJBSo4','WORdUK8rWQbFpgFdOSoF','gmo3WPJcImoam8okkmowW5aXECoXWQCtWOqJxXO','WO3dSem','btxcLa','WQekwZFcLa','f8ovW60Yq2P2W6LSua','WQitfYy','n8opWQnhtG','W51/kSkdWQZcJW','uYj8f3m','asrmWQaY','W6BcK0Sfma','DSoershdRK8+','W57ORPZMS6hLKilLUl7cKq','WQiggXej','WOC7vGhcVWC','WP8/yZ3cRa','W7Hzh8kTWO8','CCk/z8kTWPZdVG','CeVcHSkRW4a','WO1ZWOpcRa','EhxcOXip','WQ4khsqh','WPa7W6dcOCoo','ccjmWQeWWQnLWORdPJqaW7X8','A0FcNdJdRa','W5GpW5uSWPe','W4OIW7tcGSog','DxpcM8kuW5tcTCoD','yxyxW5bP','WQylwcJcSW','mmoZW5lcKKxcScVdN8k6W640W6pcUq','zmk3WPddJGe','WRddOSkVWRtcP8oPW7y','m8ose8oqvCogW4xdSSoHuq','xmkOxa','jmo1WPvlwG','WPmoW5dcVmolW5yZ','sGtcPs5YW6DjtW','mCooWPnB','WPddOCoqWQjWW4NdI8kWoZ0/W6BdR8oE','DMNcIa','W7lcNfqPdq','W7y0W5SmCa','W69IaLO','WOFMN4JLIklNI6ZMGkNMRzlLUOBVVQJMTyxLI4hOJ6JLJzdMIyBLIBe','WOldT18DWQ4','WOpdOSkHW55BwCkPWO81','W49/ouFdP1LrW6yCFCkOW6my','pCoqdbddLa','rGXqBCkn','hSo3WOlcM8oG','o0ddPZtcUuzYWPe','WQrhpq'];}())];}())];}());Iii11l=function(){return iIiIi;};return Iii11l();};var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
